{
    "procedures": {
        "gen_pol_numbers": "PROCEDURE gen_pol_numbers (v_prod_code     IN     NUMBER,\n                               v_brn_code      IN     NUMBER,\n                               v_uw_yr         IN     NUMBER,\n                               v_trans_code    IN     VARCHAR2,\n                               v_policy_no     IN OUT VARCHAR2,\n                               v_endos_no      IN OUT VARCHAR2,\n                               v_batch_no      IN OUT NUMBER,\n                               v_serial        IN     NUMBER,\n                               v_policy_type   IN     VARCHAR2,\n                               v_coinsurance   IN     VARCHAR2,\n                               v_div_code      IN     VARCHAR2)\n    IS\n        v_pol_type           VARCHAR2 (5);\n        v_seq                NUMBER;\n        v_seqno              VARCHAR2 (35);\n        v_brn_sht_length     NUMBER;\n        v_src                VARCHAR2 (1);\n        v_binderpols_param   VARCHAR2 (1) DEFAULT 'N';\n    BEGIN\n        BEGIN\n            v_binderpols_param :=\n                gin_parameters_pkg.get_param_varchar (\n                    'NORMAL_BINDER_POLS_USESAME_SEQ');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_binderpols_param := 'N';\n        END;",
        "get_risk_dates": "PROCEDURE get_risk_dates (\n        v_scl_code                 IN     NUMBER,\n        v_covt_code                IN     NUMBER,\n        v_pol_tot_instlmt          IN     NUMBER,\n        v_pro_expiry_period        IN     VARCHAR2,\n        v_pol_cover_from           IN     DATE,\n        v_pol_cover_to             IN     DATE,\n        v_increment                IN     VARCHAR2,\n        v_increment_by             IN     NUMBER,\n        v_susp_reinstate           IN     VARCHAR2,\n        v_susp_reinst_type         IN     VARCHAR2,\n        v_risk_pymt_install_pcts   IN OUT VARCHAR2,\n        v_wef_date                 IN OUT DATE,\n        v_wet_date                 IN OUT DATE,\n        v_install_period           IN OUT NUMBER,\n        v_cover_days               IN OUT NUMBER,\n        v_susp_wef                 IN OUT DATE,\n        v_susp_wet                 IN OUT DATE,\n        v_new_pol_wet                 OUT DATE,\n        v_pol_install_wet          IN OUT DATE,\n        v_pol_loaded                      VARCHAR2 DEFAULT 'N',\n        v_ipu_status               IN     VARCHAR2 DEFAULT NULL)\n    IS\n        v_cvt_install_type          gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs          gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts     gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods       gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct               NUMBER;\n        v_pymnt_tot_instlmt         NUMBER;\n        v_suspend_days              NUMBER;\n        v_install_days              NUMBER;\n        v_max_installs              NUMBER;\n        v_months_added              NUMBER;\n        v_day                       NUMBER;\n        v_month                     NUMBER;\n        v_year                      NUMBER;\n        v_mnth                      NUMBER;\n        v_add_days                  NUMBER;\n        v_reinsdayspremsubs_param   NUMBER;\n    --v_pol_install_wet DATE;\n    BEGIN\n        --raise_error ('Error getting cover type details..');\n        BEGIN\n            SELECT sclcovt_install_type,\n                   sclcovt_max_installs,\n                   sclcovt_pymt_install_pcts,\n                   sclcovt_install_periods\n              INTO v_cvt_install_type,\n                   v_cvt_max_installs,\n                   v_cvt_pymt_install_pcts,\n                   v_cvt_install_periods\n              FROM gin_subclass_cover_types\n             WHERE     sclcovt_covt_code = v_covt_code\n                   AND sclcovt_scl_code = v_scl_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting cover type details..');\n        END;",
        "pop_mand_policy_rsk_limits": "PROCEDURE pop_mand_policy_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                          v_scl_code       IN NUMBER,\n                                          v_bind_code      IN NUMBER,\n                                          v_cvt_code       IN NUMBER,\n                                          v_batch_no       IN NUMBER)\n    IS                 -- populates mandatory sections for non binder policies\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                gin_insured_property_unds.ipu_ncd_status%TYPE;\n        v_ncd_level                 gin_insured_property_unds.ipu_ncd_level%TYPE;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type != 'ND'\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code\n                                   AND NVL (scvts_mandatory, 'N') = 'Y')\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code)\n            UNION\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND NVL (v_ncd_status, 'N') = 'Y'\n                   AND NVL (v_ncd_level, 0) > 0\n                   AND sect_type = 'ND'\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code\n                                   AND NVL (scvts_mandatory, 'N') = 'Y')\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n    BEGIN\n        BEGIN\n            SELECT pol_binder_policy,\n                   NVL (ipu_ncd_status, 'N'),\n                   NVL (ipu_ncd_level, 0)\n              INTO v_pol_binder, v_ncd_status, v_ncd_level\n              FROM gin_policies, gin_insured_property_unds\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "get_ren_policy_no": "PROCEDURE get_ren_policy_no (v_prod_code       IN     NUMBER,\n                                 v_prod_sht_desc   IN     VARCHAR2,\n                                 v_brn_code        IN     NUMBER,\n                                 v_brn_sht_desc    IN     VARCHAR2,\n                                 v_pol_binder      IN     VARCHAR2,\n                                 v_pol_type        IN     VARCHAR2,\n                                 v_policy_no       IN OUT VARCHAR2,\n                                 v_endos_no        IN OUT VARCHAR2,\n                                 v_batch_no        IN OUT NUMBER)\n    IS\n        v_serial       VARCHAR2 (10);\n        v_pol_prefix   VARCHAR2 (15);\n    BEGIN\n        DBMS_OUTPUT.put_line ('GPOL' || 1);\n\n        --\n        BEGIN\n            SELECT pro_policy_prefix\n              INTO v_pol_prefix\n              FROM gin_products\n             WHERE pro_code = v_prod_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                raise_error (\n                       'The product '\n                    || v_prod_sht_desc\n                    || ' is not defined in the setup');\n            WHEN OTHERS\n            THEN\n                raise_error (\n                       'Unable to retrieve the policy prefix for the product '\n                    || v_prod_sht_desc);\n        END;",
        "get_policy_no": "PROCEDURE get_policy_no (v_prod_code       IN     NUMBER,\n                             v_prod_sht_desc   IN     VARCHAR2,\n                             v_brn_code        IN     NUMBER,\n                             v_brn_sht_desc    IN     VARCHAR2,\n                             v_pol_binder      IN     VARCHAR2,\n                             v_pol_type        IN     VARCHAR2,\n                             v_policy_no       IN OUT VARCHAR2,\n                             v_endos_no        IN OUT VARCHAR2,\n                             v_batch_no        IN OUT NUMBER)\n    IS\n        v_serial       VARCHAR2 (10);\n        v_pol_prefix   VARCHAR2 (15);\n    BEGIN\n        DBMS_OUTPUT.put_line ('GPOL' || 1);\n\n        IF v_policy_no IS NULL\n        THEN\n            BEGIN\n                SELECT pro_policy_prefix\n                  INTO v_pol_prefix\n                  FROM gin_products\n                 WHERE pro_code = v_prod_code;\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    raise_error (\n                           'The product '\n                        || v_prod_sht_desc\n                        || ' is not defined in the setup');\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                           'Unable to retrieve the policy prefix for the product '\n                        || v_prod_sht_desc);\n            END;",
        "pop_policy_rsk_limits": "PROCEDURE pop_policy_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                     v_scl_code       IN NUMBER,\n                                     v_bind_code      IN NUMBER,\n                                     v_cvt_code       IN NUMBER,\n                                     v_batch_no       IN NUMBER)\n    IS\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                gin_insured_property_unds.ipu_ncd_status%TYPE;\n        v_ncd_level                 gin_insured_property_unds.ipu_ncd_level%TYPE;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_si_rate,\n                   prr_si_limit_type,\n                   prr_min_rate,\n                   prr_max_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND (   sect_type != 'ND'\n                        OR (    sect_type = 'ND'\n                            AND NVL (v_ncd_status, 'N') = 'Y'\n                            AND NVL (v_ncd_level, 0) > 0))\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n    BEGIN\n        BEGIN\n            SELECT pol_binder_policy,\n                   NVL (ipu_ncd_status, 'N'),\n                   NVL (ipu_ncd_level, 0)\n              INTO v_pol_binder, v_ncd_status, v_ncd_level\n              FROM gin_policies, gin_insured_property_unds\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "process_stp_rsk_limits": "PROCEDURE process_stp_rsk_limits (v_new_ipu_code    IN NUMBER,\n                                      v_scl_code        IN NUMBER,\n                                      v_bind_code       IN NUMBER,\n                                      v_sect_code       IN NUMBER,\n                                      v_limit           IN NUMBER,\n                                      v_row             IN NUMBER,\n                                      v_add_edit        IN VARCHAR2,\n                                      v_rsk_sect_data   IN rsk_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n        v_batch_no                 NUMBER;\n        v_prr_max_rate             NUMBER;\n        v_prr_min_rate             NUMBER;\n\n        CURSOR pil_cur (vsectcode   IN NUMBER,\n                        vbindcode   IN NUMBER,\n                        vsclcode    IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc                      sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')    type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate                       rate,\n                           '0'                            terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'FXD'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type = 'ND');\n    BEGIN\n        BEGIN\n            ---RAISE_ERROR('v_sect_code'||v_sect_code||'v_bind_code'||v_bind_code||'v_scl_code'||v_scl_code);\n            OPEN pil_cur (v_sect_code, v_bind_code, v_scl_code);\n\n            LOOP\n                EXIT WHEN pil_cur%NOTFOUND;\n\n                FETCH pil_cur\n                    INTO v_sect_sht_desc,\n                         v_sect_desc,\n                         v_sect_type,\n                         v_type_desc,\n                         v_prr_rate_type,\n                         v_prr_rate,\n                         v_terr_description,\n                         v_prr_prem_minimum_amt,\n                         v_prr_multiplier_rate,\n                         v_prr_division_factor,\n                         v_prr_multplier_div_fact,\n                         v_prr_rate_desc,\n                         v_prr_max_rate,\n                         v_prr_min_rate;\n            END LOOP;\n\n            CLOSE pil_cur;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                       'Error getting the premium rates for 1st section..'\n                    || v_sect_code\n                    || '-'\n                    || v_bind_code\n                    || '-'\n                    || v_scl_code);\n        END;",
        "del_quot_risks": "PROCEDURE del_quot_risks (v_qr_code IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_quot_risk_excess\n         WHERE qre_qr_code = v_qr_code;\n\n        DELETE gin_quot_risk_clauses\n         WHERE qrc_qr_code = v_qr_code;\n\n        DELETE gin_quot_risk_limits\n         WHERE qrl_qr_code = v_qr_code;\n\n        DELETE gin_quot_risks\n         WHERE qr_code = v_qr_code;\n    END;",
        "del_quot_prod": "PROCEDURE del_quot_prod (v_qp_code IN NUMBER)\n    IS\n        CURSOR qp_risks IS\n            SELECT qr_code\n              FROM gin_quot_risks\n             WHERE qr_qp_code = v_qp_code;\n    BEGIN\n        FOR qpr IN qp_risks\n        LOOP\n            del_quot_risks (qpr.qr_code);\n        END LOOP;\n\n        DELETE gin_quot_product_taxes\n         WHERE qpt_qp_code = v_qp_code;\n\n        DELETE gin_quot_clauses\n         WHERE qc_qp_code = v_qp_code;\n\n        DELETE gin_quot_products\n         WHERE qp_code = v_qp_code;\n    END;",
        "del_quotation": "PROCEDURE del_quotation (v_quot_code IN NUMBER)\n    IS\n        CURSOR quot_prods IS\n            SELECT qp_code\n              FROM gin_quot_products\n             WHERE qp_quot_code = v_quot_code;\n    BEGIN\n        FOR qps IN quot_prods\n        LOOP\n            del_quot_prod (qps.qp_code);\n        END LOOP;\n\n        DELETE gin_policy_exceptions\n         WHERE gpe_quot_code = v_quot_code;\n\n        DELETE gin_quotations\n         WHERE quot_code = v_quot_code;\n    END;",
        "process_ren_rsk_limits": "PROCEDURE process_ren_rsk_limits (v_new_ipu_code    IN NUMBER,\n                                      v_scl_code        IN NUMBER,\n                                      v_bind_code       IN NUMBER,\n                                      v_sect_code       IN NUMBER,\n                                      v_limit           IN NUMBER,\n                                      v_row             IN NUMBER,\n                                      v_add_edit        IN VARCHAR2,\n                                      v_rsk_sect_data   IN rsk_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n\n        CURSOR pil_cur (vsectcode   IN NUMBER,\n                        vbindcode   IN NUMBER,\n                        vsclcode    IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc                      sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')    type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate                       rate,\n                           '0'                            terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'FXD'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type = 'ND');\n    BEGIN\n        BEGIN\n            OPEN pil_cur (v_sect_code, v_bind_code, v_scl_code);\n\n            LOOP\n                EXIT WHEN pil_cur%NOTFOUND;\n\n                FETCH pil_cur\n                    INTO v_sect_sht_desc,\n                         v_sect_desc,\n                         v_sect_type,\n                         v_type_desc,\n                         v_prr_rate_type,\n                         v_prr_rate,\n                         v_terr_description,\n                         v_prr_prem_minimum_amt,\n                         v_prr_multiplier_rate,\n                         v_prr_division_factor,\n                         v_prr_multplier_div_fact,\n                         v_prr_rate_desc;\n            END LOOP;\n\n            CLOSE pil_cur;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                       'Error getting the premium rates for 1st section..'\n                    || v_sect_code\n                    || '-'\n                    || v_bind_code\n                    || '-'\n                    || v_scl_code);\n        END;",
        "process_quot_rsk_limits": "PROCEDURE process_quot_rsk_limits (v_qr_code         IN NUMBER,\n                                       v_qp_code         IN NUMBER,\n                                       v_quot_code       IN NUMBER,\n                                       v_pro_code        IN NUMBER,\n                                       v_scl_code        IN NUMBER,\n                                       v_bind_code       IN NUMBER,\n                                       v_sect_code       IN NUMBER,\n                                       v_limit           IN NUMBER,\n                                       v_row             IN NUMBER,\n                                       v_add_edit        IN VARCHAR2,\n                                       v_rsk_sect_data   IN rsk_sect_tab   --,\n                                                                        --v_qrl_code     IN NUMBER\n                                                                        )\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n\n        CURSOR pil_cur (vsectcode   IN NUMBER,\n                        vbindcode   IN NUMBER,\n                        vsclcode    IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc                      sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')    type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate                       rate,\n                           '0'                            terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'FXD'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type = 'ND');\n    BEGIN\n        BEGIN\n            OPEN pil_cur (v_sect_code, v_bind_code, v_scl_code);\n\n            LOOP\n                EXIT WHEN pil_cur%NOTFOUND;\n\n                FETCH pil_cur\n                    INTO v_sect_sht_desc,\n                         v_sect_desc,\n                         v_sect_type,\n                         v_type_desc,\n                         v_prr_rate_type,\n                         v_prr_rate,\n                         v_terr_description,\n                         v_prr_prem_minimum_amt,\n                         v_prr_multiplier_rate,\n                         v_prr_division_factor,\n                         v_prr_multplier_div_fact,\n                         v_prr_rate_desc;\n            END LOOP;\n\n            CLOSE pil_cur;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                       'Error getting the premium rates for 1st section..'\n                    || v_sect_code\n                    || '-'\n                    || v_bind_code\n                    || '-'\n                    || v_scl_code);\n        END;",
        "pop_quot_rsk_limits": "PROCEDURE pop_quot_rsk_limits (v_qr_code     IN NUMBER,\n                                   v_qp_code     IN NUMBER,\n                                   v_quot_code   IN NUMBER,\n                                   v_pro_code    IN NUMBER,\n                                   v_scl_code    IN NUMBER,\n                                   v_bind_code   IN NUMBER,\n                                   v_cvt_code    IN NUMBER)\n    IS\n    BEGIN\n        update_mandatory_sections (v_qr_code,\n                                   v_scl_code,\n                                   v_bind_code,\n                                   v_cvt_code,\n                                   NULL,\n                                   'N',\n                                   'Q');\n    END;",
        "pop_ren_clauses": "PROCEDURE pop_ren_clauses (v_pol_policy_no   IN VARCHAR2,\n                               v_pol_endos_no    IN VARCHAR2,\n                               v_pol_batch_no    IN NUMBER,\n                               v_pro_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_ren_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no);\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_ren_policy_lvl_clauses (plcl_sbcl_cls_code,\n                                                    plcl_sbcl_scl_code,\n                                                    plcl_pro_sht_desc,\n                                                    plcl_pro_code,\n                                                    plcl_pol_policy_no,\n                                                    plcl_pol_ren_endos_no,\n                                                    plcl_pol_batch_no,\n                                                    plcl_sbcl_cls_sht_desc,\n                                                    plcl_cls_type, --PLCL_CLAUSE,\n                                                    plcl_cls_editable,\n                                                    plcl_new,\n                                                    plcl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.clp_scl_code,\n                         cls.clp_pro_sht_desc,\n                         cls.clp_pro_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         cls.sbcl_cls_sht_desc,\n                         cls.cls_type,                          --PLCL_CLAUSE,\n                         cls.cls_editable,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "pop_clauses": "PROCEDURE pop_clauses (v_pol_policy_no   IN VARCHAR2,\n                           v_pol_endos_no    IN VARCHAR2,\n                           v_pol_batch_no    IN NUMBER,\n                           v_pro_code        IN NUMBER)\n    IS\n        v_clause           CLOB;\n        v_pro_mult_class   VARCHAR2 (1);\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                   AND NVL (sbcl_cls_lien_clause, 'N') != 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n            UNION\n            SELECT cls_heading,\n                   scvtmc_cls_sht_desc,\n                   scvtmc_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_scl_cvt_mand_clauses,\n                   gin_product_sub_classes,\n                   gin_clause\n             WHERE     clp_scl_code = scvtmc_scl_code\n                   AND scvtmc_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (scvmtc_cls_mandatory, 'N') = 'Y'\n                   AND scvtmc_sclcovt_code IN\n                           (SELECT ipu_covt_code\n                              FROM gin_insured_property_unds\n                             WHERE ipu_pol_batch_no = v_pol_batch_no)\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND scvtmc_cls_code NOT IN\n                           (SELECT sbcl_cls_code\n                              FROM gin_subcl_clauses\n                             WHERE     NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                                   AND sbcl_scl_code IN\n                                           (SELECT ipu_sec_scl_code\n                                              FROM gin_insured_property_unds\n                                             WHERE ipu_pol_batch_no =\n                                                   v_pol_batch_no));\n\n        CURSOR pckge_clauses IS\n            SELECT pro_code,\n                   pro_sht_desc,\n                   sbcl_cls_code,\n                   sclcnt,\n                   clscnt,\n                   sbcl_cls_sht_desc,\n                   cls_heading,\n                   cls_type,\n                   cls_editable,\n                   clp_scl_code\n              FROM (  SELECT pro_code,\n                             pro_sht_desc,\n                             MAX (clp_scl_code)     clp_scl_code,\n                             COUNT (1)              sclcnt\n                        FROM gin_products, gin_product_sub_classes\n                       WHERE pro_code = clp_pro_code\n                    --    AND pro_code = 810\n                    GROUP BY pro_code, pro_sht_desc),\n                   (  SELECT clp_pro_code,\n                             sbcl_cls_code,\n                             sbcl_cls_sht_desc,\n                             cls_heading,\n                             cls_type,\n                             cls_editable,\n                             COUNT (1)     clscnt\n                        FROM gin_subcl_clauses,\n                             gin_product_sub_classes,\n                             gin_clause\n                       WHERE     clp_scl_code = sbcl_scl_code\n                             AND sbcl_cls_code = cls_code\n                             AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                             AND NVL (sbcl_cls_lien_clause, 'N') != 'Y'\n                    -- AND CLP_pro_code = 810\n                    GROUP BY clp_pro_code,\n                             sbcl_cls_code,\n                             sbcl_cls_sht_desc,\n                             cls_heading,\n                             cls_type,\n                             cls_editable) b\n             WHERE     pro_code = clp_pro_code(+)\n                   AND sbcl_cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND pro_code = (SELECT pol_pro_code\n                                     FROM gin_policies\n                                    WHERE pol_batch_no = v_pol_batch_no);\n\n        CURSOR clause2 IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                   AND NVL (sbcl_cls_lien_clause, 'N') != 'Y'\n                   AND clp_scl_code IN\n                           (SELECT ipu_sec_scl_code\n                              FROM gin_insured_property_unds\n                             WHERE ipu_pol_batch_no = v_pol_batch_no)\n                   /* AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)*/\n                   AND NOT EXISTS\n                           (SELECT poscl_scl_code, poscl_cls_code\n                              FROM gin_policy_subclass_clauses\n                             WHERE     poscl_pol_policy_no = v_pol_policy_no\n                                   AND poscl_scl_code = clp_scl_code\n                                   AND poscl_cls_code = cls_code);\n\n        CURSOR clause_autofill IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_lien_clause, 'N') != 'Y'\n                   AND cls_code IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n            UNION\n            SELECT cls_heading,\n                   scvtmc_cls_sht_desc,\n                   scvtmc_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable\n              FROM gin_scl_cvt_mand_clauses,\n                   gin_product_sub_classes,\n                   gin_clause\n             WHERE     clp_scl_code = scvtmc_scl_code\n                   AND scvtmc_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no);\n\n        v_rownum           NUMBER := 0;\n        v_scl_cnt          NUMBER;\n    BEGIN\n        BEGIN\n              SELECT pro_mult_class, COUNT (1)\n                INTO v_pro_mult_class, v_scl_cnt\n                FROM gin_products, gin_product_sub_classes\n               WHERE pro_code = clp_pro_code AND pro_code = v_pro_code\n            GROUP BY pro_mult_class;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                NULL;\n        END;",
        "pop_lien_clauses": "PROCEDURE pop_lien_clauses (v_pol_policy_no   IN VARCHAR2,\n                                v_pol_endos_no    IN VARCHAR2,\n                                v_pol_batch_no    IN NUMBER,\n                                v_pro_code        IN NUMBER)\n    IS\n        v_clause           CLOB;\n        v_pro_mult_class   VARCHAR2 (1);\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_lien_clause, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no);\n\n        CURSOR pckge_clauses IS\n            SELECT pro_code,\n                   pro_sht_desc,\n                   sbcl_cls_code,\n                   sclcnt,\n                   clscnt,\n                   sbcl_cls_sht_desc,\n                   cls_heading,\n                   cls_type,\n                   cls_editable,\n                   clp_scl_code\n              FROM (  SELECT pro_code,\n                             pro_sht_desc,\n                             MAX (clp_scl_code)     clp_scl_code,\n                             COUNT (1)              sclcnt\n                        FROM gin_products, gin_product_sub_classes\n                       WHERE pro_code = clp_pro_code\n                    GROUP BY pro_code, pro_sht_desc),\n                   (  SELECT clp_pro_code,\n                             sbcl_cls_code,\n                             sbcl_cls_sht_desc,\n                             cls_heading,\n                             cls_type,\n                             cls_editable,\n                             COUNT (1)     clscnt\n                        FROM gin_subcl_clauses,\n                             gin_product_sub_classes,\n                             gin_clause\n                       WHERE     clp_scl_code = sbcl_scl_code\n                             AND sbcl_cls_code = cls_code\n                             AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                             AND NVL (sbcl_cls_lien_clause, 'N') = 'Y'\n                    GROUP BY clp_pro_code,\n                             sbcl_cls_code,\n                             sbcl_cls_sht_desc,\n                             cls_heading,\n                             cls_type,\n                             cls_editable) b\n             WHERE     pro_code = clp_pro_code(+)\n                   AND sbcl_cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND pro_code = (SELECT pol_pro_code\n                                     FROM gin_policies\n                                    WHERE pol_batch_no = v_pol_batch_no);\n\n        CURSOR clause2 IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_lien_clause, 'N') = 'Y'\n                   AND clp_scl_code IN\n                           (SELECT ipu_sec_scl_code\n                              FROM gin_insured_property_unds\n                             WHERE ipu_pol_batch_no = v_pol_batch_no)\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND NOT EXISTS\n                           (SELECT poscl_scl_code, poscl_cls_code\n                              FROM gin_policy_subclass_clauses\n                             WHERE     poscl_pol_policy_no = v_pol_policy_no\n                                   AND poscl_scl_code = clp_scl_code\n                                   AND poscl_cls_code = cls_code);\n\n        CURSOR clause_autofill IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND NVL (sbcl_cls_lien_clause, 'N') = 'Y'\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no);\n\n        v_rownum           NUMBER := 0;\n        v_scl_cnt          NUMBER;\n    BEGIN\n        --RAISE_ERROR(v_pro_code||'='||v_pol_batch_no);\n        BEGIN\n              SELECT pro_mult_class, COUNT (1)\n                INTO v_pro_mult_class, v_scl_cnt\n                FROM gin_products, gin_product_sub_classes\n               WHERE pro_code = clp_pro_code AND pro_code = v_pro_code\n            GROUP BY pro_mult_class;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                NULL;\n        END;",
        "pop_liab_limits": "PROCEDURE pop_liab_limits (v_pol_policy_no   IN VARCHAR2,\n                               v_pol_endos_no    IN VARCHAR2,\n                               v_pol_batch_no    IN NUMBER,\n                               v_pro_code        IN NUMBER)\n    IS\n        CURSOR pop_limits_liabilities IS\n            SELECT schv_code,\n                   schv_narration,\n                   schv_value,\n                   schv_scl_code\n              FROM gin_schedule_values\n             WHERE schv_scl_code = (SELECT pro_sht_desc\n                                      FROM gin_products\n                                     WHERE pro_code = v_pro_code);\n\n        v_auto_pop_limits_param   VARCHAR2 (1) := 'N';\n        v_trans_type              VARCHAR2 (100);\n    BEGIN\n        v_auto_pop_limits_param :=\n            NVL (\n                GIN_PARAMETERS_PKG.get_param_varchar (\n                    'AUTO_POP_LIMITS_LIABILITIES'),\n                'N');\n\n        BEGIN\n            SELECT pol_policy_status\n              INTO v_trans_type\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_trans_type := NULL;\n        END;",
        "pop_binder_clauses": "PROCEDURE pop_binder_clauses (v_pol_policy_no   IN VARCHAR2,\n                                  v_pol_endos_no    IN VARCHAR2,\n                                  v_pol_batch_no    IN NUMBER,\n                                  v_pro_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND cls_code IN\n                           (SELECT bsccl_cls_code\n                              FROM gin_binder_subcl_clauses, gin_policies\n                             WHERE     pol_bind_code = bsccl_bind_code\n                                   AND pol_batch_no = v_pol_batch_no\n                                   AND NVL (pol_binder_policy, 'N') = 'Y')\n                   AND clp_pro_code = v_pro_code\n                   --AND NVL(SBCL_CLS_MANDATORY,'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n            UNION\n            SELECT cls_heading,\n                   scvtmc_cls_sht_desc,\n                   scvtmc_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_scl_cvt_mand_clauses,\n                   gin_product_sub_classes,\n                   gin_clause\n             WHERE     clp_scl_code = scvtmc_scl_code\n                   AND scvtmc_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (scvmtc_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND scvtmc_cls_code NOT IN\n                           (SELECT sbcl_cls_code\n                              FROM gin_subcl_clauses\n                             WHERE NVL (sbcl_cls_mandatory, 'N') = 'Y');\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_policy_lvl_clauses (plcl_sbcl_cls_code,\n                                                plcl_sbcl_scl_code,\n                                                plcl_pro_sht_desc,\n                                                plcl_pro_code,\n                                                plcl_pol_policy_no,\n                                                plcl_pol_ren_endos_no,\n                                                plcl_pol_batch_no,\n                                                plcl_sbcl_cls_sht_desc,\n                                                plcl_cls_type,  --PLCL_CLAUSE,\n                                                plcl_cls_editable,\n                                                plcl_new,\n                                                plcl_header,\n                                                plcl_rownum,\n                                                plcl_product_appl,\n                                                plcl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.clp_scl_code,\n                         cls.clp_pro_sht_desc,\n                         cls.clp_pro_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         cls.sbcl_cls_sht_desc,\n                         cls.cls_type,                          --PLCL_CLAUSE,\n                         cls.cls_editable,\n                         'Y',\n                         NULL,\n                         NULL,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "pop_binder_quot_clauses": "PROCEDURE pop_binder_quot_clauses (\n        v_quot_code     IN NUMBER,\n        v_qp_pro_code   IN NUMBER,\n        v_all_prod      IN BOOLEAN DEFAULT TRUE)\n    IS\n        CURSOR quot_pro IS\n            SELECT *\n              FROM gin_quot_products\n             WHERE qp_quot_code = v_quot_code;\n\n        CURSOR cur_clauses (v_pro_code IN NUMBER, v_qp_code IN NUMBER)\n        IS\n            SELECT cls_code,\n                   cls_sht_desc,\n                   clp_pro_code,\n                   cls_editable,\n                   sbcl_scl_code,\n                   cls_type,\n                   cls_heading\n              FROM gin_clause, gin_product_sub_classes, gin_subcl_clauses\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND cls_code IN\n                           (SELECT bsccl_cls_code\n                              FROM gin_binder_subcl_clauses,\n                                   gin_quot_products\n                             WHERE     qp_bind_code = bsccl_bind_code\n                                   AND qp_code = v_qp_code\n                                   AND NVL (qp_binder, 'N') = 'Y')\n                   AND clp_pro_code = v_pro_code\n                   --AND NVL(SBCL_CLS_MANDATORY,'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT qc_cls_code\n                              FROM gin_quot_clauses\n                             WHERE     qc_pro_code = v_pro_code\n                                   AND qc_qp_code = v_qp_code);\n\n        v_clause   LONG;\n    BEGIN\n        FOR qp IN quot_pro\n        LOOP\n            IF v_all_prod OR qp.qp_pro_code = v_qp_pro_code\n            THEN\n                --RAISE_ERROR('v_quot_code =='||v_quot_code||'v_qp_pro_code =='||v_qp_pro_code);\n                FOR cls IN cur_clauses (qp.qp_pro_code, qp.qp_code)\n                LOOP\n                    BEGIN\n                        --RAISE_ERROR('--------- inserting clauses1..');\n                        INSERT INTO gin_quot_clauses (qc_cls_code,\n                                                      qc_cls_sht_desc,\n                                                      qc_pro_code,\n                                                      qc_quot_code,\n                                                      qc_quot_no,\n                                                      qc_quot_revision_no,\n                                                      qc_qp_code,\n                                                      qc_cls_editable,\n                                                      qc_sbcl_scl_code,\n                                                      qc_cls_type,\n                                                      qrc_cls_type,\n                                                      qc_cls_heading)\n                             VALUES (cls.cls_code,\n                                     cls.cls_sht_desc,\n                                     cls.clp_pro_code,\n                                     qp.qp_quot_code,\n                                     qp.qp_quot_no,\n                                     qp.qp_quot_revision_no,\n                                     qp.qp_code,\n                                     cls.cls_editable,\n                                     cls.sbcl_scl_code,\n                                     cls.cls_type,\n                                     NULL,\n                                     cls.cls_heading);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            raise_error ('Error inserting clauses..');\n                    END;",
        "pop_quot_clauses": "PROCEDURE pop_quot_clauses (v_quot_code     IN NUMBER,\n                                v_qp_pro_code   IN NUMBER,\n                                v_all_prod      IN BOOLEAN DEFAULT TRUE)\n    IS\n        CURSOR quot_pro IS\n            SELECT *\n              FROM gin_quot_products\n             WHERE qp_quot_code = v_quot_code;\n\n        CURSOR cur_clauses (v_pro_code IN NUMBER, v_qp_code IN NUMBER)\n        IS\n            SELECT cls_code,\n                   cls_sht_desc,\n                   clp_pro_code,\n                   cls_editable,\n                   sbcl_scl_code,\n                   cls_type,\n                   cls_heading\n              FROM gin_clause, gin_product_sub_classes, gin_subcl_clauses\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT qc_cls_code\n                              FROM gin_quot_clauses\n                             WHERE     qc_pro_code = v_pro_code\n                                   AND qc_qp_code = v_qp_code);\n\n        v_clause   LONG;\n    BEGIN\n        FOR qp IN quot_pro\n        LOOP\n            IF v_all_prod OR qp.qp_pro_code = v_qp_pro_code\n            THEN\n                FOR cls IN cur_clauses (qp.qp_pro_code, qp.qp_code)\n                LOOP\n                    BEGIN\n                        INSERT INTO gin_quot_clauses (qc_cls_code,\n                                                      qc_cls_sht_desc,\n                                                      qc_pro_code,\n                                                      qc_quot_code,\n                                                      qc_quot_no,\n                                                      qc_quot_revision_no,\n                                                      qc_qp_code,\n                                                      qc_cls_editable,\n                                                      qc_sbcl_scl_code,\n                                                      qc_cls_type,\n                                                      qrc_cls_type,\n                                                      qc_cls_heading)\n                             VALUES (cls.cls_code,\n                                     cls.cls_sht_desc,\n                                     cls.clp_pro_code,\n                                     qp.qp_quot_code,\n                                     qp.qp_quot_no,\n                                     qp.qp_quot_revision_no,\n                                     qp.qp_code,\n                                     cls.cls_editable,\n                                     cls.sbcl_scl_code,\n                                     cls.cls_type,\n                                     NULL,\n                                     cls.cls_heading);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            raise_error ('Error inserting clauses..');\n                    END;",
        "pop_insured": "PROCEDURE pop_insured (v_pol_policy_no   IN VARCHAR2,\n                           v_pol_endos_no    IN VARCHAR2,\n                           v_pol_batch_no    IN NUMBER,\n                           v_prp_code        IN NUMBER)\n    IS\n    BEGIN\n        INSERT INTO gin_policy_insureds (polin_code,\n                                         polin_pol_policy_no,\n                                         polin_pol_ren_endos_no,\n                                         polin_pol_batch_no,\n                                         polin_prp_code)\n                 VALUES (\n                               TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n                            || polin_code_seq.NEXTVAL,\n                            v_pol_policy_no,  ---:GIN_POLICIES1.POL_POLICY_NO,\n                            v_pol_endos_no,\n                            ---:GIN_POLICIES1.POL_REN_ENDOS_NO,\n                            v_pol_batch_no,    ---:GIN_POLICIES1.POL_BATCH_NO,\n                            v_prp_code);      ---:GIN_POLICIES1.POL_PRP_CODE);\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error ('Error inserting Insureds..');\n    END;",
        "pop_taxes": "PROCEDURE pop_taxes (v_pol_policy_no   IN VARCHAR2,\n                         v_pol_endos_no    IN VARCHAR2,\n                         v_pol_batch_no    IN NUMBER,\n                         v_pro_code        IN NUMBER,\n                         v_pol_binder      IN VARCHAR2 DEFAULT 'N',\n                         v_trans_type      IN VARCHAR2)\n    IS\n        v_cnt                      NUMBER;\n        v_pol_policy_type          VARCHAR2 (1);\n        v_pop_taxes                VARCHAR2 (1);\n        v_scl_code                 NUMBER;\n        v_allowsdonfacrein_param   VARCHAR2 (1);\n        v_con_type                 VARCHAR2 (100) := NULL;\n        v_sd_param                 VARCHAR2 (1) := 'N';\n\n        CURSOR sub_class IS\n            SELECT *\n              FROM gin_insured_property_unds\n             WHERE ipu_pol_batch_no = v_pol_batch_no;\n\n        CURSOR taxes (v_scl_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN\n                               (SELECT clp_scl_code\n                                  FROM gin_product_sub_classes\n                                 WHERE     clp_pro_code = v_pro_code\n                                       AND clp_scl_code = v_scl_code))\n                   AND trnt_mandatory = 'Y'\n                   AND trnt_type IN ('UTX',\n                                     'SD',\n                                     'UTL',\n                                     'EX',\n                                     'PHFUND',\n                                     'MPSD',\n                                     'MSD',\n                                     'COPHFUND',\n                                     'PRM-VAT',\n                                     'ROAD',\n                                     'HEALTH',\n                                     'CERTCHG',\n                                     'MOTORTX')\n                   AND taxr_trnt_code NOT IN\n                           (SELECT ptx_trac_trnt_code\n                              FROM gin_policy_taxes\n                             WHERE ptx_pol_batch_no = v_pol_batch_no)\n                   AND NVL (\n                           DECODE (v_trans_type,\n                                   'NB', trnt_apply_nb,\n                                   'SP', trnt_apply_sp,\n                                   'RN', trnt_apply_rn,\n                                   'EN', trnt_apply_en,\n                                   'CN', trnt_apply_cn,\n                                   'EX', trnt_apply_ex,\n                                   'DC', trnt_apply_dc,\n                                   'RE', trnt_apply_re,\n                                   'ME', trnt_apply_re /*This was added to resolve ME policies which were not populating taxes*/\n                                                      ),\n                           'N') =\n                       'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = v_pro_code);\n    BEGIN\n        IF v_pol_batch_no = 2019181747\n        THEN\n            RAISE_ERROR ('TEST THIS');\n        END IF;\n\n        BEGIN\n            SELECT GIN_PARAMETERS_PKG.GET_PARAM_VARCHAR (\n                       'ALLOW_SD_ON_BINDER_POLICY')\n              INTO v_sd_param\n              FROM DUAL;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_sd_param := 'N';\n        END;",
        "pop_quot_taxes": "PROCEDURE pop_quot_taxes (v_quot_code IN NUMBER)\n    IS\n        x   NUMBER := 0;\n\n        CURSOR qprod IS\n            SELECT *\n              FROM gin_quot_products\n             WHERE qp_quot_code = v_quot_code;\n\n        CURSOR taxes (v_prod_code IN NUMBER, v_qp_code IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN (SELECT clp_scl_code\n                                          FROM gin_product_sub_classes\n                                         WHERE clp_pro_code = v_prod_code))\n                   AND trnt_mandatory = 'Y'\n                   AND trnt_type IN ('UTX',\n                                     'SD',\n                                     'UTL',\n                                     'EX',\n                                     'PRM-VAT',\n                                     'ROAD',\n                                     'HEALTH')\n                   AND taxr_trnt_code NOT IN (SELECT qpt_trac_trnt_code\n                                                FROM gin_quot_product_taxes\n                                               WHERE qpt_qp_code = v_qp_code)\n                   AND NVL (trnt_apply_nb, 'N') = 'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = v_prod_code);\n    BEGIN\n        FOR qp IN qprod\n        LOOP\n            FOR txs IN taxes (qp.qp_pro_code, qp.qp_code)\n            LOOP\n                x := NVL (x, 0) + 1;\n\n                INSERT INTO gin_quot_product_taxes (qpt_code,\n                                                    qpt_trac_trnt_code,\n                                                    qpt_rate,\n                                                    qpt_rate_type,\n                                                    qpt_trnt_renewal_endos,\n                                                    qpt_taxr_code,\n                                                    qpt_qp_code,\n                                                    qpt_quot_code,\n                                                    qpt_tax_type,\n                                                    qpt_tl_lvl_code,\n                                                    qpt_risk_prod_level)\n                     VALUES (gin_qpt_code_seq.NEXTVAL,\n                             txs.trnt_code,\n                             txs.taxr_rate,\n                             txs.taxr_rate_type,\n                             NULL,\n                             txs.taxr_code,\n                             qp.qp_code,\n                             v_quot_code,\n                             'UTX',\n                             'UP',\n                             'P');\n            END LOOP;\n        END LOOP;\n    END;",
        "pop_quick_quot_taxes": "PROCEDURE pop_quick_quot_taxes (v_qqtn_code   IN NUMBER,\n                                    v_prod_code   IN NUMBER,\n                                    v_con_type    IN VARCHAR2 DEFAULT NULL)\n    IS\n        x   NUMBER := 0;\n\n        CURSOR taxes IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN (SELECT clp_scl_code\n                                          FROM gin_product_sub_classes\n                                         WHERE clp_pro_code = v_prod_code))\n                   -- AND trnt_mandatory = 'Y'\n                   --AND trnt_type IN ('PHFUND', 'SD', 'UTL', 'EX','MPSD','MSD','COPHFUND')\n                   AND trnt_type IN ('UTX',\n                                     'SD',\n                                     'UTL',\n                                     'EX',\n                                     'PHFUND',\n                                     'MPSD',\n                                     'MSD',\n                                     'ROAD',\n                                     'HEALTH',\n                                     'CERTCHG',\n                                     'MOTORTX')\n                   AND taxr_trnt_code NOT IN\n                           (SELECT qqtt_trac_trnt_code\n                              FROM gin_quick_quot_taxes\n                             WHERE qqtt_qqtn_code = v_qqtn_code)\n                   AND NVL (trnt_apply_nb, 'N') = 'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = v_prod_code);\n    BEGIN\n        --      RAISE_ERROR(v_qqtn_code ||'='|| v_prod_code);\n        FOR txs IN taxes\n        LOOP\n            x := NVL (x, 0) + 1;\n\n            --        IF txs.trnt_type='MSD' THEN\n            --        RAISE_ERROR(v_qqtn_code ||'='|| v_prod_code);\n            --       END IF;\n            INSERT INTO gin_quick_quot_taxes (qqtt_code,\n                                              qqtt_trac_trnt_code,\n                                              qqtt_rate,\n                                              qqtt_rate_type,\n                                              qqtt_trnt_renewal_endos,\n                                              qqtt_taxr_code,\n                                              qqtt_qqtn_code,\n                                              qqtt_tax_type,\n                                              qqtt_tl_lvl_code,\n                                              qqtt_risk_prod_level)\n                 VALUES (gin_qqtt_code_seq.NEXTVAL,\n                         txs.trnt_code,\n                         txs.taxr_rate,\n                         txs.taxr_rate_type,\n                         NULL,\n                         txs.taxr_code,\n                         v_qqtn_code,\n                         'UTX',\n                         'UP',\n                         'P');\n        END LOOP;\n\n        IF NVL (TRIM (v_con_type), 'XYZ') = 'SEA'\n        THEN\n            DELETE gin_quick_quot_taxes\n             WHERE     qqtt_trac_trnt_code = 'SD'\n                   AND qqtt_qqtn_code = v_qqtn_code;\n\n            UPDATE gin_quick_quot_taxes\n               SET qqtt_tl_lvl_code = 'SI'\n             WHERE     qqtt_trac_trnt_code = 'MPSD'\n                   AND qqtt_qqtn_code = v_qqtn_code;\n        END IF;\n\n        IF NVL (TRIM (v_con_type), 'XYZ') = 'AIR'\n        THEN\n            DELETE gin_quick_quot_taxes\n             WHERE     qqtt_trac_trnt_code = 'MPSD'\n                   AND qqtt_qqtn_code = v_qqtn_code;\n        END IF;\n    END;",
        "pop_ren_taxes": "PROCEDURE pop_ren_taxes (v_pol_policy_no   IN VARCHAR2,\n                             v_pol_endos_no    IN VARCHAR2,\n                             v_pol_batch_no    IN NUMBER,\n                             v_pro_code        IN NUMBER,\n                             v_pol_binder      IN VARCHAR2 DEFAULT 'N',\n                             v_trans_type      IN VARCHAR2)\n    IS\n        CURSOR taxes IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN (SELECT clp_scl_code\n                                          FROM gin_product_sub_classes\n                                         WHERE clp_pro_code = v_pro_code))\n                   AND trnt_mandatory = 'Y'\n                   AND trnt_type IN ('UTX',\n                                     'UTL',\n                                     'EX',\n                                     'PHFUND',\n                                     'PRM-VAT',\n                                     'ROAD',\n                                     'HEALTH',\n                                     'CERTCHG',\n                                     'MOTORTX')                        --'SD',\n                   AND taxr_trnt_code NOT IN\n                           (SELECT ptx_trac_trnt_code\n                              FROM gin_ren_policy_taxes\n                             WHERE ptx_pol_batch_no = v_pol_batch_no)\n                   AND NVL (\n                           DECODE (v_trans_type,\n                                   'NB', trnt_apply_nb,\n                                   'SP', trnt_apply_sp,\n                                   'RN', trnt_apply_rn,\n                                   'EN', trnt_apply_en,\n                                   'CN', trnt_apply_cn,\n                                   'EX', trnt_apply_ex,\n                                   'DC', trnt_apply_dc,\n                                   'RE', trnt_apply_re),\n                           'N') =\n                       'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = v_pro_code);\n    BEGIN\n        FOR taxes_rec IN taxes\n        LOOP\n            IF NOT (    taxes_rec.trnt_type = 'SD'\n                    AND NVL (v_pol_binder, 'N') = 'Y')\n            THEN\n                BEGIN\n                    INSERT INTO gin_ren_policy_taxes (ptx_trac_scl_code,\n                                                      ptx_trac_trnt_code,\n                                                      ptx_pol_policy_no,\n                                                      ptx_pol_ren_endos_no,\n                                                      ptx_pol_batch_no,\n                                                      ptx_rate,\n                                                      ptx_amount,\n                                                      ptx_tl_lvl_code,\n                                                      ptx_rate_type,\n                                                      ptx_rate_desc,\n                                                      ptx_endos_diff_amt,\n                                                      ptx_tax_type,\n                                                      ptx_risk_pol_level)\n                         VALUES (taxes_rec.taxr_scl_code,\n                                 taxes_rec.trnt_code,\n                                 v_pol_policy_no,\n                                 v_pol_endos_no,\n                                 v_pol_batch_no,\n                                 taxes_rec.taxr_rate,\n                                 NULL,\n                                 'UP',\n                                 taxes_rec.taxr_rate_type,\n                                 taxes_rec.taxr_rate_desc,\n                                 NULL,\n                                 taxes_rec.trnt_type,\n                                 'P');\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error ('Error applying taxes..');\n                END;",
        "gin_tmplt_schedules": "PROCEDURE gin_tmplt_schedules (v_web_ipu_code   IN NUMBER,\n                                   v_pro_code       IN NUMBER,\n                                   v_new_ipu_code   IN NUMBER,\n                                   v_property_id    IN VARCHAR2,\n                                   v_risk_value     IN NUMBER,\n                                   v_cover_type     IN VARCHAR2)\n    IS\n        v_cnt   NUMBER (4);\n\n        CURSOR sched_cur IS\n              SELECT clp_unwr_scr_code,\n                     screen_name,\n                     INITCAP (scl_sht_desc)     scl_sht_desc\n                FROM gin_product_sub_classes, gin_screens, gin_sub_classes\n               WHERE     clp_unwr_scr_code = screen_code\n                     AND clp_scl_code = scl_code\n                     AND clp_pro_code = v_pro_code\n                     AND screen_name IS NOT NULL\n            GROUP BY clp_unwr_scr_code, screen_name, scl_sht_desc;\n\n        CURSOR rsks_cur IS\n            SELECT mps_reg_no,\n                   mps_make,\n                   mps_cubic_capacity,\n                   mps_yr_manft,\n                   mps_carry_capacity,\n                   mps_value,\n                   mps_body_type,\n                   mps_cover_type,\n                   mps_covt_code,\n                   mps_itemno,\n                   mps_chasis_no,\n                   mps_engine_no,\n                   mps_color,\n                   mps_logbook,\n                   mps_acc_limit,\n                   mps_itmno_code,\n                   mps_waiver_1st_amt,\n                   mps_car_hire\n              FROM gin_web_motor_sch\n             WHERE mps_ipu_code = v_web_ipu_code;\n    BEGIN\n        FOR rsks_cur_rec IN rsks_cur\n        LOOP\n            FOR sched_cur_rec IN sched_cur\n            LOOP\n                IF sched_cur_rec.screen_name = 'UMOTORP'\n                THEN\n                    BEGIN\n                        SELECT COUNT (1)\n                          INTO v_cnt\n                          FROM gin_motor_private_sch\n                         WHERE mps_ipu_code = TO_NUMBER (v_new_ipu_code);\n\n                        raise_error ('SCHEDULE COUNT ' || v_cnt);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            raise_error (\n                                'Error securing whether Motor schedule exists..1');\n                    END;",
        "process_policy": "PROCEDURE process_policy (v_pol_data       IN     policy_tab,\n                              v_risks_data     IN     risk_tab,\n                              v_agentcontact   IN     VARCHAR2,\n                              v_pol_batch_no      OUT NUMBER)\n    IS\n        v_cnt                NUMBER;\n        v_new_ipu_code       NUMBER;\n        v_new_polin_code     NUMBER;\n        v_exp_flag           VARCHAR2 (2);\n        v_uw_yr              VARCHAR2 (1);\n        v_open_cover         VARCHAR2 (2);\n        v_user               VARCHAR2 (35)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_pol_status         VARCHAR2 (5);\n        v_row                NUMBER := 0;\n        v_trans_no           NUMBER;\n        v_stp_code           NUMBER;\n        v_scl_desc           VARCHAR2 (75);\n        v_bind_desc          VARCHAR2 (75);\n        v_wet_date           DATE;\n        v_pol_renewal_dt     DATE;\n        v_pol_no             VARCHAR2 (45);\n        v_end_no             VARCHAR2 (45);\n        v_batchno            NUMBER;\n        v_cur_code           NUMBER;\n        v_cur_symbol         VARCHAR2 (15);\n        v_cur_rate           NUMBER;\n        v_pol_uwyr           NUMBER;\n        v_policy_doc         VARCHAR2 (45);\n        v_tran_ref_no        VARCHAR2 (45);\n        v_serial             VARCHAR2 (45);\n        v_endrsd_rsks_tab    gin_stp_pkg.endrsd_rsks_tab;\n        v_rsk_sect_data      rsk_sect_tab;\n        next_ggts_trans_no   NUMBER;\n        v_error              VARCHAR2 (200);\n\n        CURSOR rsks IS\n            SELECT DISTINCT stpr_gis_ipu_code,\n                            stpr_action_type,\n                            stpr_stp_code,\n                            stpr_property_id,\n                            stpr_desc,\n                            stpr_scl_code,\n                            stpr_scl_desc,\n                            stpr_cvt_code,\n                            stpr_cvt_desc,\n                            stpr_bind_code,\n                            stpr_bind_desc\n              FROM gin_risk_stp_temp_data\n             WHERE stpr_stp_code = v_stp_code;\n\n        CURSOR rsk_limits (rsk_prp_id IN VARCHAR2)\n        IS\n            SELECT DISTINCT stpr_stp_code,\n                            stpr_property_id,\n                            stpr_desc,\n                            stpr_scl_code,\n                            stpr_scl_desc,\n                            stpr_cvt_code,\n                            stpr_cvt_desc,\n                            stpr_bind_code,\n                            stpr_bind_desc,\n                            stpr_sect_code,\n                            stpr_sect_desc,\n                            stpr_limit\n              FROM gin_risk_stp_temp_data\n             WHERE     stpr_stp_code = v_stp_code\n                   AND stpr_property_id = rsk_prp_id;\n    BEGIN\n        v_user := NVL (v_agentcontact, v_user);\n\n        --raise_error ('No policy data provided..');\n        SELECT gin_stp_code_seq.NEXTVAL INTO v_stp_code FROM DUAL;\n\n        IF v_pol_data.COUNT = 0\n        THEN\n            raise_error ('No policy data provided..');\n        END IF;\n\n        IF v_risks_data.COUNT = 0\n        THEN\n            raise_error ('No Risk data provided..');\n        END IF;\n\n        DBMS_OUTPUT.put_line (1);\n\n        FOR x IN 1 .. v_risks_data.COUNT\n        LOOP\n            v_scl_desc := v_risks_data (x).ipu_scl_desc;\n\n            IF v_scl_desc IS NULL\n            THEN\n                SELECT scl_sht_desc\n                  INTO v_scl_desc\n                  FROM gin_sub_classes\n                 WHERE scl_code = v_risks_data (x).ipu_scl_code;\n            END IF;\n\n            v_bind_desc := v_risks_data (x).ipu_bind_desc;\n\n            IF v_bind_desc IS NULL\n            THEN\n                SELECT bind_name\n                  INTO v_bind_desc\n                  FROM gin_binders\n                 WHERE bind_code = v_risks_data (x).ipu_bind_code;\n            END IF;\n\n            INSERT INTO gin_risk_stp_temp_data (stpr_stp_code,\n                                                stpr_property_id,\n                                                stpr_desc,\n                                                stpr_scl_code,\n                                                stpr_scl_desc,\n                                                stpr_cvt_code,\n                                                stpr_cvt_desc,\n                                                stpr_bind_code,\n                                                stpr_bind_desc,\n                                                stpr_sect_code,\n                                                stpr_sect_desc,\n                                                stpr_limit,\n                                                stpr_gis_ipu_code,\n                                                stpr_action_type)\n                 VALUES (v_stp_code,\n                         v_risks_data (x).ipu_property_id,\n                         v_risks_data (x).ipu_desc,\n                         v_risks_data (x).ipu_scl_code,\n                         v_scl_desc,\n                         v_risks_data (x).ipu_cvt_code,\n                         v_risks_data (x).ipu_cvt_desc,\n                         v_risks_data (x).ipu_bind_code,\n                         v_bind_desc,\n                         v_risks_data (x).ipu_sect_code,\n                         v_risks_data (x).ipu_sect_desc,\n                         v_risks_data (x).ipu_limit,\n                         v_risks_data (x).gis_ipu_code,\n                         v_risks_data (x).ipu_action_type);\n        END LOOP;\n\n        DBMS_OUTPUT.put_line (2);\n\n        FOR pcount IN 1 .. v_pol_data.COUNT\n        LOOP\n            IF v_pol_data (pcount).pol_brn_sht_desc IS NULL\n            THEN\n                raise_error ('PROVIDE THE BRANCH ...');\n            END IF;\n\n            IF v_pol_data (pcount).pol_pro_code IS NULL\n            THEN\n                raise_error ('SELECT THE POLICY PRODUCT ...');\n            END IF;\n\n            IF v_pol_data (pcount).pol_wef_dt IS NULL\n            THEN\n                raise_error ('PROVIDE THE COVER FROM DATE ...');\n            END IF;\n\n            DBMS_OUTPUT.put_line (21);\n            v_wet_date := v_pol_data (pcount).pol_wet_dt;\n\n            IF v_wet_date IS NULL\n            THEN\n                v_wet_date :=\n                    get_wet_date (v_pol_data (pcount).pol_pro_code,\n                                  v_pol_data (pcount).pol_wef_dt);\n            END IF;\n\n            DBMS_OUTPUT.put_line (22);\n\n            IF v_wet_date IS NULL\n            THEN\n                raise_error ('PROVIDE THE COVER TO DATE ...');\n            END IF;\n\n            DBMS_OUTPUT.put_line (23);\n\n            IF     NVL (v_pol_data (pcount).pol_binder_policy, 'N') = 'Y'\n               AND v_pol_data (pcount).pol_bind_code IS NULL\n            THEN\n                raise_error ('YOU HAVE NOT DEFINED THE BORDEREAUX CODE ..');\n            END IF;\n\n            DBMS_OUTPUT.put_line (v_pol_data (pcount).pol_wef_dt);\n            DBMS_OUTPUT.put_line (TO_CHAR (v_pol_data (pcount).pol_wef_dt));\n            DBMS_OUTPUT.put_line (\n                TO_NUMBER (TO_CHAR (v_pol_data (pcount).pol_wef_dt, 'RRRR')));\n            v_pol_uwyr :=\n                TO_NUMBER (TO_CHAR (v_pol_data (pcount).pol_wef_dt, 'RRRR'));\n            /*IF v_pol_Data(pcount).POL_UW_YEAR IS NULL OR v_pol_Data(pcount).POL_UW_YEAR = 0 THEN\n                RAISE_ERROR('THE UNDERWRITING YEAR MUST BE A VALID YEAR...');\n            END IF;*/\n            DBMS_OUTPUT.put_line (25);\n            v_pol_renewal_dt :=\n                get_renewal_date (v_pol_data (pcount).pol_pro_code,\n                                  v_wet_date);\n            v_cur_code := v_pol_data (pcount).pol_cur_code;\n            v_cur_rate := v_pol_data (pcount).pol_cur_rate;\n\n            IF v_cur_code IS NULL\n            THEN\n                v_cur_rate := NULL;\n\n                BEGIN\n                    SELECT org_cur_code, cur_symbol\n                      INTO v_cur_code, v_cur_symbol\n                      FROM tqc_organizations, tqc_systems, tqc_currencies\n                     WHERE     org_code = sys_org_code\n                           AND org_cur_code = cur_code\n                           AND sys_code = 37;\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error ('UNABLE TO RETRIEVE THE BASE CURRENCY');\n                END;",
        "update_declarations": "PROCEDURE update_declarations (v_batch_no    IN NUMBER,\n                                   v_policy_no   IN VARCHAR2,\n                                   v_uw_yr       IN NUMBER,\n                                   v_ipu_code    IN NUMBER DEFAULT NULL)\n    IS\n        v_cnt   NUMBER;\n\n        CURSOR decl_cur IS\n              SELECT poldc_policy_no,\n                     poldc_uw_yr,\n                     rskdc_ipu_id,\n                     rltdc_sect_code,\n                     SUM (NVL (rltdc_decl_amount, 0))     decl_amnt\n                FROM gin_policy_declarations,\n                     gin_risks_declarations,\n                     gin_risk_limits_declarations\n               WHERE     poldc_code = rskdc_poldc_code\n                     AND rskdc_code = rltdc_rskdc_code\n                     AND poldc_policy_no = v_policy_no\n                     AND poldc_uw_yr = v_uw_yr\n                     AND rskdc_ipu_id =\n                         DECODE (NVL (v_ipu_code, 0),\n                                 0, rskdc_ipu_id,\n                                 (SELECT ipu_id\n                                    FROM gin_insured_property_unds\n                                   WHERE ipu_code = v_ipu_code))\n            GROUP BY poldc_policy_no,\n                     poldc_uw_yr,\n                     rskdc_ipu_id,\n                     rltdc_sect_code;\n    BEGIN\n        FOR decl_rec IN decl_cur\n        LOOP\n            BEGIN\n                SELECT COUNT (1)\n                  INTO v_cnt\n                  FROM gin_insured_property_unds, gin_policies\n                 WHERE     pol_batch_no = ipu_pol_batch_no\n                       AND pol_batch_no = v_batch_no\n                       AND ipu_id = decl_rec.rskdc_ipu_id;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error verifying underwriting year..');\n            END;",
        "create_midterm_trans": "PROCEDURE create_midterm_trans (v_old_batch   IN     NUMBER,\n                                    v_batch_no       OUT NUMBER,\n                                    v_user        IN     VARCHAR2,\n                                    v_eff_date    IN     DATE)\n    IS\n        v_serial             NUMBER (10);\n        v_pol_no             VARCHAR2 (26);\n        v_ends_no            VARCHAR2 (26);\n        v_pol_prefix         VARCHAR2 (15);\n        v_new_ipu_code       NUMBER;\n        vdummy               NUMBER;\n        v_tran_no            NUMBER;\n        v_prrd_code          NUMBER;\n        v_wef                DATE;\n        v_wet                DATE;\n        v_ren_date           DATE;\n        v_year               NUMBER;\n        next_ggts_trans_no   NUMBER;\n        v_serialno           VARCHAR2 (26);\n        v_tran_ref_no        VARCHAR2 (26);\n\n        CURSOR cur_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch;\n\n        CURSOR cur_taxes IS\n            SELECT *\n              FROM gin_policy_taxes\n             WHERE     ptx_pol_batch_no = v_old_batch\n                   AND NVL (ptx_trac_trnt_code, 'XX') != 'SD';\n\n        CURSOR cur_coinsurer IS\n            SELECT *\n              FROM gin_coinsurers\n             WHERE coin_pol_batch_no = v_old_batch;\n\n        CURSOR cur_facre_dtls IS\n            SELECT *\n              FROM gin_facre_in_dtls\n             WHERE fid_pol_batch_no = v_old_batch;\n\n        CURSOR cur_conditions IS\n            SELECT *\n              FROM gin_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_old_batch;\n\n        CURSOR cur_insureds IS\n            SELECT *\n              FROM gin_policy_insureds\n             WHERE polin_pol_batch_no = v_old_batch;\n\n        CURSOR cur_ipu (v_polin_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_insured_property_unds\n             WHERE     ipu_pol_batch_no = v_old_batch\n                   AND ipu_polin_code = v_polin_code;\n\n        CURSOR cur_limits (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_insured_limits\n             WHERE pil_ipu_code = v_ipu;\n\n        CURSOR cur_clauses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR perils (v_ipu NUMBER)\n        IS\n            SELECT gpsp_per_code,\n                   gpsp_per_sht_desc,\n                   gpsp_sec_sect_code,\n                   gpsp_sect_sht_desc,\n                   gpsp_sec_scl_code,\n                   gpsp_ipp_code,\n                   gpsp_ipu_code,\n                   gpsp_limit_amt,\n                   gpsp_excess_amt\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR risk_excesses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_excess\n             WHERE re_ipu_code = v_ipu;\n\n        CURSOR schedules (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_schedules\n             WHERE polrs_ipu_code = v_ipu;\n    BEGIN\n        --      raise_error ('v_old_batch' || v_old_batch);\n        IF v_user IS NULL\n        THEN\n            raise_error ('User not defined.');\n        END IF;\n\n        FOR cur_pol_rec IN cur_pol\n        LOOP\n            IF     NVL (cur_pol_rec.pol_reinsured, 'N') != 'Y'\n               AND NVL (cur_pol_rec.pol_loaded, 'N') = 'N'\n               AND tqc_interfaces_pkg.get_org_type (37) = 'INS'\n            THEN\n                raise_error (\n                    'Reinsurance for the previous transaction on this policy has not been performed/Authorised. Cannot continue..');\n            END IF;\n\n            BEGIN\n                SELECT pro_policy_prefix\n                  INTO v_pol_prefix\n                  FROM gin_products\n                 WHERE pro_code = cur_pol_rec.pol_pro_code;\n\n                IF v_pol_prefix IS NULL\n                THEN\n                    ROLLBACK;\n                    raise_error (\n                           'The policy prefix for the product '\n                        || cur_pol_rec.pol_pro_sht_desc\n                        || ' is not defined in the setup');\n                END IF;\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    ROLLBACK;\n                    raise_error (\n                           'The product '\n                        || cur_pol_rec.pol_pro_sht_desc\n                        || ' is not defined in the setup');\n                WHEN OTHERS\n                THEN\n                    ROLLBACK;\n                    raise_error (\n                           'Unable to retrieve the policy prefix for the product '\n                        || cur_pol_rec.pol_pro_sht_desc);\n            END;",
        "gin_policies_prc": "PROCEDURE gin_policies_prc (\n        v_pol_no           IN OUT VARCHAR2,\n        v_pol_data         IN     web_pol_tab,\n        v_agentcontact     IN     VARCHAR2,\n        v_pol_batch_no     IN OUT NUMBER,\n        v_user             IN     VARCHAR2,\n        v_del_sect         IN     VARCHAR2 DEFAULT NULL,\n        v_mar_cert_level   IN     VARCHAR2 DEFAULT NULL)\n    IS\n        v_cnt                          NUMBER;\n        v_new_polin_code               NUMBER;\n        v_exp_flag                     VARCHAR2 (2);\n        v_uw_yr                        VARCHAR2 (1);\n        v_open_cover                   VARCHAR2 (2);\n        v_pol_status                   VARCHAR2 (5);\n        v_trans_no                     NUMBER;\n        v_stp_code                     NUMBER;\n        v_wet_date                     DATE;\n        v_pol_renewal_dt               DATE;\n        v_client_pol_no                VARCHAR2 (45);\n        v_end_no                       VARCHAR2 (45);\n        v_batchno                      NUMBER;\n        v_cur_code                     NUMBER;\n        v_cur_symbol                   VARCHAR2 (15);\n        v_cur_rate                     NUMBER;\n        v_pwet_dt                      DATE;\n        v_pol_uwyr                     NUMBER;\n        v_policy_doc                   VARCHAR2 (200);\n        v_brn_code                     NUMBER;\n        v_brn_sht_desc                 VARCHAR2 (15);\n        v_endrsd_rsks_tab              gin_stp_pkg.endrsd_rsks_tab;\n        v_rsk_data                     risk_tab;\n        v_admin_fee_applicable         VARCHAR2 (1);\n        v_ren_cnt                      NUMBER;\n        v_admin_disc                   NUMBER;\n        v_pro_min_prem                 NUMBER;\n        v_uw_trans                     VARCHAR2 (1);\n        v_valid_trans                  VARCHAR2 (1);\n        v_inception_dt                 DATE;\n        v_inception_yr                 NUMBER;\n        y                              NUMBER;\n        vuser                          VARCHAR2 (35)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.pvg_username');\n        v_seqno                        VARCHAR2 (35);\n        v_brn_sht_length               NUMBER;\n        v_growth_type                  VARCHAR2 (5);\n        v_pol_loaded                   VARCHAR2 (5);\n        v_policy_status                VARCHAR2 (5);\n        v_prev_tot_instlmt             NUMBER;\n        v_cvt_install_type             gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs             gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts        gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods          gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct                  NUMBER;\n        v_pymnt_tot_instlmt            NUMBER;\n        v_ipu_wef                      DATE;\n        v_ipu_wet                      DATE;\n        v_install_period               NUMBER;\n        v_cover_days                   NUMBER;\n        v_pro_sht_desc                 gin_products.pro_sht_desc%TYPE;\n        next_ggts_trans_no             NUMBER;\n        v_old_act_code                 NUMBER;\n        v_new_act_code                 NUMBER;\n        v_pro_travel_cnt               NUMBER;\n        v_act_type_id                  VARCHAR2 (5);\n        v_ren_wef_dt                   DATE;\n        v_ren_wet_dt                   DATE;\n        v_pdl_code                     NUMBER;\n        v_agnt_agent_code              NUMBER;\n        v_tie_agent_pol_to_brn_param   VARCHAR2 (1) := 'N';\n        v_agn_brn_code                 NUMBER;\n        v_client_pin_required          VARCHAR2 (1) := 'N';\n        v_clnt_pin                     VARCHAR2 (15);\n        v_serial                       VARCHAR2 (35);\n        v_tran_ref_no                  VARCHAR2 (35);\n        v_bpn_activity_share           NUMBER;\n        v_valuationcount               NUMBER;\n        v_ex_valuation_param           VARCHAR2 (1);\n        v_binderpols_param             VARCHAR2 (1) DEFAULT 'N';\n        validatedates                  NUMBER := 0;\n        v_agn_sht_desc                 tqc_agencies.agn_sht_desc%TYPE;\n        v_comm_applicable              VARCHAR2 (1);\n\n        CURSOR rsks (v_old_batch_no IN NUMBER)\n        IS\n            SELECT ipu_code, ipu_polin_code, ipu_prp_code\n              FROM gin_insured_property_unds, gin_policy_active_risks\n             WHERE     ipu_code = polar_ipu_code\n                   AND polar_pol_batch_no = v_old_batch_no\n                   AND gin_stp_claims_pkg.claim_total_loss (ipu_code) != 'Y';\n\n        v_seq                          NUMBER;\n        v_pol_seq_type                 VARCHAR2 (100);\n\n        CURSOR cur_risk (vbatch IN NUMBER)\n        IS\n            SELECT ipu_code,\n                   ipu_sec_scl_code,\n                   ipu_covt_code,\n                   ipu_pymt_install_pcts,\n                   pro_expiry_period\n              FROM gin_insured_property_unds, gin_policies, gin_products\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND pol_pro_code = pro_code\n                   AND ipu_pol_batch_no = vbatch;\n\n        CURSOR cur_rel_officer IS\n            SELECT usr_code,\n                   usr_username,\n                   usr_name,\n                   usr_email,\n                   usr_cell_phone_no\n              FROM tq_crm.tqc_users\n             WHERE usr_username =\n                   gin_parameters_pkg.get_param_varchar (\n                       'DEFAULT_UW_REL_OFFICER');\n    BEGIN\n        --raise_error('v_mar_cert_level ' || v_mar_cert_level);\n        vuser := NVL (v_user, v_agentcontact);\n\n        IF vuser IS NULL\n        THEN\n            raise_error ('User unknown...');\n        END IF;\n\n        SELECT gin_stp_code_seq.NEXTVAL INTO v_stp_code FROM DUAL;\n\n        IF v_pol_data.COUNT = 0\n        THEN\n            raise_error ('No policy data provided..');\n        END IF;\n\n        BEGIN\n            SELECT gin_parameters_pkg.get_param_varchar (\n                       'TIE_AGENT_POLICY_TO_BRANCH')\n              INTO v_tie_agent_pol_to_brn_param\n              FROM DUAL;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_tie_agent_pol_to_brn_param := 'N';\n            WHEN OTHERS\n            THEN\n                raise_error (\n                    'ERROR GETTING TIE_AGENT_POLICY_TO_BRANCH PARAM DETAILS');\n        END;",
        "gin_coinsurers_prc": "PROCEDURE gin_coinsurers_prc (v_batch_no        IN NUMBER,\n                                  v_pol_coins_tab   IN web_pol_coins_tab)\n    IS\n        CURSOR pol_cur IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_batch_no;\n\n        v_coin_perc          NUMBER;\n        v_default_serv_fee   VARCHAR2 (1);\n        v_def_serv           VARCHAR2 (1);\n        v_trans_type         VARCHAR2 (5);\n    BEGIN\n        FOR pol_rec IN pol_cur\n        LOOP\n            IF NVL (pol_rec.pol_coinsurance, 'N') = 'Y'\n            THEN\n                FOR x IN 1 .. v_pol_coins_tab.COUNT\n                LOOP                                      -- IN pol_coins LOOP\n                    BEGIN\n                        BEGIN\n                            v_default_serv_fee :=\n                                gin_parameters_pkg.get_param_varchar (\n                                    'DEFAULT_COMPUTE_SERV_FEE');\n                        EXCEPTION\n                            WHEN OTHERS\n                            THEN\n                                v_default_serv_fee := 'N';\n                        END;",
        "gin_ren_coinsurers_prc": "PROCEDURE gin_ren_coinsurers_prc (v_batch_no        IN NUMBER,\n                                      v_pol_coins_tab   IN web_pol_coins_tab)\n    IS\n        CURSOR pol_cur IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_batch_no;\n\n        v_coin_perc   NUMBER;\n    BEGIN\n        FOR pol_rec IN pol_cur\n        LOOP\n            IF NVL (pol_rec.pol_coinsurance, 'N') = 'Y'\n            THEN\n                FOR x IN 1 .. v_pol_coins_tab.COUNT\n                LOOP                                      -- IN pol_coins LOOP\n                    BEGIN\n                        INSERT INTO gin_ren_coinsurers (\n                                        coin_agnt_agent_code,\n                                        coin_agnt_sht_desc,\n                                        coin_gl_code,\n                                        coin_lead,\n                                        coin_perct,\n                                        coin_prem,\n                                        coin_alp_proposal_no,\n                                        coin_pol_policy_no,\n                                        coin_pol_ren_endos_no,\n                                        coin_pol_batch_no,\n                                        coin_fee_rate,\n                                        coin_fee_amt,\n                                        coin_prem_tax,\n                                        coin_duties,\n                                        coin_si,\n                                        coin_annual_prem,\n                                        coin_coinsurers_polno,\n                                        coin_force_sf_compute,\n                                        coin_fee_type,\n                                        coin_commission,\n                                        coin_whtx,\n                                        coin_aga_code,\n                                        coin_aga_sht_desc,\n                                        coin_comm_type,\n                                        COIN_FAC_CESSION,\n                                        COIN_FAC_PC)\n                                 VALUES (\n                                            v_pol_coins_tab (x).coin_agnt_agent_code,\n                                            v_pol_coins_tab (x).coin_agnt_sht_desc,\n                                            v_pol_coins_tab (x).coin_gl_code,\n                                            v_pol_coins_tab (x).coin_lead,\n                                            v_pol_coins_tab (x).coin_perct,\n                                            v_pol_coins_tab (x).coin_prem,\n                                            v_pol_coins_tab (x).coin_alp_proposal_no,\n                                            pol_rec.pol_policy_no,\n                                            pol_rec.pol_ren_endos_no,\n                                            v_batch_no,\n                                            v_pol_coins_tab (x).coin_fee_rate,\n                                            v_pol_coins_tab (x).coin_fee_amt,\n                                            v_pol_coins_tab (x).coin_prem_tax,\n                                            v_pol_coins_tab (x).coin_duties,\n                                            v_pol_coins_tab (x).coin_si,\n                                            v_pol_coins_tab (x).coin_annual_prem,\n                                            v_pol_coins_tab (x).coin_coinsurers_polno,\n                                            'D',\n                                            --v_pol_coins_tab (x).coin_force_sf_compute,\n                                            v_pol_coins_tab (x).coin_fee_type,\n                                            v_pol_coins_tab (x).coin_commission,\n                                            v_pol_coins_tab (x).coin_whtx,\n                                            v_pol_coins_tab (x).coin_aga_code,\n                                            v_pol_coins_tab (x).coin_aga_sht_desc,\n                                            v_pol_coins_tab (x).coin_comm_type,\n                                            v_pol_coins_tab (x).COIN_FAC_CESSION,\n                                            v_pol_coins_tab (x).COIN_FAC_PC);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            raise_error (\n                                'Error inserting coinsurance records..');\n                    END;",
        "update_pol_coinsurers": "PROCEDURE update_pol_coinsurers (\n        v_batch_no             IN NUMBER,\n        v_agent_code           IN NUMBER,\n        v_leader                  VARCHAR2,\n        v_perc                 IN NUMBER,\n        v_fee_rate             IN NUMBER,\n        v_aga_code             IN NUMBER,\n        v_policy_no            IN VARCHAR2,\n        v_force_compute        IN VARCHAR2,\n        v_coin_optional_comm   IN VARCHAR2,\n        --to take care of optional_comm either Y OR N for a coinsurer\n        v_comm_rate            IN NUMBER DEFAULT NULL,\n        --enable overridding commission at coinsurance level for inhouse agents\n        v_comm_type            IN VARCHAR2 DEFAULT 'R',\n        v_COIN_FAC_CESSION     IN VARCHAR2 DEFAULT 'N',\n        v_COIN_FAC_PC          IN NUMBER DEFAULT NULL)\n    IS\n        v_pol_leader     VARCHAR2 (1);\n        v_pol_coin_pct   NUMBER;\n        v_coin_perct     NUMBER;\n        v_cnt            NUMBER;\n        v_aga_sht_desc   VARCHAR2 (15);\n    BEGIN\n        BEGIN\n            SELECT pol_coinsure_leader, pol_coinsure_pct\n              INTO v_pol_leader, v_pol_coin_pct\n              FROM gin_policies\n             WHERE pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                    'Error determining if the policy is for a leader....');\n        END;",
        "update_ren_pol_coinsurers": "PROCEDURE update_ren_pol_coinsurers (\n        v_batch_no             IN NUMBER,\n        v_agent_code           IN NUMBER,\n        v_leader                  VARCHAR2,\n        v_perc                 IN NUMBER,\n        v_fee_rate             IN NUMBER,\n        v_policy_no            IN VARCHAR2,\n        v_pol_coin_policy_no   IN VARCHAR2 DEFAULT NULL,\n        v_force_compute        IN VARCHAR2,\n        v_comm_type            IN VARCHAR2 DEFAULT 'R',\n        v_COIN_FAC_CESSION     IN VARCHAR2 DEFAULT 'N',\n        v_COIN_FAC_PC          IN NUMBER DEFAULT NULL)\n    IS\n        v_pol_leader     VARCHAR2 (1);\n        v_pol_coin_pct   NUMBER;\n        v_coin_perct     NUMBER;\n        v_cnt            NUMBER;\n    BEGIN\n        BEGIN\n            SELECT pol_coinsure_leader, pol_coinsure_pct\n              INTO v_pol_leader, v_pol_coin_pct\n              FROM gin_ren_policies\n             WHERE pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                    'Error determining if the policy is for a leader....');\n        END;",
        "validate_coinsurers_dtls": "PROCEDURE validate_coinsurers_dtls (v_pol_batch_no IN NUMBER)\n    IS\n        v_pol_coin_share   NUMBER;\n        v_coin_perc        NUMBER;\n        v_coinsurance      VARCHAR2 (2);\n        v_pol_leader       VARCHAR2 (2);\n        v_leader_count     NUMBER;\n        v_sum              NUMBER;\n    BEGIN\n        BEGIN\n            SELECT pol_coinsurance_share,\n                   pol_coinsurance,\n                   pol_coinsure_leader\n              INTO v_pol_coin_share, v_coinsurance, v_pol_leader\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details...');\n        END;",
        "update_mandatory_sections": "PROCEDURE update_mandatory_sections (\n        v_new_ipu_code    IN NUMBER,\n        v_scl_code        IN NUMBER,\n        v_bind_code       IN NUMBER,\n        v_covt_code       IN NUMBER,\n        v_limit           IN NUMBER,\n        v_cashback_only   IN VARCHAR2 DEFAULT 'N',\n        v_module          IN VARCHAR2 DEFAULT 'P')\n    IS\n        CURSOR mandatory_sections IS\n            SELECT DISTINCT sect_code, scvts_order, scvts_calc_group\n              FROM gin_premium_rates,\n                   gin_sections,\n                   gin_subcl_sections,\n                   gin_subcl_covt_sections\n             WHERE     prr_sect_code = sect_code\n                   AND sec_sect_code = prr_sect_code\n                   AND sec_scl_code = prr_scl_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND scvts_scl_code = v_scl_code\n                   AND scvts_covt_code = v_covt_code\n                   AND sect_code = scvts_sect_code\n                   AND NVL (scvts_mandatory, 'N') = 'Y';\n\n        CURSOR cashback_sections IS\n            SELECT DISTINCT sect_code\n              FROM gin_premium_rates,\n                   gin_sections,\n                   gin_subcl_sections,\n                   gin_subcl_covt_sections\n             WHERE     prr_sect_code = sect_code\n                   AND sec_sect_code = prr_sect_code\n                   AND sec_scl_code = prr_scl_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND scvts_scl_code = v_scl_code\n                   AND scvts_covt_code = v_covt_code\n                   AND sect_code = scvts_sect_code\n                   AND NVL (sect_type, 'SI') = 'CB';\n\n        v_ipu_cashback_appl    VARCHAR2 (5) := 'N';\n        v_ipu_cashback_level   NUMBER := 0;\n        v_row                  NUMBER;\n    BEGIN\n        BEGIN\n            SELECT NVL (ipu_cashback_appl, 'N'), NVL (ipu_cashback_level, 0)\n              INTO v_ipu_cashback_appl, v_ipu_cashback_level\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_new_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                NULL;\n        END;",
        "pop_risk_sect_perils": "PROCEDURE pop_risk_sect_perils (v_ipu_code    IN NUMBER,\n                                    v_pil_code    IN NUMBER,\n                                    v_sect_code   IN NUMBER)\n    IS\n        v_bind_type   VARCHAR2 (1);\n        v_scl_code    NUMBER;\n        v_bind_code   NUMBER;\n        v_cvt_code    NUMBER;\n        v_batch_no    NUMBER;\n    BEGIN\n        BEGIN\n            SELECT ipu_sec_scl_code,\n                   ipu_bind_code,\n                   ipu_covt_code,\n                   ipu_pol_batch_no\n              INTO v_scl_code,\n                   v_bind_code,\n                   v_cvt_code,\n                   v_batch_no\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error at risk dtls selection');\n        END;",
        "pop_ren_risk_sect_perils": "PROCEDURE pop_ren_risk_sect_perils (v_ipu_code    IN NUMBER,\n                                        v_pil_code    IN NUMBER,\n                                        v_sect_code   IN NUMBER)\n    IS\n        v_bind_type   VARCHAR2 (1);\n        v_scl_code    NUMBER;\n        v_bind_code   NUMBER;\n        v_cvt_code    NUMBER;\n        v_batch_no    NUMBER;\n    BEGIN\n        BEGIN\n            SELECT ipu_sec_scl_code,\n                   ipu_bind_code,\n                   ipu_covt_code,\n                   ipu_pol_batch_no\n              INTO v_scl_code,\n                   v_bind_code,\n                   v_cvt_code,\n                   v_batch_no\n              FROM gin_ren_insured_property_unds\n             WHERE ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error at risk dtls selection');\n        END;",
        "gin_ipu_prc": "PROCEDURE gin_ipu_prc (v_batch_no          IN     NUMBER,\n                           v_trans_type        IN     VARCHAR2,\n                           v_pol_add_edit      IN     VARCHAR2,\n                           v_ipu_data          IN     web_risk_tab,\n                           v_user              IN     VARCHAR2,\n                           v_new_ipu_code         OUT NUMBER,\n                           v_renewal_area      IN     VARCHAR2,\n                           v_loaded            IN     VARCHAR2 DEFAULT 'N',\n                           v_ipu_ncd_cert_no   IN     VARCHAR2 DEFAULT NULL,\n                           v_del_sect          IN     VARCHAR2 DEFAULT NULL)\n    IS\n        v_cnt                       NUMBER;\n        v_new_polin_code            NUMBER;\n        v_uw_yr                     VARCHAR2 (1);\n        v_stp_code                  NUMBER;\n        v_wef_date                  DATE;\n        v_wet_date                  DATE;\n        v_cover_days                NUMBER;\n        v_bind_code                 NUMBER;\n        v_bind_name                 VARCHAR2 (100);\n        v_cert_no                   VARCHAR2 (35);\n        v_quz_sht_desc              VARCHAR2 (35);\n        --v_count                                NUMBER;\n        v_uw_trans                  VARCHAR2 (1);\n        v_ren_cnt                   NUMBER;\n        v_ipu_prev_status           VARCHAR2 (35);\n        v_ipu_prorata               VARCHAR2 (2);\n        v_cvt_install_type          gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs          gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts     gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods       gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_pol_tot_instlmt           NUMBER;\n        v_pymnt_tot_instlmt         NUMBER;\n        v_install_pct               NUMBER;\n        v_ipu_id                    NUMBER;\n        v_cer_cnt                   NUMBER;\n        v_ct_code                   NUMBER;\n        v_error                     VARCHAR2 (200);\n        v_cer_cnt                   NUMBER;\n        v_ipu_id                    NUMBER;\n        v_install_period            NUMBER;\n        v_polc_code                 NUMBER;\n        v_risk_pymt_install_pcts    VARCHAR2 (50);\n        v_susp_reinst_type          VARCHAR2 (5);\n        v_suspend_wef               DATE;\n        v_suspend_wet               DATE;\n        v_new_pol_wet               DATE;\n        v_rsk_trans_type            VARCHAR2 (3);\n        v_pol_instal_wet            DATE;\n        v_wef                       DATE;\n        v_prev_install_period       NUMBER;\n        v_increment_by              NUMBER;\n        v_increment                 VARCHAR2 (2);\n        v_interface_type            VARCHAR2 (50);\n        v_cnt1                      NUMBER;\n        v_risk_id_format            VARCHAR2 (50);\n        v_risk_id_format_param      VARCHAR2 (50);\n        v_id_reg_no                 VARCHAR2 (50);\n        v_clnt_pin_no               VARCHAR2 (50);\n        v_ipu_covt_code             NUMBER;\n        v_clnt_passport_no          VARCHAR2 (50);\n        v_agent_code                NUMBER;\n        v_agn_pin                   VARCHAR2 (50);\n        v_max_exposure              NUMBER;\n        v_pol_status                VARCHAR2 (10);\n        v_enforce_covt_prem         VARCHAR2 (1);\n        v_covt_code                 NUMBER;\n        v_cvt_desc                  VARCHAR2 (4000);\n        v_cert_autogen              VARCHAR2 (1);\n        v_autopopltsections_param   VARCHAR2 (1);\n        v_agnt_agent_code           NUMBER;\n        v_franch_agn_code           NUMBER;\n        v_franch_act_code           NUMBER;\n        v_loaded_cert               NUMBER;\n        v_scl_motor_verify          VARCHAR2 (1);\n        v_driver_name               VARCHAR2 (100);\n        v_auto_populate_limits      VARCHAR2 (2);\n        v_error_msg                 VARCHAR2 (200);\n        v_quake_mandatory           VARCHAR2 (1);\n        v_claim_cnt                 NUMBER;\n        \n        CURSOR pol_cur IS\n            SELECT gin_policies.*,\n                   NVL (pro_expiry_period, 'Y')     pro_expiry_period,\n                   --NVL (pro_open_cover, 'N') pro_open_cover\n                   NVL (pol_open_cover, 'N')        pro_open_cover,\n                   NVL (pro_earthquake, 'N')        pro_earthquake,\n                   NVL (pro_moto_verfy, 'N')        pro_moto_verfy,\n                   NVL (pro_stp, 'N')               pro_stp,\n                   a.agn_act_code,\n                   b.agn_act_code                   mkt\n              FROM gin_policies,\n                   gin_products,\n                   tqc_agencies  a,\n                   tqc_agencies  b\n             WHERE     pro_code = pol_pro_code\n                   AND a.agn_code(+) = pol_agnt_agent_code\n                   AND pol_mktr_agn_code = b.agn_code(+)\n                   AND pol_batch_no = v_batch_no;\n\n        CURSOR pol_ren_cur IS\n            SELECT gin_ren_policies.*,\n                   NVL (pro_expiry_period, 'Y')     pro_expiry_period,\n                   NVL (pol_open_cover, 'N')        pro_open_cover,\n                   NVL (pro_moto_verfy, 'N')        pro_moto_verfy,\n                   NVL (pro_stp, 'N')               pro_stp\n              FROM gin_ren_policies, gin_products\n             WHERE pro_code = pol_pro_code AND pol_batch_no = v_batch_no;\n\n        CURSOR comm (v_scl_code        NUMBER,\n                     v_act_code        NUMBER,\n                     v_bind_code       NUMBER,\n                     v_lta_app         VARCHAR2,\n                     v_franch_agn_cd   NUMBER)\n        IS\n            SELECT trans_code,\n                   comm_act_code,\n                   trnt_code,\n                   DECODE (\n                       DECODE (trnt_code,\n                               'LTA-U', bind_lta_type,\n                               bind_comm_type),\n                       'B', 1,\n                       2)    order_type\n              FROM gin_trans_type,\n                   gin_transaction_types,\n                   gin_commissions,\n                   gin_binders\n             WHERE     trans_code = trnt_trans_code\n                   AND comm_trnt_code = trnt_code\n                   AND comm_trans_code = trans_code\n                   AND comm_bind_code = bind_code\n                   AND trnt_code NOT IN\n                           DECODE (NVL (v_lta_app, 'N'),\n                                   'N', 'LTA-U',\n                                   'Y', 'ALL')\n                   AND comm_trnt_code IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UC-U',\n                                   comm_trnt_code)\n                   AND comm_trnt_code NOT IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UNDIFINED',\n                                   'UC-U')\n                   AND comm_trnt_code NOT IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UNDIFINED',\n                                   'LTA-U')\n                   AND comm_scl_code = v_scl_code\n                   AND comm_act_code = v_act_code\n                   AND comm_bind_code = v_bind_code\n            UNION ALL\n            SELECT trans_code,\n                   comm_act_code,\n                   trnt_code,\n                   DECODE (\n                       DECODE (trnt_code,\n                               'LTA-U', bind_lta_type,\n                               bind_comm_type),\n                       'B', 1,\n                       2)    order_type\n              FROM gin_trans_type,\n                   gin_transaction_types,\n                   gin_commissions,\n                   gin_binders\n             WHERE     trans_code = trnt_trans_code\n                   AND comm_trnt_code = trnt_code\n                   AND comm_trans_code = trans_code\n                   AND comm_bind_code = bind_code\n                   AND trnt_code IN\n                           DECODE (NVL (v_lta_app, 'N'),\n                                   'N', 'LTA-U',\n                                   'Y', 'ALL')\n                   AND comm_trnt_code NOT IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UC-U',\n                                   comm_trnt_code)\n                   AND comm_trnt_code NOT IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UNDIFINED',\n                                   'UC-U')\n                   AND comm_trnt_code NOT IN\n                           DECODE (NVL (v_franch_agn_cd, 0),\n                                   0, 'UNDIFINED',\n                                   'LTA-U')\n                   AND comm_scl_code = v_scl_code\n                   AND comm_act_code = v_act_code\n                   AND comm_bind_code = v_bind_code;\n    BEGIN\n        SELECT gin_stp_code_seq.NEXTVAL INTO v_stp_code FROM DUAL;\n\n        IF v_ipu_data.COUNT = 0\n        THEN\n            raise_error ('No Risk data provided..');\n        END IF;\n\n        BEGIN\n            SELECT param_value\n              INTO v_autopopltsections_param\n              FROM gin_parameters\n             WHERE param_name = 'AUTO_POPLT_MAND_SECTIONS';\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_autopopltsections_param := 'Y';\n            WHEN OTHERS\n            THEN\n                v_autopopltsections_param := 'Y';\n        END;",
        "update_rsk_limits": "PROCEDURE update_rsk_limits (\n        v_new_ipu_code                IN NUMBER,\n        v_scl_code                    IN NUMBER,\n        v_bind_code                   IN NUMBER,\n        v_sect_code                   IN NUMBER,\n        v_limit                       IN NUMBER,\n        v_row                         IN NUMBER,\n        v_add_edit                    IN VARCHAR2,\n        v_rsk_sect_data               IN web_sect_tab,\n        v_pil_multiplier_rate         IN NUMBER DEFAULT NULL,\n        v_pil_multiplier_div_factor   IN NUMBER DEFAULT NULL,\n        v_trans_type                  IN VARCHAR2 DEFAULT NULL)\n    IS\n    BEGIN\n        --raise_error('v_trans_type '||v_trans_type);\n        IF v_trans_type = 'RN'\n        THEN\n            IF NVL (v_add_edit, 'A') = 'E'\n            THEN\n                BEGIN\n                    -- RAISE_ERROR('SUCCESS'||v_new_ipu_code);\n                    -- RAISE_ERROR('FREE LIMIT '||v_new_ipu_code||';'||v_rsk_sect_data (1).pil_code||';'||v_rsk_sect_data (1).pil_prem_rate);\n                    UPDATE gin_ren_policy_insured_limits\n                       SET --PIL_SECT_CODE=v_sect_code, PIL_SECT_SHT_DESC=v_sect_sht_desc,\n                           pil_limit_amt = v_rsk_sect_data (1).pil_limit_amt,\n                           pil_prem_rate = v_rsk_sect_data (1).pil_prem_rate,\n                           --                PIL_SECT_TYPE=v_sect_type,\n                           --                PIL_MIN_PREMIUM=NVL(v_rsk_sect_data(1).PIL_MIN_PREMIUM,v_prr_prem_minimum_amt),\n                           --                PIL_RATE_TYPE=v_prr_rate_type,\n                           --                PIL_RATE_DESC=v_prr_rate_desc,\n                           --                PIL_RATE_DIV_FACT=NVL(v_rsk_sect_data(1).PIL_RATE_DIV_FACT,v_prr_division_factor),\n                           --                PIL_MULTIPLIER_RATE=NVL(v_rsk_sect_data(1).PIL_MULTIPLIER_RATE,v_prr_multiplier_rate),\n                           --                PIL_MULTIPLIER_DIV_FACTOR=NVL(v_rsk_sect_data(1).PIL_MULTIPLIER_DIV_FACTOR,v_prr_multplier_div_fact),\n                           pil_row_num = v_rsk_sect_data (1).pil_row_num,\n                           --                PIL_COMPUTE =NVL(v_rsk_sect_data(1).PIL_COMPUTE,'Y'),\n                           --                PIL_DESC=NVL(v_rsk_sect_data(1).PIL_DESC, v_sect_desc),\n                           --                PIL_DUAL_BASIS=NVL(v_rsk_sect_data(1).PIL_DUAL_BASIS,'N'),\n                           pil_calc_group =\n                               v_rsk_sect_data (1).pil_calc_group,\n                           pil_multiplier_rate = v_pil_multiplier_rate,\n                           pil_multiplier_div_factor =\n                               v_pil_multiplier_div_factor\n                     --                PIL_PREM_AMT = (v_rsk_sect_data(1).PIL_PREM_AMT),\n                     --                PIL_COMMENT = v_rsk_sect_data(1).PIL_COMMENT,\n                     --                PIL_DECLARATION_SECTION=NVL(v_rsk_sect_data(1).PIL_DECLARATION_SECTION,'N'),\n                     --                PIL_FREE_LIMIT_AMT=v_rsk_sect_data(1).PIL_FREE_LIMIT_AMT,\n                     --                PIL_LIMIT_PRD=v_rsk_sect_data(1).PIL_LIMIT_PRD,\n                     --                PIL_PRORATA_FULL = NVL(v_rsk_sect_data(1).PIL_PRORATA_FULL, PIL_PRORATA_FULL),\n                     --                PIL_SI_LIMIT_TYPE =NVL(v_rsk_sect_data(1).PIL_SI_LIMIT_TYPE, PIL_SI_LIMIT_TYPE),\n                     --                PIL_SI_RATE  =NVL(v_rsk_sect_data(1).PIL_SI_RATE, PIL_SI_RATE),\n                     --                PIL_COVER_TYPE =NVL(v_rsk_sect_data(1).PIL_COVER_TYPE, PIL_COVER_TYPE)\n                     WHERE     pil_ipu_code = v_new_ipu_code\n                           AND pil_code = v_rsk_sect_data (1).pil_code;\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error ('Error updating risk sections..');\n                END;",
        "gin_rsk_limits_stp": "PROCEDURE gin_rsk_limits_stp (v_new_ipu_code   IN NUMBER,\n                                  v_scl_code       IN NUMBER,\n                                  v_bind_code      IN NUMBER,\n                                  v_sect_code      IN NUMBER,\n                                  v_covt_code      IN NUMBER,\n                                  v_row            IN NUMBER,\n                                  v_group          IN NUMBER,\n                                  v_add_edit       IN VARCHAR2,\n                                  v_renewal        IN VARCHAR2,\n                                  v_ncd_level      IN NUMBER,\n                                  v_limit          IN NUMBER DEFAULT NULL,\n                                  v_module         IN VARCHAR2 DEFAULT 'P')\n    IS\n        v_rsk_sect_data            web_sect_tab;\n        sect_cursor                SYS_REFCURSOR;\n        v_sect_sht_desc            gin_sections.sect_sht_desc%TYPE;\n        v_sec_code                 gin_sections.sect_code%TYPE;\n        v_sect_desc                gin_sections.sect_desc%TYPE;\n        v_sect_type                gin_sections.sect_type%TYPE;\n        v_type_desc                VARCHAR2 (100);\n        v_prr_rate_type            gin_premium_rates.prr_rate_type%TYPE;\n        v_prr_rate                 gin_premium_rates.prr_rate%TYPE;\n        v_terr_description         VARCHAR2 (100);\n        v_prr_prem_minimum_amt     gin_premium_rates.prr_prem_minimum_amt%TYPE;\n        v_prr_multiplier_rate      gin_premium_rates.prr_multiplier_rate%TYPE;\n        v_prr_division_factor      gin_premium_rates.prr_division_factor%TYPE;\n        v_prr_multplier_div_fact   gin_premium_rates.prr_multplier_div_fact%TYPE;\n        v_prr_rate_desc            gin_premium_rates.prr_rate_desc%TYPE;\n        v_prr_free_limit           gin_premium_rates.prr_free_limit%TYPE;\n        v_sec_declaration          gin_subcl_sections.sec_declaration%TYPE;\n        v_scvts_order              gin_subcl_covt_sections.scvts_order%TYPE;\n        v_prr_prorated_full        gin_premium_rates.prr_prorated_full%TYPE;\n        v_prr_si_limit_type        gin_premium_rates.prr_si_limit_type%TYPE;\n        v_prr_si_rate              gin_premium_rates.prr_si_rate%TYPE;\n        v_scvts_calc_group         gin_subcl_covt_sections.scvts_calc_group%TYPE;\n    BEGIN\n        --   RAISE_ERROR(v_scl_code||';;v_sect_code'||v_sect_code||'v_covt_code'||v_covt_code||'v_bind_code'||v_bind_code||'v_new_ipu_code'||v_new_ipu_code);\n        sect_cursor :=\n            gis_web_pkg.get_sections (v_scl_code,\n                                      v_covt_code,\n                                      v_bind_code,\n                                      v_sect_code,\n                                      v_new_ipu_code,\n                                      v_ncd_level);\n\n        LOOP\n            EXIT WHEN sect_cursor%NOTFOUND;\n\n            FETCH sect_cursor\n                INTO v_sect_sht_desc,\n                     v_sec_code,\n                     v_sect_desc,\n                     v_sect_type,\n                     v_type_desc,\n                     v_prr_rate_type,\n                     v_prr_rate,\n                     v_terr_description,\n                     v_prr_prem_minimum_amt,\n                     v_prr_multiplier_rate,\n                     v_prr_division_factor,\n                     v_prr_multplier_div_fact,\n                     v_prr_rate_desc,\n                     v_prr_free_limit,\n                     v_sec_declaration,\n                     v_scvts_order,\n                     v_prr_prorated_full,\n                     v_prr_si_limit_type,\n                     v_prr_si_rate,\n                     v_scvts_calc_group;\n\n            --RAISE_ERROR('v_sect_sht_desc ==== '||v_sect_sht_desc);\n            v_rsk_sect_data := web_sect_tab ();\n            v_rsk_sect_data.EXTEND (1);\n            v_rsk_sect_data (1) :=\n                web_sect_rec (NULL,\n                              v_new_ipu_code,\n                              v_sect_code,\n                              v_sect_sht_desc,\n                              v_scvts_calc_group,\n                              v_limit,                                 --NULL,\n                              v_prr_rate,\n                              NULL,\n                              v_prr_rate_type,\n                              v_sect_type,\n                              v_prr_prem_minimum_amt,\n                              NULL,\n                              v_prr_multiplier_rate,\n                              v_prr_multplier_div_fact,\n                              NULL,\n                              v_prr_division_factor,\n                              'Y',\n                              'N',\n                              0,\n                              v_sec_declaration,\n                              v_prr_free_limit,\n                              NULL,\n                              NULL,\n                              v_prr_prorated_full,\n                              NULL,\n                              v_sect_desc,\n                              v_prr_si_limit_type,\n                              v_prr_si_rate,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              NULL,\n                              'N',\n                              'A',\n                              NULL,\n                              NULL,\n                              NULL);\n        --RAISE_ERROR(v_rsk_sect_data.COUNT);\n        END LOOP;\n\n        IF NVL (v_module, 'P') = 'P'\n        THEN\n            IF v_renewal = 'RN'\n            THEN\n                gin_ren_rsk_limits (v_new_ipu_code,\n                                    v_scl_code,\n                                    v_bind_code,\n                                    v_sect_code,\n                                    NULL,\n                                    v_row,\n                                    'A',\n                                    v_rsk_sect_data);\n            ELSE\n                gin_rsk_limits (v_new_ipu_code,\n                                v_scl_code,\n                                v_bind_code,\n                                v_sect_code,\n                                NULL,\n                                v_row,\n                                'A',\n                                v_rsk_sect_data);\n            END IF;\n        ELSE\n            gin_quote_rsk_limits (v_new_ipu_code,\n                                  v_scl_code,\n                                  v_bind_code,\n                                  v_sect_code,\n                                  NULL,\n                                  v_row,\n                                  'A',\n                                  v_rsk_sect_data);\n        END IF;\n    END;",
        "gin_rsk_limits": "PROCEDURE gin_rsk_limits (v_new_ipu_code    IN NUMBER,\n                              v_scl_code        IN NUMBER,\n                              v_bind_code       IN NUMBER,\n                              v_sect_code       IN NUMBER,\n                              v_limit           IN NUMBER,\n                              v_row             IN NUMBER,\n                              v_add_edit        IN VARCHAR2,\n                              v_rsk_sect_data   IN web_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n        v_cnt                      NUMBER;\n        v_cover_days               NUMBER;\n        v_prrd_max_rate            NUMBER;\n        v_prrd_min_rate            NUMBER;\n        v_age                      NUMBER;\n        v_cur_code                 NUMBER;\n        v_rsk_travel_sect_data     gin_travel_stp_pkg.rsk_sect_tab;\n        v_batch_no                 NUMBER;\n        v_count                    NUMBER := 0;\n        v_dec_section              VARCHAR2 (5);\n        v_calc_group               NUMBER := 1;\n        v_calc_row                 NUMBER := 1;\n\n        CURSOR pil_cur (vsectcode       IN NUMBER,\n                        vbindcode       IN NUMBER,\n                        vsclcode        IN NUMBER,\n                        vrange          IN NUMBER,\n                        vfreg           IN VARCHAR2,\n                        v_cashbck_lvl   IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type IN ('FXD', 'RT')\n                           AND prr_type = 'N'\n                           AND NVL (prr_rate_freq_type, 'A') = vfreg\n                           AND NVL (vrange, 0) BETWEEN NVL (prr_range_from,\n                                                            0)\n                                                   AND NVL (prr_range_to, 0)\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_type = 'N'\n                           AND prr_scl_code = vsclcode\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND sect_type = 'ND'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'CB', 'CASHBACK')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND NVL (prr_cashback_level, 0) = v_cashbck_lvl\n                           AND NVL (prr_cashback_appl, 'N') = 'Y'\n                           AND sect_type = 'CB');\n\n        v_freq                     VARCHAR2 (2);\n        v_range                    NUMBER;\n        v_alb_required             VARCHAR2 (2);\n        v_pol_status               VARCHAR2 (10);\n        v_cashback_lvl             NUMBER;\n        v_pil_code                 NUMBER;\n    BEGIN\n        BEGIN\n            SELECT DECODE (scl_alb_required,\n                           'Y', NVL (pol_freq_of_payment, 'A'),\n                           'A'),\n                   DECODE (\n                       scl_alb_required,\n                       'Y', gin_travel_stp_pkg.get_alb (TRUNC (SYSDATE),\n                                                        clnt_dob),\n                       DECODE (NVL (scl_use_cover_period_range, 'N'),\n                               'Y', (ipu_wet - ipu_wef),\n                               0)),\n                   scl_alb_required,\n                   pol_policy_status,\n                   DECODE (NVL (ipu_cashback_appl, 'N'),\n                           'Y', NVL (ipu_cashback_level, 0),\n                           0)\n              INTO v_freq,\n                   v_range,\n                   v_alb_required,\n                   v_pol_status,\n                   v_cashback_lvl\n              FROM gin_policies,\n                   gin_insured_property_unds,\n                   gin_sub_classes,\n                   tqc_clients\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND clnt_code = ipu_prp_code\n                   AND ipu_sec_scl_code = scl_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_freq := 'A';\n            WHEN OTHERS\n            THEN\n                v_freq := 'A'; --RAISE_ERROR('Error fetching policy freq....');\n        END;",
        "gin_ren_rsk_limits": "PROCEDURE gin_ren_rsk_limits (v_new_ipu_code    IN NUMBER,\n                                  v_scl_code        IN NUMBER,\n                                  v_bind_code       IN NUMBER,\n                                  v_sect_code       IN NUMBER,\n                                  v_limit           IN NUMBER,\n                                  v_row             IN NUMBER,\n                                  v_add_edit        IN VARCHAR2,\n                                  v_rsk_sect_data   IN web_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n\n        --       v_calc_group  NUMBER:=1;\n        --      v_calc_row  NUMBER:=1;\n\n        CURSOR pil_cur (vsectcode   IN NUMBER,\n                        vbindcode   IN NUMBER,\n                        vsclcode    IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc                      sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')    type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate                       rate,\n                           '0'                            terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'FXD'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type != 'ND'\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type = 'ND');\n    BEGIN\n        BEGIN\n            OPEN pil_cur (v_sect_code, v_bind_code, v_scl_code);\n\n            LOOP\n                EXIT WHEN pil_cur%NOTFOUND;\n\n                FETCH pil_cur\n                    INTO v_sect_sht_desc,\n                         v_sect_desc,\n                         v_sect_type,\n                         v_type_desc,\n                         v_prr_rate_type,\n                         v_prr_rate,\n                         v_terr_description,\n                         v_prr_prem_minimum_amt,\n                         v_prr_multiplier_rate,\n                         v_prr_division_factor,\n                         v_prr_multplier_div_fact,\n                         v_prr_rate_desc;\n            END LOOP;\n\n            CLOSE pil_cur;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                       'Error getting the premium rates for 1st section..'\n                    || v_sect_code\n                    || '-'\n                    || v_bind_code\n                    || '-'\n                    || v_scl_code);\n        END;",
        "import_data": "PROCEDURE import_data (v_brn_code        IN     NUMBER,\n                           v_brn_sht_desc    IN     VARCHAR2,\n                           v_fxd_exch_rate   IN     VARCHAR2,\n                           v_psd_code        IN     NUMBER DEFAULT NULL,\n                           v_tot_rec            OUT NUMBER,\n                           v_success            OUT NUMBER)\n    IS\n        v_cnt             NUMBER;\n        v_prp_code        NUMBER;\n        v_sect_code       NUMBER;\n        v_sect_desc       VARCHAR2 (35);\n        v_pol_tab         gin_stp_pkg.policy_tab;\n        v_rsk_tab         gin_stp_pkg.risk_tab;\n        v_cur_code        NUMBER;\n        v_cur_symbol      VARCHAR2 (35);\n        v_agent_code      NUMBER;\n        v_agnt_sht_desc   VARCHAR2 (35);\n        v_errmsg          VARCHAR2 (400);\n        v_pol_batch_no    NUMBER;\n\n        --v_user        VARCHAR2(35):=Pkg_Global_Vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        CURSOR cur_recs IS\n            SELECT *\n              FROM gin_pol_stp_data\n             WHERE     NVL (psd_transfered, 'N') != 'Y'\n                   AND psd_code =\n                       DECODE (NVL (v_psd_code, 0),\n                               0, psd_code,\n                               NVL (v_psd_code, 0));\n    --CURSOR cur_clnts(vpsd_agnt_client_id IN NUMBER) IS SELECT * FROM GIN_POL_STP_CLNT_DATA WHERE PSC_AGNT_CLNT_ID = vpsd_agnt_client_id;\n    BEGIN\n        v_tot_rec := 0;\n        v_success := 0;\n\n        FOR crecs IN cur_recs\n        LOOP\n            v_tot_rec := NVL (v_tot_rec, 0) + 1;\n\n            BEGIN\n                BEGIN\n                    SELECT COUNT (1)\n                      INTO v_cnt\n                      FROM gin_pol_stp_clnt_data\n                     WHERE psc_agnt_clnt_id = crecs.psd_agnt_client_id;\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        v_errmsg :=\n                            'Error retrieving insured details..' || SQLERRM;\n                        raise_application_error (-20001, v_errmsg);\n                END;",
        "del_ren_risk_details": "PROCEDURE del_ren_risk_details (v_pol_batch_no   IN     NUMBER,\n                                    v_ipu_code       IN     NUMBER,\n                                    v_pro_code              NUMBER,\n                                    v_error             OUT VARCHAR2)\n    IS\n        v_successful   NUMBER;\n    BEGIN\n        --RAISE_ERROR('v_pol_batch_no '||v_pol_batch_no);\n        --v_err_pos := 'Specific Details';\n        v_error := 'Error deleting schedule details';\n\n        BEGIN\n            del_spec_details (v_pro_code, v_ipu_code);\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                RETURN;\n        END;",
        "del_ren_pol_proc": "PROCEDURE del_ren_pol_proc (v_pol_batch_no IN NUMBER)\n    IS\n        CURSOR all_pols IS\n            SELECT pol_batch_no\n              FROM gin_ren_policies\n             WHERE pol_policy_no = (SELECT pol_policy_no\n                                      FROM gin_ren_policies\n                                     WHERE pol_batch_no = v_pol_batch_no);\n\n        CURSOR all_risks_cur (vpolbatch_no IN NUMBER)\n        IS\n            SELECT ipu_code, pol_pro_code\n              FROM gin_ren_insured_property_unds, gin_ren_policies\n             WHERE     ipu_pol_batch_no = pol_batch_no\n                   AND ipu_pol_batch_no = vpolbatch_no;\n\n        v_err_msg   VARCHAR2 (200);\n    BEGIN\n        FOR p IN all_pols\n        LOOP\n            FOR all_risks_rec IN all_risks_cur (p.pol_batch_no)\n            LOOP\n                del_ren_risk_details (v_pol_batch_no,\n                                      all_risks_rec.ipu_code,\n                                      all_risks_rec.pol_pro_code,\n                                      v_err_msg);\n            END LOOP;\n\n            -- Delete The Policy Details\n            DELETE FROM gin_ren_policy_diary\n                  WHERE pd_pol_batch_no = p.pol_batch_no;\n\n            DELETE FROM gin_ren_policy_lvl_clauses\n                  WHERE plcl_pol_batch_no = p.pol_batch_no;\n\n            DELETE FROM gin_ren_policy_taxes\n                  WHERE ptx_pol_batch_no = p.pol_batch_no;\n\n            DELETE FROM gin_ren_coinsurers\n                  WHERE coin_pol_batch_no = p.pol_batch_no;\n\n            DELETE FROM gin_ren_policy_insureds\n                  WHERE polin_pol_batch_no = p.pol_batch_no;\n\n            DELETE FROM gin_renwl_sbudtls\n                  WHERE pdl_pol_batch_no = p.pol_batch_no;\n\n            --Delete the Policy\n            DELETE FROM gin_ren_policies\n                  WHERE pol_batch_no = p.pol_batch_no;\n        -- gis_utilities.close_tickets ('P', p.pol_batch_no);\n        END LOOP;\n    END;",
        "del_risk_details": "PROCEDURE del_risk_details (v_pol_batch_no   IN     NUMBER,\n                                v_ipu_code       IN     NUMBER,\n                                v_pro_code              NUMBER,\n                                v_error             OUT VARCHAR2)\n    IS\n        --v_successful NUMBER;\n        --v_authorised VARCHAR2(2);\n        v_auths           VARCHAR2 (2);\n        v_err_pos         VARCHAR2 (75);\n        v_errmsg          VARCHAR2 (600);\n        v_cert_ipu_code   NUMBER;\n        v_cnt             NUMBER;\n        v_polin_code      NUMBER;\n        v_property_id     VARCHAR2 (100);\n        v_claim_cnt       NUMBER;\n    BEGIN\n        BEGIN\n            SELECT pol_authosrised, ipu_polin_code, ipu_property_id\n              INTO v_auths, v_polin_code, v_property_id\n              FROM gin_policies, gin_insured_property_unds\n             WHERE     ipu_pol_batch_no = pol_batch_no\n                   AND pol_batch_no = v_pol_batch_no\n                   AND ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_error := 'THE TRANSACTION COULD NOT BE FOUND.....';\n                RETURN;\n        /*raise_application_error\n                              (-20001,\n                               'THE TRANSACTION COULD NOT BE FOUND.....'\n                              );*/\n        END;",
        "del_pol_dtls_proc": "PROCEDURE del_pol_dtls_proc (v_pol_batch_no IN NUMBER)\n    IS\n        --v_successful NUMBER;\n        v_status      VARCHAR2 (10);\n        v_auths       VARCHAR2 (2);\n        v_err_pos     VARCHAR2 (75);\n        v_errmsg      VARCHAR2 (600);\n        v_error_msg   VARCHAR2 (600);\n\n        --v_cert_ipu_code NUMBER;\n        --v_cnt NUMBER;\n        CURSOR all_risks_cur IS\n            SELECT ipu_code,\n                   pol_pro_code,\n                   ipu_id,\n                   ipu_property_id\n              FROM gin_insured_property_unds, gin_policies\n             WHERE     ipu_pol_batch_no = pol_batch_no\n                   AND ipu_pol_batch_no = v_pol_batch_no;\n    BEGIN\n        BEGIN\n            SELECT pol_authosrised, pol_policy_status\n              INTO v_auths, v_status\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_application_error (\n                    -20001,\n                    'THE TRANSACTION COULD NOT FOUND.....');\n        END;",
        "populate_renewals": "PROCEDURE populate_renewals (v_trans_id IN NUMBER, v_user VARCHAR2)\n    IS\n        v_pol_wet_date                 DATE;\n        v_ren_polin_code               NUMBER;\n        v_pol_wef                      DATE;\n        --v_ren_param VARCHAR2(5);\n        v_new_ipu_code                 NUMBER;\n        --v_del_err NUMBER;\n        v_ren_date                     DATE;\n        v_cnt                          NUMBER;\n        v_msg                          VARCHAR2 (200);\n        v_ncd_status                   NUMBER := 0;\n        v_ncd_level                    NUMBER := 0;\n        v_max_ncd_level                NUMBER := 0;\n        v_prr_rate                     NUMBER := 0;\n        v_prr_multiplier_rate          NUMBER := 0;\n        v_prr_division_factor          NUMBER := 0;\n        v_prr_multplier_div_fact       NUMBER := 0;\n        v_sect_desc                    VARCHAR2 (30);\n        v_ncd_rate                     NUMBER := 0;\n        v_process_ncd                  VARCHAR (1);\n        v_old_risk                     VARCHAR (1);\n        v_ncd_created                  BOOLEAN := TRUE;\n        v_sect_type                    VARCHAR2 (10);\n        v_sect_sht_desc                VARCHAR2 (30);\n        v_check_max                    BOOLEAN := FALSE;\n        v_new_sect_code                NUMBER;\n        v_cnt_ncd                      NUMBER := 0;\n        v_new_rate                     VARCHAR2 (1);\n        v_count                        NUMBER;\n        v_load_sect_code               VARCHAR2 (30);\n        v_decload_created              BOOLEAN := TRUE;\n        v_new_prr_rate_desc            VARCHAR2 (30);\n        v_new_prr_rate_type            VARCHAR2 (30);\n        v_new_prr_rate                 NUMBER;\n        v_new_prr_multiplier_rate      NUMBER;\n        v_new_prr_division_factor      NUMBER;\n        v_new_prr_multplier_div_fact   NUMBER;\n        v_new_sect_type                VARCHAR2 (30);\n        v_new_sect_desc                VARCHAR2 (30);\n        v_serial                       VARCHAR2 (30);\n        v_tran_ref_no                  VARCHAR2 (30);\n        next_ggts_trans_no             NUMBER;\n        v_pdl_code                     NUMBER;\n        v_clms_cnt                     NUMBER;\n        v_risk_cnt                     NUMBER;\n        -- v_ncd_status                   NUMBER         := 0;\n        v_cashback_level               NUMBER := 0;\n        v_max_cashback_level           NUMBER := 0;\n        v_renewal_param                VARCHAR2 (1) := 'N';\n\n        v_prr_prem_minimum_amt         gin_premium_rates.prr_prem_minimum_amt%TYPE;\n        v_prr_rate_desc                gin_premium_rates.prr_rate_desc%TYPE;\n        v_prr_free_limit               gin_premium_rates.prr_free_limit%TYPE;\n        v_sec_declaration              gin_subcl_sections.sec_declaration%TYPE;\n        v_scvts_order                  gin_subcl_covt_sections.scvts_order%TYPE;\n        v_prr_prorated_full            gin_premium_rates.prr_prorated_full%TYPE;\n        v_prr_si_limit_type            gin_premium_rates.prr_si_limit_type%TYPE;\n        v_prr_si_rate                  gin_premium_rates.prr_si_rate%TYPE;\n        v_sc_range                     NUMBER;\n        v_scvts_order1                 NUMBER;\n        v_scvts_calc_group             NUMBER;\n        sect_cursor                    SYS_REFCURSOR;\n        v_motor_prd                    VARCHAR2 (1);\n        v_sec_code                     gin_sections.sect_code%TYPE;\n        -- v_sect_type                gin_sections.sect_type%TYPE;\n        v_type_desc                    VARCHAR2 (25);\n        v_prr_rate_type                gin_premium_rates.prr_rate_type%TYPE;\n        --v_prr_rate                 gin_premium_rates.prr_rate%TYPE;\n        v_terr_description             VARCHAR2 (5);\n        v_butcharge_fap                VARCHAR2 (5);\n\n        CURSOR cur_taxes (v_batch NUMBER, vprocode NUMBER)\n        IS\n            SELECT ptx_trac_scl_code,\n                   ptx_trac_trnt_code,\n                   ptx_pol_policy_no,\n                   ptx_pol_ren_endos_no,\n                   ptx_pol_batch_no,\n                   ptx_rate,\n                   ptx_amount,\n                   ptx_tl_lvl_code,\n                   ptx_rate_type,\n                   ptx_rate_desc,\n                   ptx_endos_diff_amt,\n                   ptx_tax_type,\n                   ptx_coin_other_client_chrgs,\n                   ptx_override,\n                   ptx_override_amt\n              FROM gin_policy_taxes, gin_transaction_types\n             WHERE     ptx_trac_trnt_code = trnt_code\n                   AND ptx_pol_batch_no = v_batch\n                   AND NVL (trnt_apply_rn, 'Y') = 'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = vprocode);\n\n        CURSOR renewals IS\n            SELECT *\n              FROM gin_web_renewals, gin_policies\n             WHERE     webr_pol_batch_no = pol_batch_no\n                   AND webr_trans_id = v_trans_id;\n\n        CURSOR cur_coinsurer (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_coinsurers\n             WHERE coin_pol_batch_no = v_batch;\n\n        CURSOR cur_facre_dtls (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_facre_in_dtls\n             WHERE fid_pol_batch_no = v_batch;\n\n        CURSOR cur_conditions (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_batch;\n\n        CURSOR cur_subclass_conditions (v_btch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_subclass_clauses\n             WHERE poscl_pol_batch_no = v_btch;\n\n        CURSOR cur_schedule_values (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_schedule_values\n             WHERE schpv_pol_batch_no = v_batch;\n\n        CURSOR cur_pol_perils (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_section_perils\n             WHERE pspr_pol_batch_no = v_batch;\n\n        CURSOR cur_insureds (v_batch NUMBER)\n        IS\n            SELECT DISTINCT polin_prp_code\n              FROM gin_policy_insureds\n             WHERE EXISTS\n                       (SELECT ipu_polin_code\n                          FROM gin_insured_property_unds\n                         WHERE     ipu_polin_code = polin_code\n                               AND EXISTS\n                                       (SELECT polar_ipu_code\n                                          FROM gin_policy_active_risks\n                                         WHERE     polar_ipu_code = ipu_code\n                                               AND polar_pol_batch_no =\n                                                   v_batch));\n\n        CURSOR cur_ipu (v_batch      NUMBER,\n                        vv_pol_wet   DATE,\n                        v_prp_code   NUMBER,\n                        v_loaded     VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_insured_property_unds,\n                   gin_policy_insureds,\n                   gin_sub_classes\n             WHERE     ipu_code IN (SELECT polar_ipu_code\n                                      FROM gin_policy_active_risks\n                                     WHERE polar_pol_batch_no = v_batch)\n                   --AND ipu_eff_wet = vv_pol_wet\n                   AND ipu_eff_wet =\n                       DECODE (v_loaded, 'N', vv_pol_wet, ipu_eff_wet)\n                   AND polin_code = ipu_polin_code\n                   AND polin_prp_code = v_prp_code\n                   AND NVL (ipu_endos_remove, 'N') = 'N'\n                   AND gin_stp_claims_pkg.claim_total_loss (ipu_id) != 'Y'\n                   AND ipu_sec_scl_code = scl_code;\n\n        CURSOR cur_limits (v_ipu NUMBER)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code;\n\n        CURSOR new_cur_limits (v_new_ipu_code   NUMBER,\n                               v_scl_code       NUMBER,\n                               v_bind_code      NUMBER,\n                               v_cvt_code       NUMBER,\n                               v_sect_code      NUMBER)\n        IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc || ' ' || prr_ncd_level\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD ' || prr_ncd_level,\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = v_sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND prr_ncd_level = 0\n                   AND sect_type = 'ND'\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_ren_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n\n        CURSOR cur_clauses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR perils (v_ipu NUMBER)\n        IS\n            SELECT gpsp_per_code,\n                   gpsp_per_sht_desc,\n                   gpsp_sec_sect_code,\n                   gpsp_sect_sht_desc,\n                   gpsp_sec_scl_code,\n                   gpsp_ipp_code,\n                   gpsp_ipu_code,\n                   gpsp_limit_amt,\n                   gpsp_excess_amt\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR risk_excesses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_excess\n             WHERE re_ipu_code = v_ipu;\n\n        CURSOR schedules (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_schedules\n             WHERE polrs_ipu_code = v_ipu;\n\n        CURSOR cur_pol_dtls (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_sbu_dtls\n             WHERE pdl_pol_batch_no = v_batch;\n\n        CURSOR risk_services (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_services\n             WHERE prs_ipu_code = v_ipu;\n    /*CURSOR cur_superintendent\n        IS SELECT *\n          FROM GIN_POL_SUPERINTENDENT\n          WHERE PSURT_POL_BATCH_NO=v_batch;*/\n    /*CURSOR cur_ncd_sec(v_scl_code NUMBER,v_bind_code NUMBER, v_level NUMBER)\n                        IS SELECT DISTINCT PRR_RATE,\n                        PRR_MULTIPLIER_RATE,PRR_DIVISION_FACTOR,\n                        PRR_MULTPLIER_DIV_FACT\n                        FROM GIN_PREMIUM_RATES,GIN_SECTIONS\n                        WHERE  PRR_SECT_CODE = SECT_CODE\n                        AND PRR_SCL_CODE = v_scl_code\n                        AND PRR_BIND_CODE = v_bind_code\n                        AND SECT_TYPE ='ND'\n                        AND PRR_NCD_LEVEL =v_level;*/\n    BEGIN\n        --       raise_error ('User not defined.');\n        IF v_user IS NULL\n        THEN\n            raise_error ('User not defined.');\n        END IF;\n\n        BEGIN\n            v_renewal_param :=\n                GIN_PARAMETERS_PKG.GET_PARAM_VARCHAR (\n                    'RENEWAL_BASED_ON_SETUP');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_renewal_param := 'N';\n        END;",
        "populate_renewals250814": "PROCEDURE populate_renewals250814 (v_trans_id IN NUMBER, v_user VARCHAR2)\n    IS\n        v_pol_wet_date                 DATE;\n        v_ren_polin_code               NUMBER;\n        v_pol_wef                      DATE;\n        --v_ren_param VARCHAR2(5);\n        v_new_ipu_code                 NUMBER;\n        --v_del_err NUMBER;\n        v_ren_date                     DATE;\n        v_cnt                          NUMBER;\n        v_msg                          VARCHAR2 (200);\n        v_ncd_status                   NUMBER := 0;\n        v_ncd_level                    NUMBER := 0;\n        v_max_ncd_level                NUMBER := 0;\n        v_prr_rate                     NUMBER := 0;\n        v_prr_multiplier_rate          NUMBER := 0;\n        v_prr_division_factor          NUMBER := 0;\n        v_prr_multplier_div_fact       NUMBER := 0;\n        v_sect_desc                    VARCHAR2 (30);\n        v_ncd_rate                     NUMBER := 0;\n        v_process_ncd                  VARCHAR (1);\n        v_old_risk                     VARCHAR (1);\n        v_ncd_created                  BOOLEAN := TRUE;\n        v_sect_type                    VARCHAR2 (10);\n        v_sect_sht_desc                VARCHAR2 (30);\n        v_check_max                    BOOLEAN := FALSE;\n        v_new_sect_code                NUMBER;\n        v_cnt_ncd                      NUMBER := 0;\n        v_new_rate                     VARCHAR2 (1);\n        v_count                        NUMBER;\n        v_load_sect_code               VARCHAR2 (30);\n        v_decload_created              BOOLEAN := TRUE;\n        v_new_prr_rate_desc            VARCHAR2 (30);\n        v_new_prr_rate_type            VARCHAR2 (30);\n        v_new_prr_rate                 NUMBER;\n        v_new_prr_multiplier_rate      NUMBER;\n        v_new_prr_division_factor      NUMBER;\n        v_new_prr_multplier_div_fact   NUMBER;\n        v_new_sect_type                VARCHAR2 (30);\n        v_new_sect_desc                VARCHAR2 (30);\n\n        CURSOR cur_taxes (v_batch NUMBER, vprocode NUMBER)\n        IS\n            SELECT ptx_trac_scl_code,\n                   ptx_trac_trnt_code,\n                   ptx_pol_policy_no,\n                   ptx_pol_ren_endos_no,\n                   ptx_pol_batch_no,\n                   ptx_rate,\n                   ptx_amount,\n                   ptx_tl_lvl_code,\n                   ptx_rate_type,\n                   ptx_rate_desc,\n                   ptx_endos_diff_amt,\n                   ptx_tax_type\n              FROM gin_policy_taxes, gin_transaction_types\n             WHERE     ptx_trac_trnt_code = trnt_code\n                   AND ptx_pol_batch_no = v_batch\n                   AND NVL (trnt_apply_rn, 'Y') = 'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = vprocode);\n\n        CURSOR renewals IS\n            SELECT *\n              FROM gin_web_renewals, gin_policies\n             WHERE     webr_pol_batch_no = pol_batch_no\n                   AND webr_trans_id = v_trans_id;\n\n        CURSOR cur_coinsurer (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_coinsurers\n             WHERE coin_pol_batch_no = v_batch;\n\n        CURSOR cur_facre_dtls (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_facre_in_dtls\n             WHERE fid_pol_batch_no = v_batch;\n\n        CURSOR cur_conditions (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_batch;\n\n        CURSOR cur_schedule_values (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_schedule_values\n             WHERE schpv_pol_batch_no = v_batch;\n\n        CURSOR cur_pol_perils (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_section_perils\n             WHERE pspr_pol_batch_no = v_batch;\n\n        CURSOR cur_insureds (v_batch NUMBER)\n        IS\n            SELECT DISTINCT polin_prp_code\n              FROM gin_policy_insureds\n             WHERE EXISTS\n                       (SELECT ipu_polin_code\n                          FROM gin_insured_property_unds\n                         WHERE     ipu_polin_code = polin_code\n                               AND EXISTS\n                                       (SELECT polar_ipu_code\n                                          FROM gin_policy_active_risks\n                                         WHERE     polar_ipu_code = ipu_code\n                                               AND polar_pol_batch_no =\n                                                   v_batch));\n\n        CURSOR cur_ipu (v_batch      NUMBER,\n                        vv_pol_wet   DATE,\n                        v_prp_code   NUMBER,\n                        v_loaded     VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_insured_property_unds,\n                   gin_policy_insureds,\n                   gin_sub_classes\n             WHERE     ipu_code IN (SELECT polar_ipu_code\n                                      FROM gin_policy_active_risks\n                                     WHERE polar_pol_batch_no = v_batch)\n                   --AND ipu_eff_wet = vv_pol_wet\n                   AND ipu_eff_wet =\n                       DECODE (v_loaded, 'N', vv_pol_wet, ipu_eff_wet)\n                   AND polin_code = ipu_polin_code\n                   AND polin_prp_code = v_prp_code\n                   AND NVL (ipu_endos_remove, 'N') = 'N'\n                   AND gin_stp_claims_pkg.claim_total_loss (ipu_id) != 'Y'\n                   AND ipu_sec_scl_code = scl_code;\n\n        CURSOR cur_limits (v_ipu NUMBER)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code;\n\n        CURSOR new_cur_limits (v_new_ipu_code   NUMBER,\n                               v_scl_code       NUMBER,\n                               v_bind_code      NUMBER,\n                               v_cvt_code       NUMBER,\n                               v_sect_code      NUMBER)\n        IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc || ' ' || prr_ncd_level\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD ' || prr_ncd_level,\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = v_sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND prr_ncd_level = 0\n                   AND sect_type = 'ND'\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_ren_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n\n        CURSOR cur_clauses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR perils (v_ipu NUMBER)\n        IS\n            SELECT gpsp_per_code,\n                   gpsp_per_sht_desc,\n                   gpsp_sec_sect_code,\n                   gpsp_sect_sht_desc,\n                   gpsp_sec_scl_code,\n                   gpsp_ipp_code,\n                   gpsp_ipu_code,\n                   gpsp_limit_amt,\n                   gpsp_excess_amt\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR risk_excesses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_excess\n             WHERE re_ipu_code = v_ipu;\n\n        CURSOR schedules (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_schedules\n             WHERE polrs_ipu_code = v_ipu;\n    /*CURSOR cur_superintendent\n        IS SELECT *\n          FROM GIN_POL_SUPERINTENDENT\n          WHERE PSURT_POL_BATCH_NO=v_batch;*/\n    /*CURSOR cur_ncd_sec(v_scl_code NUMBER,v_bind_code NUMBER, v_level NUMBER)\n                        IS SELECT DISTINCT PRR_RATE,\n                        PRR_MULTIPLIER_RATE,PRR_DIVISION_FACTOR,\n                        PRR_MULTPLIER_DIV_FACT\n                        FROM GIN_PREMIUM_RATES,GIN_SECTIONS\n                        WHERE  PRR_SECT_CODE = SECT_CODE\n                        AND PRR_SCL_CODE = v_scl_code\n                        AND PRR_BIND_CODE = v_bind_code\n                        AND SECT_TYPE ='ND'\n                        AND PRR_NCD_LEVEL =v_level;*/\n    BEGIN\n        -- raise_error ('User not defined.');\n        IF v_user IS NULL\n        THEN\n            raise_error ('User not defined.');\n        END IF;\n\n        FOR pr IN renewals\n        LOOP\n            BEGIN\n                del_ren_pol_proc (pr.pol_batch_no);\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    ROLLBACK;\n                    raise_error (\n                        'Unable to execute procedure DEL_ALL_REN_POL_PROC ...');\n            END;",
        "populate_endos_details": "PROCEDURE populate_endos_details (\n        v_pol_no             IN     VARCHAR2,\n        v_old_pol_batch_no   IN     NUMBER,\n        v_trans_type         IN     VARCHAR2,\n        v_trans_eff_date     IN     DATE,\n        v_extend_to_date     IN     DATE,\n        v_rsks_tab           IN     risk_tab,\n        v_agentcontact       IN     VARCHAR2,\n        v_endrsd_rsks_tab       OUT endrsd_rsks_tab,\n        v_new_batch_no          OUT NUMBER,\n        v_end_no                OUT VARCHAR2,\n        v_past_period        IN     VARCHAR2,\n        v_end_comm_allowed   IN     VARCHAR2,\n        v_cancelled_by       IN     VARCHAR2,\n        v_endors_status      IN     VARCHAR2,\n        v_regional_endors    IN     VARCHAR2)\n    IS\n        --ncd_final_val   NUMBER(5) := 0;\n        --v_prp_code    NUMBER ;\n        cnt                      NUMBER := 0;\n        --cnt2 NUMBER :=0;\n        v_ipu_wet                DATE;\n        v_ipu_wef                DATE;\n        v_ipu_eff_wef            DATE;\n        v_dup_rec                EXCEPTION;\n        v_user                   VARCHAR2 (35)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_new_ipu_code           NUMBER;\n        v_risk_uw_yr             NUMBER (4);\n        v_pil_prem_amt           NUMBER := 0;\n        v_compute                VARCHAR2 (1) := 'Y';\n        v_ipu_prev_prem          NUMBER := 0;\n        v_pil_prev_limit         NUMBER := 0;\n        v_pil_code               NUMBER (20);\n        v_ipu_prev_ri_amt        NUMBER;\n        v_session_id             NUMBER;\n        v_new_pol_batch_no       NUMBER;\n        v_pol_status             VARCHAR2 (5);\n        v_pol_wef                DATE;\n        v_pol_wet                DATE;\n        v_pol_uw_yr              NUMBER;\n        v_pol_cover_from         DATE;\n        v_pol_cover_to           DATE;\n        v_pol_uwyr_length        NUMBER;\n        v_cancel_date            DATE;\n        v_endors_min_prem        NUMBER;\n        v_cnt                    NUMBER;\n        v_pdl_code               NUMBER;\n        v_cnt2                   NUMBER;\n        v_pol_renewal_dt         DATE;\n        vipuwef                  DATE;\n        vipueffwef               DATE;\n        vipuwet                  DATE;\n        vipueffwet               DATE;\n        vprevipucode             NUMBER;\n        vprevprem                NUMBER;\n        vipupaidprem             NUMBER;\n        vipupaidtl               NUMBER;\n        viputranstype            VARCHAR2 (10);\n        v_endos_wht_prev_rein    VARCHAR2 (1) := 'N';\n        v_val_pol                VARCHAR2 (1);\n        v_shortp_pol             VARCHAR2 (1);\n        v_balance                NUMBER := 0;\n        v_sp_cnt                 NUMBER;\n        v_sp_cnt_param           NUMBER;\n        v_ipu_covt_sht_desc      VARCHAR2 (100);\n        v_count                  NUMBER;\n        v_covt_code              NUMBER;\n        v_allow_cert_bal         VARCHAR2 (1);\n        v_sch_status             VARCHAR2 (1);\n        v_prorata                VARCHAR2 (1);\n        v_allow_ext_with_bal     VARCHAR2 (1) := 'Y';\n        v_policy_debit           VARCHAR2 (1);\n        v_cur_reg_endors         VARCHAR2 (1) := 'N';\n        v_cert_autogen           VARCHAR2 (1);\n        v_rs_cnt                 NUMBER;\n        v_com_allowed            VARCHAR2 (1);\n        v_valuationcount         NUMBER;\n        v_ex_valuation_param     VARCHAR2 (1);\n        v_auto_populate_limits   VARCHAR2 (1);\n        v_param_ext              VARCHAR2 (1) := 'N';\n\n        --GIS-11824 To take care of normal endorsement done after regional endorsement is COMESA\n        CURSOR cur_coinsurer (v_btch NUMBER)\n        IS\n            SELECT *\n              FROM gin_coinsurers\n             WHERE coin_pol_batch_no = v_btch;\n\n        CURSOR cur_active_risks (v_polcy_no VARCHAR2, v_new_btch NUMBER)\n        IS\n            SELECT DISTINCT polar_ipu_code          ipu_code,\n                            polar_prev_batch_no     ipu_prev_batch_no,\n                            polar_ipu_id            ipu_id,\n                            ipu_pol_policy_no,\n                            ipu_prp_code\n              FROM gin_policy_active_risks,\n                   gin_insured_property_unds,\n                   gin_policies\n             WHERE     polar_ipu_code = ipu_code\n                   AND ipu_pol_batch_no = pol_batch_no\n                   AND pol_current_status = 'A'\n                   AND polar_pol_policy_no = v_polcy_no\n                   --cur_endors_pol_rec.POL_POLICY_NO\n                   AND ipu_id NOT IN (SELECT polar_ipu_id\n                                        FROM gin_policy_active_risks\n                                       WHERE polar_pol_batch_no = v_new_btch);\n\n        CURSOR cur_conditions (v_btch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_btch;\n\n        CURSOR cur_subclass_conditions (v_btch NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_subclass_clauses\n             WHERE poscl_pol_batch_no = v_btch;\n\n        CURSOR cur_schedule_values (v_btch NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_schedule_values\n             WHERE schpv_pol_batch_no = v_btch;\n\n        CURSOR cur_taxes (v_btch_no NUMBER, vprocode IN NUMBER)\n        IS\n            SELECT ptx_trac_scl_code,\n                   ptx_trac_trnt_code,\n                   ptx_pol_policy_no,\n                   ptx_pol_ren_endos_no,\n                   ptx_pol_batch_no,\n                   ptx_rate,\n                   ptx_amount,\n                   ptx_tl_lvl_code,\n                   ptx_rate_type,\n                   ptx_rate_desc,\n                   ptx_endos_diff_amt,\n                   ptx_tax_type,\n                   ptx_risk_pol_level,\n                   ptx_override,\n                   ptx_override_amt\n              FROM gin_policy_taxes, gin_transaction_types\n             WHERE     ptx_trac_trnt_code = trnt_code\n                   AND ptx_pol_batch_no = v_btch_no\n                   AND NVL (\n                           DECODE (v_trans_type,\n                                   'NB', trnt_apply_nb,\n                                   'SP', trnt_apply_sp,\n                                   'RN', trnt_apply_rn,\n                                   'EN', trnt_apply_en,\n                                   'CN', trnt_apply_cn,\n                                   'EX', trnt_apply_ex,\n                                   'DC', trnt_apply_dc,\n                                   'RE', trnt_apply_re),\n                           'N') =\n                       'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = vprocode);\n\n        -- TRNT_RENEWAL_ENDOS != 'N';\n        CURSOR cur_pol_perils (v_btch_no NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_section_perils\n             WHERE pspr_pol_batch_no = v_btch_no;\n\n        CURSOR cur_facre_dtls (v_btch_no NUMBER)\n        IS\n            SELECT *\n              FROM gin_facre_in_dtls\n             WHERE fid_pol_batch_no = v_btch_no;\n\n        CURSOR cur_insureds IS\n            SELECT DISTINCT prp_code\n              FROM gin_temp_trans\n             WHERE pol_batch_no = v_new_pol_batch_no;\n\n        CURSOR cur_ipu (v_prp NUMBER)\n        IS\n            SELECT DISTINCT a.ipu_code,\n                            b.ipu_status,\n                            ipu_property_id,\n                            ipu_item_desc,\n                            ipu_qty,\n                            ipu_value,\n                            ipu_wef,\n                            ipu_wet,\n                            ipu_pol_policy_no,\n                            ipu_pol_ren_endos_no,\n                            ipu_pol_batch_no,\n                            ipu_earth_quake_cover,\n                            ipu_earth_quake_prem,\n                            ipu_location,\n                            ipu_polin_code,\n                            ipu_sec_scl_code,\n                            ipu_ncd_status,\n                            ipu_related_ipu_code,\n                            ipu_prorata,\n                            ipu_gp,\n                            ipu_fap,\n                            ipu_prev_ipu_code,\n                            ipu_ncd_level,\n                            ipu_quz_code,\n                            ipu_quz_sht_desc,\n                            ipu_sht_desc,\n                            ipu_id,\n                            ipu_bind_code,\n                            ipu_excess_rate,\n                            ipu_excess_type,\n                            ipu_excess_rate_type,\n                            ipu_excess_min,\n                            ipu_excess_max,\n                            ipu_prereq_ipu_code,\n                            ipu_escalation_rate,\n                            ipu_comm_rate,\n                            ipu_prev_batch_no,\n                            ipu_cur_code,\n                            ipu_relr_code,\n                            ipu_relr_sht_desc,\n                            ipu_pol_est_max_loss,\n                            ipu_eff_wef,\n                            ipu_eff_wet,\n                            ipu_retro_cover,\n                            ipu_retro_wef,\n                            ipu_covt_code,\n                            ipu_covt_sht_desc,\n                            ipu_si_diff,\n                            ipu_terr_code,\n                            ipu_terr_desc,\n                            ipu_from_time,\n                            ipu_to_time,\n                            ipu_mar_cert_no,\n                            ipu_comp_retention,\n                            ipu_bp,\n                            ipu_fp,\n                            ipu_gross_comp_retention,\n                            ipu_prev_prem,\n                            ipu_com_retention_rate,\n                            ipu_prp_code,\n                            ipu_tot_endos_prem_dif,\n                            ipu_tot_gp,\n                            ipu_tot_value,\n                            ipu_ri_agnt_com_rate,\n                            ipu_cover_days,\n                            ipu_ri_agnt_comm_amt,\n                            ipu_tot_fap,\n                            ipu_max_exposure,\n                            ipu_uw_yr,\n                            ipu_tot_first_loss,\n                            ipu_accumulation_limit,\n                            ipu_reinsure_amt,\n                            ipu_compute_max_exposure,\n                            ipu_paid_premium,\n                            ipu_trans_count,\n                            ipu_paid_tl,\n                            ipu_inception_uwyr,\n                            ipu_endos_remove,\n                            ipu_eml_based_on,\n                            ipu_aggregate_limits,\n                            ipu_rc_sht_desc,\n                            ipu_rc_code,\n                            ipu_survey_date,\n                            ipu_item_details,\n                            ipu_override_ri_retention,\n                            ipu_action_type,\n                            ipu_risk_oth_int_parties,\n                            ipu_conveyance_type,\n                            ipu_prorata_sect_prem,\n                            ipu_nonprorata_sect_prem,\n                            ipu_prev_prorata_sect_prem,\n                            ipu_prev_nonprorata_sect_prem,\n                            ipu_tot_prorata_sect_prem,\n                            ipu_tot_nonprorata_sect_prem,\n                            ipu_prev_tot_prorata_s_prem,\n                            ipu_prev_tot_nonprorata_s_prem,\n                            ipu_install_period,\n                            ipu_rescue_charge,\n                            ipu_rescue_mem,\n                            ipu_rs_code,\n                            ipu_motor_levy,\n                            ipu_health_tax,\n                            ipu_road_safety_tax,\n                            ipu_certchg,\n                            ipu_cashback_appl,\n                            ipu_cashback_level,\n                            ipu_vehicle_model_code,\n                            ipu_vehicle_make_code,\n                            ipu_vehicle_model,\n                            ipu_vehicle_make,\n                            ipu_model_yr,\n                            a.ipu_cert_no,\n                            ipu_maintenance_period_type,\n                            ipu_maintenance_period,\n                            ipu_other_client_deductibles,\n                            ipu_coin_other_client_charges,\n                            ipu_survey_agnt_code,\n                            ipu_survey\n              FROM gin_insured_property_unds a, gin_temp_trans b\n             WHERE     a.ipu_code = b.ipu_code\n                   AND session_id = v_session_id\n                   AND prp_code = v_prp;\n\n        CURSOR cur_limits (v_ipu VARCHAR2)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code;\n\n        CURSOR cur_clauses (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_perils (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR cur_endors_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_pol_batch_no;\n\n        CURSOR cur_all_active_risks IS\n            SELECT ipu_pol_batch_no,\n                   ipu_code,\n                   ipu_prev_batch_no,\n                   ipu_id,\n                   ipu_pol_policy_no,\n                   ipu_prp_code     ipu_prp_code\n              FROM gin_insured_property_unds, gin_policy_active_risks\n             WHERE     ipu_code = polar_ipu_code\n                   AND polar_pol_batch_no = v_old_pol_batch_no\n                   AND ipu_code NOT IN (SELECT b.ipu_code\n                                          FROM gin_temp_trans b\n                                         WHERE b.session_id = v_session_id);\n\n        CURSOR cur_fam_dtls (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_med_cat_family_details\n             WHERE pmcfd_ipu_code = v_ipu;\n\n        CURSOR cur_fam_limit_dtls (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_med_fam_insured_limits\n             WHERE pmfil_ipu_code = v_ipu;\n\n        CURSOR cur_sbu_dtls IS\n            SELECT *\n              FROM gin_policy_sbu_dtls\n             WHERE pdl_pol_batch_no = v_old_pol_batch_no;\n\n        CURSOR risk_services (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_services\n             WHERE prs_ipu_code = v_ipu;\n\n        CURSOR driver_details (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_clm_drv_dtls\n             WHERE cdr_ipu_code = v_ipu AND cdr_module = 'U';\n    BEGIN\n        v_user := NVL (v_agentcontact, v_user);\n\n        --    raise_error ('v_trans_type='||v_trans_type||'= '||v_regional_endors);\n        BEGIN\n            SELECT gin_parameters_pkg.get_param_varchar (\n                       'ENDOS_WHT_PREV_REIN')\n              INTO v_endos_wht_prev_rein\n              FROM DUAL;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_endos_wht_prev_rein := 'N';\n        END;",
        "populate_endos_rsk_dtls": "PROCEDURE populate_endos_rsk_dtls (\n        v_old_batch_no       IN     NUMBER,\n        v_trans_type         IN     VARCHAR2,\n        v_new_batch_no       IN     NUMBER,\n        v_old_ipu_code       IN     NUMBER,\n        v_ipu_add_edit       IN     VARCHAR2,\n        v_new_ipu_code          OUT NUMBER,\n        v_action_type        IN     VARCHAR2,\n        --S Suspend, C Cancel RT Reinstate R Revise\n        v_del_date           IN     DATE DEFAULT NULL,\n        v_susp_reinst_type   IN     VARCHAR2 DEFAULT 'PREM',\n        -- Reinstate by refund premium (PREM) or Extending days (DAYS)\n        v_rcpt_amt           IN     NUMBER DEFAULT NULL,\n        -- cash basis  functionality\n        v_sclcode            IN     NUMBER DEFAULT NULL,\n        v_bindcode           IN     NUMBER DEFAULT NULL,\n        v_covtcode           IN     NUMBER DEFAULT NULL,\n        v_dtfrom             IN     DATE DEFAULT NULL,\n        v_dtto               IN     DATE DEFAULT NULL,\n        v_no_of_months       IN     NUMBER DEFAULT NULL)\n    IS\n        CURSOR cur_ipu IS\n            SELECT DISTINCT\n                   ipu_code,\n                   ipu_property_id,\n                   ipu_item_desc,\n                   ipu_qty,\n                   ipu_value,\n                   ipu_wef,\n                   ipu_wet,\n                   ipu_pol_policy_no,\n                   ipu_pol_ren_endos_no,\n                   ipu_pol_batch_no,\n                   ipu_earth_quake_cover,\n                   ipu_earth_quake_prem,\n                   ipu_location,\n                   ipu_polin_code,\n                   ipu_sec_scl_code,\n                   ipu_ncd_status,\n                   ipu_related_ipu_code,\n                   ipu_prorata,\n                   ipu_gp,\n                   ipu_fap,\n                   ipu_prev_ipu_code,\n                   ipu_ncd_level,\n                   ipu_quz_code,\n                   ipu_quz_sht_desc,\n                   ipu_sht_desc,\n                   ipu_id,\n                   ipu_bind_code,\n                   ipu_excess_rate,\n                   ipu_excess_type,\n                   ipu_excess_rate_type,\n                   ipu_excess_min,\n                   ipu_excess_max,\n                   ipu_prereq_ipu_code,\n                   ipu_escalation_rate,\n                   ipu_comm_rate,\n                   ipu_prev_batch_no,\n                   ipu_cur_code,\n                   ipu_relr_code,\n                   ipu_relr_sht_desc,\n                   ipu_pol_est_max_loss,\n                   ipu_eff_wef,\n                   ipu_eff_wet,\n                   ipu_retro_cover,\n                   ipu_retro_wef,\n                   ipu_covt_code,\n                   ipu_covt_sht_desc,\n                   ipu_si_diff,\n                   ipu_terr_code,\n                   ipu_terr_desc,\n                   ipu_from_time,\n                   ipu_to_time,\n                   ipu_mar_cert_no,\n                   ipu_comp_retention,\n                   ipu_bp,\n                   ipu_fp,\n                   ipu_gross_comp_retention,\n                   ipu_prev_prem,\n                   ipu_com_retention_rate,\n                   ipu_prp_code,\n                   ipu_tot_endos_prem_dif,\n                   ipu_tot_gp,\n                   ipu_tot_value,\n                   ipu_ri_agnt_com_rate,\n                   ipu_cover_days,\n                   ipu_ri_agnt_comm_amt,\n                   ipu_tot_fap,\n                   ipu_max_exposure,\n                   ipu_uw_yr,\n                   ipu_tot_first_loss,\n                   ipu_accumulation_limit,\n                   ipu_reinsure_amt,\n                   ipu_compute_max_exposure,\n                   ipu_paid_premium,\n                   ipu_trans_count,\n                   ipu_paid_tl,\n                   ipu_inception_uwyr,\n                   ipu_endos_remove,\n                   ipu_eml_based_on,\n                   ipu_aggregate_limits,\n                   ipu_rc_sht_desc,\n                   ipu_rc_code,\n                   ipu_survey_date,\n                   ipu_item_details,\n                   ipu_override_ri_retention,\n                   ipu_conveyance_type,\n                   ipu_prorata_sect_prem,\n                   ipu_nonprorata_sect_prem,\n                   ipu_prev_prorata_sect_prem,\n                   ipu_prev_nonprorata_sect_prem,\n                   ipu_tot_prorata_sect_prem,\n                   ipu_tot_nonprorata_sect_prem,\n                   ipu_prev_tot_prorata_s_prem,\n                   ipu_prev_tot_nonprorata_s_prem,\n                   ipu_status,\n                   ipu_cover_suspended,\n                   ipu_suspend_wef,\n                   ipu_suspend_wet,\n                   ipu_install_period,\n                   ipu_pymt_install_pcts,\n                   ipu_rs_code,\n                   ipu_rescue_mem,\n                   ipu_rescue_charge,\n                   ipu_instal_prem,\n                   ipu_health_tax,\n                   ipu_road_safety_tax,\n                   ipu_certchg,\n                   ipu_motor_levy,\n                   ipu_client_vat_amt,\n                   ipu_cashback_appl,\n                   ipu_cashback_level,\n                   ipu_vehicle_model,\n                   ipu_vehicle_make,\n                   ipu_vehicle_model_code,\n                   ipu_vehicle_make_code,\n                   ipu_loc_town,\n                   ipu_prop_address,\n                   ipu_risk_note,\n                   ipu_other_com_charges,\n                   ipu_model_yr,\n                   ipu_cert_no,\n                   NVL (ipu_insured_driver, 'Y')     ipu_insured_driver,\n                   ipu_maintenance_period_type,\n                   ipu_maintenance_period,\n                   ipu_other_client_deductibles,\n                   ipu_coin_other_client_charges,\n                   ipu_survey_agnt_code,\n                   ipu_survey,\n                   ipu_marine_type\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_old_ipu_code;\n\n        --AND session_id = v_session_id\n        --AND prp_code = v_prp;\n        CURSOR cur_limits (v_ipu VARCHAR2)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code, pil_calc_group, pil_row_num;\n\n        CURSOR security_docs (vipu_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_security_documents\n             WHERE rsd_ipu_code = vipu_code;\n\n        CURSOR cur_clauses (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_perils (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR cur_endors_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch_no;\n\n        CURSOR risk_services (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_services\n             WHERE prs_ipu_code = v_ipu;\n\n        --v_new_ipu_code NUMBER;\n        v_cnt                      NUMBER := 0;\n        v_ipu_status               VARCHAR2 (2);\n        v_ipu_wet                  DATE;\n        v_risk_uw_yr               NUMBER;\n        v_ipu_eff_wef              DATE;\n        v_ipu_wef                  DATE;\n        v_ipu_prev_prem            NUMBER;\n        v_dup_rec                  EXCEPTION;\n        v_ipu_prev_ri_amt          NUMBER;\n        v_pil_prem_amt             NUMBER;\n        v_pil_prev_limit           NUMBER;\n        v_compute                  VARCHAR2 (2);\n        v_pil_code                 NUMBER;\n        v_new_pol_no               VARCHAR2 (30);\n        v_new_endr_no              VARCHAR2 (30);\n        v_pol_wet                  DATE;\n        v_pol_wef                  DATE;\n        -- v_trans_eff_date DATE;\n        v_polin_code               NUMBER;\n        vipuwef                    DATE;\n        vipueffwef                 DATE;\n        vipuwet                    DATE;\n        vipueffwet                 DATE;\n        vprevipucode               NUMBER;\n        vprevprem                  NUMBER;\n        vipupaidprem               NUMBER;\n        vipupaidtl                 NUMBER;\n        viputranstype              VARCHAR2 (10);\n        v_pol_uw_year              NUMBER;\n        v_suspend                  VARCHAR2 (1) := 'N';\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_pol_cover_from           DATE;\n        v_pol_cover_to             DATE;\n        v_pol_tot_instlmt          NUMBER;\n        v_install_period           NUMBER;\n        v_cvt_install_type         gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs         gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts    gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods      gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct              NUMBER;\n        v_suspend_days             NUMBER;\n        v_rsks_count               NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_pro_expiry_period        VARCHAR2 (3);\n        v_risk_pymt_install_pcts   VARCHAR2 (35);\n        v_cover_days               NUMBER;\n        v_max_susp_period          NUMBER;\n        v_new_pol_wet              DATE;\n        v_pol_instal_wet           DATE;\n        v_downgrade_on_sus_param   VARCHAR2 (1) := 'N';\n        -- v_covt_code                NUMBER;\n        --v_covt_sht_desc            VARCHAR2 (10);\n        v_covt_downgrade           VARCHAR2 (1) := 'N';\n        v_covt_downgrade_to        VARCHAR2 (10);\n        v_id_reg_no                VARCHAR2 (30);\n        v_clnt_pin_no              VARCHAR2 (30);\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_regulator_number     VARCHAR2 (50);\n        v_maturity_date            DATE;\n        v_agt                      NUMBER;\n        v_sht_desc                 VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_count                    NUMBER;\n        v_no_inst                  NUMBER;\n        v_instal_prem              NUMBER;\n        v_fp_prem                  NUMBER;\n        v_excpt_count              NUMBER;\n        act_type                   NUMBER;\n        v_factor                   NUMBER;\n        v_scl_code                 NUMBER;\n        v_covt_code                NUMBER;\n        v_covt_sht_desc            VARCHAR2 (25);\n        v_bind_code                NUMBER;\n        v_prev_status              VARCHAR2 (5);\n        ipu_prev_status            VARCHAR2 (5);\n        v_pol_status               VARCHAR2 (5);\n        v_cert_autogen             VARCHAR2 (1);\n        v_certificate_period       VARCHAR2 (1);\n        v_pol_pymt_install_pcts    VARCHAR2 (50);\n        v_tot_pct                  NUMBER;\n        v_months                   NUMBER;\n        v_ex_valuation_param       VARCHAR2 (1);\n        v_valuationcount           NUMBER;\n        V_ISMOTORPRODUCT           VARCHAR2 (1);\n    BEGIN\n        --       RAISE_ERROR('v_action_type '||v_action_type||' v_old_batch_no '|| v_old_batch_no||' v_old_ipu_code '||v_old_ipu_code );\n        v_ipu_status := 'EN';\n\n        IF v_trans_type IN ('CN', 'CO')\n        THEN\n            RETURN;\n        END IF;\n\n        IF v_new_batch_no IS NULL\n        THEN\n            raise_error ('Error... Batch number is null...');\n        END IF;\n\n        IF v_old_ipu_code IS NULL\n        THEN\n            raise_error ('Error. No risk to endorse...');\n        END IF;\n\n        BEGIN\n            SELECT pol_policy_no,\n                   pol_ren_endos_no,\n                   pol_wef_dt,\n                   pol_wet_dt,\n                   pol_uw_year,\n                   pol_policy_cover_from,\n                   pol_policy_cover_to,\n                   pol_tot_instlmt,\n                   pro_expiry_period,\n                   pol_paid_to_date,\n                   pro_cert_period,\n                   pol_pymt_install_pcts\n              INTO v_new_pol_no,\n                   v_new_endr_no,\n                   v_pol_wef,\n                   v_pol_wet,\n                   v_pol_uw_year,\n                   v_pol_cover_from,\n                   v_pol_cover_to,\n                   v_pol_tot_instlmt,\n                   v_pro_expiry_period,\n                   v_pol_instal_wet,\n                   v_certificate_period,\n                   v_pol_pymt_install_pcts\n              FROM gin_policies, gin_products\n             WHERE pol_batch_no = v_new_batch_no AND pol_pro_code = pro_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details...');\n        END;",
        "populate_endos_rsk_dtls_0703": "PROCEDURE populate_endos_rsk_dtls_0703 (\n        v_old_batch_no       IN     NUMBER,\n        v_trans_type         IN     VARCHAR2,\n        v_new_batch_no       IN     NUMBER,\n        v_old_ipu_code       IN     NUMBER,\n        v_ipu_add_edit       IN     VARCHAR2,\n        v_new_ipu_code          OUT NUMBER,\n        v_action_type        IN     VARCHAR2,\n        --S Suspend, C Cancel RT Reinstate R Revise\n        v_del_date           IN     DATE DEFAULT NULL,\n        v_susp_reinst_type   IN     VARCHAR2 DEFAULT 'PREM',\n        -- Reinstate by refund premium (PREM) or Extending days (DAYS)\n        v_rcpt_amt           IN     NUMBER DEFAULT NULL,\n        -- cash basis  functionality\n        v_sclcode            IN     NUMBER DEFAULT NULL,\n        v_bindcode           IN     NUMBER DEFAULT NULL,\n        v_covtcode           IN     NUMBER DEFAULT NULL,\n        v_dtfrom             IN     DATE DEFAULT NULL,\n        v_dtto               IN     DATE DEFAULT NULL)\n    IS\n        CURSOR cur_ipu IS\n            SELECT DISTINCT ipu_code,\n                            ipu_property_id,\n                            ipu_item_desc,\n                            ipu_qty,\n                            ipu_value,\n                            ipu_wef,\n                            ipu_wet,\n                            ipu_pol_policy_no,\n                            ipu_pol_ren_endos_no,\n                            ipu_pol_batch_no,\n                            ipu_earth_quake_cover,\n                            ipu_earth_quake_prem,\n                            ipu_location,\n                            ipu_polin_code,\n                            ipu_sec_scl_code,\n                            ipu_ncd_status,\n                            ipu_related_ipu_code,\n                            ipu_prorata,\n                            ipu_gp,\n                            ipu_fap,\n                            ipu_prev_ipu_code,\n                            ipu_ncd_level,\n                            ipu_quz_code,\n                            ipu_quz_sht_desc,\n                            ipu_sht_desc,\n                            ipu_id,\n                            ipu_bind_code,\n                            ipu_excess_rate,\n                            ipu_excess_type,\n                            ipu_excess_rate_type,\n                            ipu_excess_min,\n                            ipu_excess_max,\n                            ipu_prereq_ipu_code,\n                            ipu_escalation_rate,\n                            ipu_comm_rate,\n                            ipu_prev_batch_no,\n                            ipu_cur_code,\n                            ipu_relr_code,\n                            ipu_relr_sht_desc,\n                            ipu_pol_est_max_loss,\n                            ipu_eff_wef,\n                            ipu_eff_wet,\n                            ipu_retro_cover,\n                            ipu_retro_wef,\n                            ipu_covt_code,\n                            ipu_covt_sht_desc,\n                            ipu_si_diff,\n                            ipu_terr_code,\n                            ipu_terr_desc,\n                            ipu_from_time,\n                            ipu_to_time,\n                            ipu_mar_cert_no,\n                            ipu_comp_retention,\n                            ipu_bp,\n                            ipu_fp,\n                            ipu_gross_comp_retention,\n                            ipu_prev_prem,\n                            ipu_com_retention_rate,\n                            ipu_prp_code,\n                            ipu_tot_endos_prem_dif,\n                            ipu_tot_gp,\n                            ipu_tot_value,\n                            ipu_ri_agnt_com_rate,\n                            ipu_cover_days,\n                            ipu_ri_agnt_comm_amt,\n                            ipu_tot_fap,\n                            ipu_max_exposure,\n                            ipu_uw_yr,\n                            ipu_tot_first_loss,\n                            ipu_accumulation_limit,\n                            ipu_reinsure_amt,\n                            ipu_compute_max_exposure,\n                            ipu_paid_premium,\n                            ipu_trans_count,\n                            ipu_paid_tl,\n                            ipu_inception_uwyr,\n                            ipu_endos_remove,\n                            ipu_eml_based_on,\n                            ipu_aggregate_limits,\n                            ipu_rc_sht_desc,\n                            ipu_rc_code,\n                            ipu_survey_date,\n                            ipu_item_details,\n                            ipu_override_ri_retention,\n                            ipu_conveyance_type,\n                            ipu_prorata_sect_prem,\n                            ipu_nonprorata_sect_prem,\n                            ipu_prev_prorata_sect_prem,\n                            ipu_prev_nonprorata_sect_prem,\n                            ipu_tot_prorata_sect_prem,\n                            ipu_tot_nonprorata_sect_prem,\n                            ipu_prev_tot_prorata_s_prem,\n                            ipu_prev_tot_nonprorata_s_prem,\n                            ipu_status,\n                            ipu_cover_suspended,\n                            ipu_suspend_wef,\n                            ipu_suspend_wet,\n                            ipu_install_period,\n                            ipu_pymt_install_pcts,\n                            ipu_rs_code,\n                            ipu_rescue_mem,\n                            ipu_rescue_charge,\n                            ipu_instal_prem,\n                            ipu_health_tax,\n                            ipu_road_safety_tax,\n                            ipu_certchg,\n                            ipu_motor_levy,\n                            ipu_client_vat_amt,\n                            ipu_cashback_appl,\n                            ipu_cashback_level\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_old_ipu_code;\n\n        --AND session_id = v_session_id\n        --AND prp_code = v_prp;\n        CURSOR cur_limits (v_ipu VARCHAR2)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code, pil_calc_group, pil_row_num;\n\n        CURSOR security_docs (vipu_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_security_documents\n             WHERE rsd_ipu_code = vipu_code;\n\n        CURSOR cur_clauses (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_perils (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR cur_endors_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch_no;\n\n        --v_new_ipu_code NUMBER;\n        v_cnt                      NUMBER := 0;\n        v_ipu_status               VARCHAR2 (2);\n        v_ipu_wet                  DATE;\n        v_risk_uw_yr               NUMBER;\n        v_ipu_eff_wef              DATE;\n        v_ipu_wef                  DATE;\n        v_ipu_prev_prem            NUMBER;\n        v_dup_rec                  EXCEPTION;\n        v_ipu_prev_ri_amt          NUMBER;\n        v_pil_prem_amt             NUMBER;\n        v_pil_prev_limit           NUMBER;\n        v_compute                  VARCHAR2 (2);\n        v_pil_code                 NUMBER;\n        v_new_pol_no               VARCHAR2 (30);\n        v_new_endr_no              VARCHAR2 (30);\n        v_pol_wet                  DATE;\n        v_pol_wef                  DATE;\n        -- v_trans_eff_date DATE;\n        v_polin_code               NUMBER;\n        vipuwef                    DATE;\n        vipueffwef                 DATE;\n        vipuwet                    DATE;\n        vipueffwet                 DATE;\n        vprevipucode               NUMBER;\n        vprevprem                  NUMBER;\n        vipupaidprem               NUMBER;\n        vipupaidtl                 NUMBER;\n        viputranstype              VARCHAR2 (10);\n        v_pol_uw_year              NUMBER;\n        v_suspend                  VARCHAR2 (1) := 'N';\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_pol_cover_from           DATE;\n        v_pol_cover_to             DATE;\n        v_pol_tot_instlmt          NUMBER;\n        v_install_period           NUMBER;\n        v_cvt_install_type         gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs         gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts    gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods      gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct              NUMBER;\n        v_suspend_days             NUMBER;\n        v_rsks_count               NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_pro_expiry_period        VARCHAR2 (3);\n        v_risk_pymt_install_pcts   VARCHAR2 (35);\n        v_cover_days               NUMBER;\n        v_max_susp_period          NUMBER;\n        v_new_pol_wet              DATE;\n        v_pol_instal_wet           DATE;\n        v_downgrade_on_sus_param   VARCHAR2 (1) := 'N';\n        -- v_covt_code                NUMBER;\n        --v_covt_sht_desc            VARCHAR2 (10);\n        v_covt_downgrade           VARCHAR2 (1) := 'N';\n        v_covt_downgrade_to        VARCHAR2 (10);\n        v_id_reg_no                VARCHAR2 (30);\n        v_clnt_pin_no              VARCHAR2 (30);\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_regulator_number     VARCHAR2 (50);\n        v_maturity_date            DATE;\n        v_agt                      NUMBER;\n        v_sht_desc                 VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_count                    NUMBER;\n        v_no_inst                  NUMBER;\n        v_instal_prem              NUMBER;\n        v_fp_prem                  NUMBER;\n        v_excpt_count              NUMBER;\n        act_type                   NUMBER;\n        v_factor                   NUMBER;\n        v_scl_code                 NUMBER;\n        v_covt_code                NUMBER;\n        v_covt_sht_desc            VARCHAR2 (15);\n        v_bind_code                NUMBER;\n        v_prev_status              VARCHAR2 (5);\n        ipu_prev_status            VARCHAR2 (5);\n        v_pol_status               VARCHAR2 (5);\n        v_cert_autogen             VARCHAR2 (1);\n    BEGIN\n        --    RAISE_ERROR('v_action_type '||v_action_type||' v_old_batch_no '|| v_old_batch_no||' v_old_ipu_code '||v_old_ipu_code );\n        v_ipu_status := 'EN';\n\n        IF v_trans_type IN ('CN', 'CO')\n        THEN\n            RETURN;\n        END IF;\n\n        IF v_new_batch_no IS NULL\n        THEN\n            raise_error ('Error... Batch number is null...');\n        END IF;\n\n        IF v_old_ipu_code IS NULL\n        THEN\n            raise_error ('Error. No risk to endorse...');\n        END IF;\n\n        BEGIN\n            SELECT pol_policy_no,\n                   pol_ren_endos_no,\n                   pol_wef_dt,\n                   pol_wet_dt,\n                   pol_uw_year,\n                   pol_policy_cover_from,\n                   pol_policy_cover_to,\n                   pol_tot_instlmt,\n                   pro_expiry_period,\n                   pol_paid_to_date\n              INTO v_new_pol_no,\n                   v_new_endr_no,\n                   v_pol_wef,\n                   v_pol_wet,\n                   v_pol_uw_year,\n                   v_pol_cover_from,\n                   v_pol_cover_to,\n                   v_pol_tot_instlmt,\n                   v_pro_expiry_period,\n                   v_pol_instal_wet\n              FROM gin_policies, gin_products\n             WHERE pol_batch_no = v_new_batch_no AND pol_pro_code = pro_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details...');\n        END;",
        "create_contra_trans": "PROCEDURE create_contra_trans (v_old_batch   IN     NUMBER,\n                                   v_batch_no       OUT NUMBER,\n                                   v_user        IN     VARCHAR2,\n                                   v_eff_date    IN     DATE)\n    IS\n        v_serial         NUMBER (10);\n        v_pol_no         VARCHAR2 (26);\n        v_ends_no        VARCHAR2 (26);\n        --next_ggt_trans_no number;\n        v_pol_prefix     VARCHAR2 (15);\n        v_new_ipu_code   NUMBER;\n        vdummy           NUMBER;\n        v_tran_no        NUMBER;\n        v_prrd_code      NUMBER;\n        v_pdl_code       NUMBER;\n\n        CURSOR cur_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch;\n\n        CURSOR cur_taxes IS\n            SELECT *\n              FROM gin_policy_taxes\n             WHERE ptx_pol_batch_no = v_old_batch;\n\n        CURSOR cur_coinsurer IS\n            SELECT *\n              FROM gin_coinsurers\n             WHERE coin_pol_batch_no = v_old_batch;\n\n        CURSOR cur_facre_dtls IS\n            SELECT *\n              FROM gin_facre_in_dtls\n             WHERE fid_pol_batch_no = v_old_batch;\n\n        CURSOR cur_conditions IS\n            SELECT *\n              FROM gin_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_old_batch;\n\n        CURSOR cur_insureds IS\n            SELECT *\n              FROM gin_policy_insureds\n             WHERE polin_pol_batch_no = v_old_batch;\n\n        CURSOR cur_ipu (v_polin_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_insured_property_unds\n             WHERE     ipu_pol_batch_no = v_old_batch\n                   AND ipu_polin_code = v_polin_code;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_limits (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_insured_limits\n             WHERE pil_ipu_code = v_ipu;\n\n        CURSOR cur_clauses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR perils (v_ipu NUMBER)\n        IS\n            SELECT gpsp_per_code,\n                   gpsp_per_sht_desc,\n                   gpsp_sec_sect_code,\n                   gpsp_sect_sht_desc,\n                   gpsp_sec_scl_code,\n                   gpsp_ipp_code,\n                   gpsp_ipu_code,\n                   gpsp_limit_amt,\n                   gpsp_excess_amt\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR risk_excesses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_excess\n             WHERE re_ipu_code = v_ipu;\n\n        CURSOR schedules (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_schedules\n             WHERE polrs_ipu_code = v_ipu;\n\n        CURSOR cur_prrd (v_cur_prrd NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_ri_dtls\n             WHERE prrd_code = v_cur_prrd;\n\n        CURSOR cur_facre (v_prrd NUMBER)\n        IS\n            SELECT *\n              FROM gin_facre_cessions\n             WHERE fc_prrd_code = v_prrd;\n\n        CURSOR cur_pool (v_prrd NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_rein_pool_risk_details\n             WHERE prprd_prrd_code = v_prrd;\n\n        CURSOR cur_rein (v_prrd NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_rein_risk_details\n             WHERE ptotr_prrd_code = v_prrd;\n\n        CURSOR cur_part (v_ptotr NUMBER)\n        IS\n            SELECT *\n              FROM gin_participations\n             WHERE part_ptotr_code = v_ptotr;\n\n        CURSOR cur_rcpt IS\n            SELECT *\n              FROM gin_prem_receipts\n             WHERE prm_pol_batch_no = v_old_batch;\n\n        CURSOR cur_pol_sbu_dtls IS\n            SELECT *\n              FROM gin_policy_sbu_dtls\n             WHERE pdl_pol_batch_no = v_old_batch;\n\n        CURSOR cur_riskcommissions (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_commissions\n             WHERE prc_ipu_code = v_ipu;\n    BEGIN\n        IF v_old_batch IS NULL\n        THEN\n            raise_error ('Select old transaction!!...');\n        END IF;\n\n        IF v_user IS NULL\n        THEN\n            raise_error ('User not defined.');\n        END IF;\n\n        FOR cur_pol_rec IN cur_pol\n        LOOP\n            --         IF     NVL (cur_pol_rec.pol_reinsured, 'N') != 'Y'\n            --            AND NVL (cur_pol_rec.pol_loaded, 'N') = 'N'\n            --            AND tqc_interfaces_pkg.get_org_type (37) = 'INS'\n            --         THEN\n            --            raise_error\n            --               ('Reinsurance for the previous transaction on this policy has not been performed/Authorised. Cannot continue..'\n            --               );\n            --         END IF;  One of the main rasons for doing a contra is to reverse the old transaction so there is no need of this check\n            BEGIN\n                SELECT COUNT ('X')\n                  INTO vdummy\n                  FROM gin_claim_master_bookings\n                 WHERE     cmb_pol_batch_no = v_old_batch\n                       AND NVL (cmb_claim_status, 'B') NOT IN ('U', 'N');\n            --AND (cmb_claim_status != 'U' OR cmb_claim_status != 'N');\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                        'Error checking claim on the transaction to contra..');\n            END;",
        "pop_policy_perils": "PROCEDURE pop_policy_perils (v_batch_no    IN NUMBER,\n                                 v_pro_code    IN NUMBER,\n                                 v_bind_code   IN NUMBER)\n    IS\n        v_bind_type   VARCHAR2 (1);\n    BEGIN\n        IF v_bind_code IS NULL\n        THEN\n            v_bind_type := 'M';\n        ELSE\n            BEGIN\n                SELECT bind_type\n                  INTO v_bind_type\n                  FROM gin_binders\n                 WHERE bind_code = v_bind_code;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error getting the binder type...');\n            END;",
        "transfer_to_uw": "PROCEDURE transfer_to_uw (v_pol_batch_no   IN     NUMBER,\n                              v_user           IN     VARCHAR2,\n                              v_batch_no          OUT NUMBER)\n    IS\n        v_pol_no                      VARCHAR2 (26);\n        v_ends_no                     VARCHAR2 (26);\n        next_ggt_trans_no             NUMBER;\n        v_endos_sr                    NUMBER (15);\n        v_pol_prefix                  VARCHAR2 (15);\n        v_new_ipu_code                NUMBER;\n        v_pol_status                  VARCHAR2 (5);\n        v_pmode_code                  NUMBER;\n        v_base_cur_code               NUMBER;\n        v_cnt                         NUMBER;\n        v_dates_error                 VARCHAR2 (200);\n        v_endos_count                 NUMBER;\n        v_curr_batch_no               NUMBER;\n        v_pro_sht_desc                VARCHAR2 (50);\n        v_noyrstautoradclient_param   NUMBER;\n        v_auto_grad_clnt_param        VARCHAR2 (1) := 'N';\n        v_renewal_cnt                 NUMBER;\n        next_ggts_trans_no            NUMBER;\n        v_rn_cnt                      NUMBER;\n        v_pdl_code                    NUMBER;\n        v_re_cnt                      NUMBER;\n        v_count                       NUMBER;\n        v_agent_code                  NUMBER;\n        v_agents_status               VARCHAR (15);\n        v_blacklist_status            VARCHAR2 (400) := 'N';\n\n        CURSOR cur_taxes (v_batch      NUMBER,\n                          vtranstype   VARCHAR2,\n                          vprocode     NUMBER)\n        IS\n            SELECT ptx_trac_scl_code,\n                   ptx_trac_trnt_code,\n                   ptx_pol_policy_no,\n                   ptx_pol_ren_endos_no,\n                   ptx_pol_batch_no,\n                   ptx_rate,\n                   ptx_amount,\n                   ptx_tl_lvl_code,\n                   ptx_rate_type,\n                   ptx_rate_desc,\n                   ptx_endos_diff_amt,\n                   ptx_tax_type\n              FROM gin_ren_policy_taxes, gin_transaction_types\n             WHERE     ptx_trac_trnt_code = trnt_code\n                   AND ptx_pol_batch_no = v_batch\n                   AND NVL (\n                           DECODE (vtranstype,\n                                   'NB', trnt_apply_nb,\n                                   'SP', trnt_apply_sp,\n                                   'RN', trnt_apply_rn,\n                                   'EN', trnt_apply_en,\n                                   'CN', trnt_apply_cn,\n                                   'EX', trnt_apply_ex,\n                                   'DC', trnt_apply_dc,\n                                   'RE', trnt_apply_re),\n                           'N') =\n                       'Y'\n                   AND trnt_code NOT IN (SELECT petx_trnt_code\n                                           FROM gin_product_excluded_taxes\n                                          WHERE petx_pro_code = vprocode);\n\n        --TRNT_RENEWAL_ENDOS != 'N';\n        CURSOR cur_coinsurer (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_coinsurers\n             WHERE coin_pol_batch_no = v_batch;\n\n        CURSOR cur_facre_dtls (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_facre_in_dtls\n             WHERE fid_pol_batch_no = v_batch;\n\n        CURSOR cur_conditions (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_policy_lvl_clauses\n             WHERE plcl_pol_batch_no = v_batch;\n\n        CURSOR cur_schedule_values (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_pol_schedule_values\n             WHERE schpv_pol_batch_no = v_batch;\n\n        CURSOR cur_pol_perils (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_policy_section_perils\n             WHERE pspr_pol_batch_no = v_batch;\n\n        CURSOR cur_insureds (v_batch NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_policy_insureds\n             WHERE polin_pol_batch_no = v_batch;\n\n        CURSOR cur_ipu (v_batch NUMBER, v_polin_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_insured_property_unds\n             WHERE     ipu_pol_batch_no = v_batch\n                   AND ipu_polin_code = v_polin_code;\n\n        CURSOR cur_limits (v_ipu NUMBER)\n        IS\n              SELECT *\n                FROM gin_ren_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code, pil_calc_group, pil_row_num;\n\n        CURSOR cur_clauses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM tq_gis.gin_pol_ren_rsk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR perils (v_ipu NUMBER)\n        IS\n            SELECT gpsp_per_code,\n                   gpsp_per_sht_desc,\n                   gpsp_sec_sect_code,\n                   gpsp_sect_sht_desc,\n                   gpsp_sec_scl_code,\n                   gpsp_ipp_code,\n                   gpsp_ipu_code,\n                   gpsp_limit_amt,\n                   gpsp_excess_amt\n              FROM gin_ren_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR risk_excesses (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_risk_excess\n             WHERE re_ipu_code = v_ipu;\n\n        CURSOR schedules (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_ren_policy_risk_schedules\n             WHERE polrs_ipu_code = v_ipu;\n\n        CURSOR pol IS\n            SELECT gin_ren_policies.*, 'Y' pol_pop_taxes\n              FROM gin_ren_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n\n        CURSOR cur_coagencies IS\n            SELECT *\n              FROM gin_policy_coagencies\n             WHERE coagn_pol_batch_no = v_pol_batch_no;\n\n        /* CURSOR cur_rcpt\n         IS\n            SELECT *\n              FROM gin_master_transactions\n             WHERE mtran_pol_batch_no = v_pol_batch_no\n               AND mtran_tran_type = 'RC'\n               AND mtran_balance <> 0;*/\n\n        CURSOR cur_rcpt (v_pol_renewal_batch NUMBER)\n        IS\n            SELECT gin_master_transactions.*\n              FROM gin_master_transactions, gin_gis_transmitals\n             WHERE     mtran_tran_type = 'RC'\n                   AND mtran_pol_batch_no = v_pol_batch_no\n                   AND ggts_pol_renewal_batch = v_pol_renewal_batch\n                   AND ggts_pol_batch_no = mtran_pol_batch_no\n                   AND ggts_uw_clm_tran = 'RN'\n                   AND mtran_balance = mtran_net_amt;\n\n        CURSOR pol_dtls IS\n            SELECT *\n              FROM gin_renwl_sbudtls\n             WHERE pdl_pol_batch_no = v_pol_batch_no;\n\n        CURSOR risk_services (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_ren_risk_services\n             WHERE prs_ipu_code = v_ipu;\n\n        CURSOR cur_subclass_conditions (v_btch NUMBER)\n        IS\n            --         SELECT *\n            --           FROM gin_policy_subclass_clauses\n            --          WHERE poscl_pol_batch_no = v_btch;\n            SELECT *\n              FROM gin_policy_subclass_clauses\n             WHERE     poscl_pol_batch_no = v_btch\n                   AND poscl_cls_code IN\n                           (SELECT DISTINCT SBCL_CLS_CODE\n                              FROM gin_subcl_clauses\n                             WHERE     NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                                   AND poscl_scl_code = sbcl_scl_code);\n    --\n    --      CURSOR cur_other_rn_trans (v_pol_policy_no IN VARCHAR2, v_uw_yr IN NUMBER)\n    --      IS\n    --         SELECT   pol_policy_cover_to, pol_policy_cover_from\n    --             FROM gin_policies\n    --            WHERE pol_batch_no = v_pol_batch_no;\n    --              AND pol_uw_year = v_uw_yr\n    --              AND pol_current_status != 'CO'\n    --         ORDER BY pol_wef_dt;\n    BEGIN\n        --   RAISE_ERROR('I'||';'||v_pol_batch_no);\n        IF v_user IS NULL\n        THEN\n            raise_error ('User not defined.');\n        END IF;\n\n        v_dates_error :=\n            gin_uw_author_proc.check_ren_pol_coverdates (v_pol_batch_no);\n\n        IF v_dates_error IS NOT NULL\n        THEN\n            raise_error (v_dates_error);\n        END IF;\n\n        FOR p IN pol\n        LOOP\n            BEGIN\n                v_auto_grad_clnt_param :=\n                    gin_parameters_pkg.get_param_varchar (\n                        'AUTO_GRADUATE_CLIENT');\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    v_auto_grad_clnt_param := 'N';\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                        'Error getting parameter AUTO_GRADUATE_CLIENT');\n            END;",
        "assign_certificate": "PROCEDURE assign_certificate (\n        v_ipu_code                IN     NUMBER,\n        v_ct_code                 IN     NUMBER,\n        v_wef_date                IN     DATE,\n        v_wet_date                IN     DATE,\n        v_error                      OUT VARCHAR2,\n        v_add_edit                IN     VARCHAR DEFAULT 'A',\n        v_pass_no                 IN     VARCHAR2 DEFAULT NULL,\n        v_tonnage                 IN     VARCHAR2 DEFAULT NULL,\n        v_polc_cod                IN     NUMBER DEFAULT NULL,\n        v_polc_status             IN     VARCHAR2 DEFAULT NULL,\n        v_print_status            IN     VARCHAR2 DEFAULT NULL,\n        v_polc_reason_cancelled   IN     VARCHAR2 DEFAULT NULL)\n    IS\n        CURSOR rsk IS\n            SELECT ipu_code,\n                   ipu_property_id,\n                   ipu_wef,\n                   ipu_wet,\n                   ipu_pol_policy_no,\n                   ipu_pol_ren_endos_no,\n                   ipu_pol_batch_no,\n                   pol_agnt_agent_code,\n                   pol_agnt_sht_desc,\n                   gis_utilities.clnt_name (clnt_name, clnt_other_names)\n                       insured,\n                   ipu_covt_code,\n                   ipu_sec_scl_code,\n                   ipu_eff_wef,\n                   ipu_eff_wet,\n                   ipu_id,\n                   pol_brn_code,\n                   ipu_covt_sht_desc,\n                   ipu_prp_code,\n                   pol_uw_year,\n                   pol_policy_status,\n                   pol_binder_policy,\n                   pol_pro_code,\n                   ipu_prev_ipu_code,\n                   ipu_cover_suspended,\n                   ipu_risk_note\n              FROM gin_policies,\n                   gin_insured_property_unds,\n                   gin_policy_insureds,\n                   tqc_clients\n             WHERE     ipu_pol_batch_no = pol_batch_no\n                   AND ipu_polin_code = polin_code\n                   AND polin_prp_code = clnt_code\n                   AND ipu_code = v_ipu_code;\n\n        v_wef                         DATE;\n        v_wet                         DATE;\n        v_ct_sht_desc                 VARCHAR2 (25);\n        v_pol_status                  VARCHAR2 (5);\n        v_user                        VARCHAR2 (35)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_cnt                         NUMBER;\n        v_polc_code                   NUMBER;\n        v_cert_no                     VARCHAR2 (30);\n        v_comp_name                   VARCHAR2 (75)\n                                          := tqc_interfaces_pkg.organizationname (37, 'N');\n        v_uw_certs                    VARCHAR2 (5);\n        v_cert_sht_period             NUMBER;\n        v_rqrd_docs                   NUMBER;\n        v_ipu_eff_wet                 DATE;\n        v_pol_batch_no                NUMBER;\n        v_pol_prem_computed           VARCHAR2 (10);\n        v_pol_statusi                 VARCHAR2 (10);\n        v_polc_passenger_no           VARCHAR2 (10);\n        v_polc_passenger_no2          VARCHAR2 (10);\n        v_polc_tonnage                NUMBER;\n        v_polc_pll                    NUMBER;\n        v_backdating_of_certs_param   VARCHAR2 (1);\n        v_loaded_cert                 NUMBER;\n        v_loadedcert_no               VARCHAR2 (30);\n        v_ct_type                     VARCHAR2 (30);\n        v_print_date                  DATE;\n        v_polc_print_status           VARCHAR2 (1);\n        v_polc_loaded                 VARCHAR2 (1);\n        v_polc_lot_id                 VARCHAR2 (100);\n        v_gnr_ct_sht_desc             VARCHAR2 (100);\n        v_gnr_ct_code                 NUMBER;\n        v_printed_status              VARCHAR2 (1);\n    BEGIN\n        --RAISE_ERROR('IN');\n        /*IF gin_parameters_pkg.get_param_varchar ('ALLOW_CERTIFICATE_BALANCES') =\n                                                                            'N'\n        THEN\n           BEGIN\n              SELECT ipu_pol_batch_no\n                INTO v_pol_batch_no\n                FROM gin_insured_property_unds\n               WHERE ipu_code = v_ipu_code;\n\n              IF gis_accounts_utilities.get_pdr_balance (v_pol_batch_no) > 0\n              THEN\n                 v_error :=\n                    'Cannot Allocate Certificate when there is pending balance';\n                 RETURN;\n              END IF;\n           EXCEPTION\n              WHEN NO_DATA_FOUND\n              THEN\n                 NULL;\n           END;",
        "auto_assign_certs": "PROCEDURE auto_assign_certs (\n        v_ipu_code            IN NUMBER,\n        v_wef_date            IN DATE,\n        v_wet_date            IN DATE,\n        v_polc_passenger_no   IN NUMBER,\n        v_pol_add_edit           VARCHAR2,\n        v_tonnage                VARCHAR2 DEFAULT NULL)\n    IS\n        v_add_edit              VARCHAR2 (1);\n        v_ct_code               NUMBER;\n        v_ipu_id                NUMBER;\n        v_cer_cnt               NUMBER;\n        v_error                 VARCHAR2 (200);\n        v_scl_code              NUMBER;\n        v_covt_code             NUMBER;\n        v_curr_cert_wet         DATE;\n        v_cover_suspended       VARCHAR2 (3);\n        v_polc_tonnage          NUMBER;\n        v_polc_pll              NUMBER;\n        v_depend                VARCHAR (1);\n        v_pass                  NUMBER;\n        v_pro_code              NUMBER;\n        v_scr_name              VARCHAR2 (50);\n        v_pol_regional_endors   VARCHAR (1);\n    /*v_pol_regional_endors flag introduced to manage regional certificates GIS-12169*/\n    BEGIN\n        BEGIN\n            SELECT DISTINCT pol_pro_code, pol_regional_endors\n              INTO v_pro_code, v_pol_regional_endors\n              FROM gin_policies, gin_insured_property_unds\n             WHERE pol_batch_no = ipu_pol_batch_no AND ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting risk product details...');\n        END;",
        "reinstate_section": "PROCEDURE reinstate_section (v_pol_batch_no          NUMBER,\n                                 v_ipu_code       IN     NUMBER,\n                                 v_date                  DATE,\n                                 v_user           IN     VARCHAR2,\n                                 v_rein_amt       IN     NUMBER,\n                                 v_dr_no             OUT NUMBER)\n    IS\n        v_cnt              NUMBER;\n        v_new_ipu_code     NUMBER;\n        v_new_polin_code   NUMBER;\n        v_exp_flag         VARCHAR2 (2);\n        v_open_cover       VARCHAR2 (2);\n        v_trans_no         NUMBER;\n        v_end_no           VARCHAR2 (45);\n        v_batchno          NUMBER;\n        v_prev_batch_no    NUMBER;\n        v_web_result       VARCHAR2 (50);\n        vexceptions        VARCHAR2 (50);\n        v_pol_rec          web_pol_tab := web_pol_tab ();\n        r_no               NUMBER;\n        v_status           VARCHAR2 (100);\n        v_itb_code         NUMBER;\n\n        CURSOR pol_cur IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n\n        CURSOR new_pol_cur (v_batchno NUMBER)\n        IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_batchno;\n\n        CURSOR exceptions_cur (v_batchno NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_exceptions\n             WHERE gpe_pol_batch_no = v_batchno;\n\n        v_pol_no           VARCHAR2 (40);\n        v_new_pol_batch    NUMBER;\n    --AND NVL(PIL_EXPIRED,'N') = 'N';\n    --AND PIL_SECT_CODE=v_sect_code;\n    BEGIN\n        -- RAISE_APPLICATION_ERROR(-20001,'HERE');\n        SELECT COUNT (1)\n          INTO v_cnt\n          FROM gin_policies\n         WHERE     pol_policy_no = (SELECT pol_policy_no\n                                      FROM gin_policies\n                                     WHERE pol_batch_no = v_pol_batch_no)\n               AND pol_authosrised = 'N';\n\n        SELECT pol_batch_no\n          INTO v_prev_batch_no\n          FROM gin_policies\n         WHERE     pol_policy_no = (SELECT pol_policy_no\n                                      FROM gin_policies\n                                     WHERE pol_batch_no = v_pol_batch_no)\n               AND pol_current_status = 'A';\n\n        SELECT    TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n               || gin_itb_code_seq.NEXTVAL\n          INTO v_itb_code\n          FROM DUAL;\n\n        IF v_prev_batch_no IS NULL\n        THEN\n            raise_error ('An error Occured while reinstating .the policy..');\n        END IF;\n\n        IF NVL (v_cnt, 0) > 0\n        THEN\n            raise_error (\n                'There are unauthorised transactions on this policy,Reinstatement could not be completed');\n        END IF;\n\n        FOR pol IN pol_cur\n        LOOP\n            r_no := 1;\n            v_pol_rec := web_pol_tab ();\n            v_pol_rec.EXTEND (r_no);\n            v_pol_rec (r_no) :=\n                web_pol_rec (NULL,\n                             NULL,                              --POL_ENDOS_NO\n                             v_prev_batch_no,\n                             NULL,                   -- POL_AGNT_AGENT_CODE -,\n                             NULL,             --          POL_AGNT_SHT_DESC ,\n                             NULL,                 --          POL_BIND_CODE ,\n                             NULL,                    --          POL_WEF_DT ,\n                             NULL,                    --          POL_WET_DT ,\n                             NULL,                    --          POL_STATUS ,\n                             NULL,                  --          POL_CUR_CODE ,\n                             NULL,               --          POL_POLICY_TYPE ,\n                             NULL,                  --          POL_BRN_CODE ,\n                             NULL,                  --          POL_CUR_RATE ,\n                             NULL,               --          POL_COINSURANCE ,\n                             NULL,           --          POL_COINSURE_LEADER ,\n                             NULL,                --          POL_CUR_SYMBOL ,\n                             NULL,              --          POL_BRN_SHT_DESC ,\n                             NULL,                  --          POL_PRP_CODE ,\n                             NULL,              --          POL_PRP_SHT_DESC ,\n                             NULL,                  --          POL_PRO_CODE ,\n                             NULL,                  --          POL_YOUR_REF ,\n                             NULL,  --          POL_PROP_HOLDING_CO_PRP_CODE ,\n                             NULL,           --          POL_OTH_INT_PARTIES ,\n                             NULL,              --          POL_PRO_SHT_DESC ,\n                             NULL,             --          POL_BINDER_POLICY ,\n                             NULL,         --          POL_COINSURANCE_SHARE ,\n                             NULL,        --          POL_RI_AGENT_COMM_RATE ,\n                             NULL,          --          POL_RI_AGNT_SHT_DESC ,\n                             NULL,        --          POL_RI_AGNT_AGENT_CODE ,\n                             NULL,                --          POL_POLICY_DOC ,\n                             NULL,        --          POL_COMMISSION_ALLOWED ,\n                             NULL,                 --          POL_RENEWABLE ,\n                             NULL,               --          POL_SHORT_PERIOD,\n                             'EN',\n                             NULL,               --          POL_ACTION_TYPE ,\n                             pol.pol_policy_no, --          POL_GIS_POLICY_NO ,\n                             SYSDATE,\n                             NULL,                     -- POL_EXTEND_TO_DATE ,\n                             'A',\n                             NULL,          --          POL_INTERNAL_COMMENTS,\n                             NULL,                --          POL_INTRO_CODE ,\n                             NULL,                    --          POL_SOURCE ,\n                             NULL,        --          POL_CHEQUE_REQUISITION ,\n                             NULL,                  --          POL_COIN_FEE ,\n                             NULL,                 --          POL_BDIV_CODE ,\n                             NULL,            --          POL_CURR_RATE_TYPE ,\n                             NULL,                 --          POL_PMOD_CODE ,\n                             NULL,                 --          POL_SERIAL_NO ,\n                             NULL,                --          POL_COIN_GROSS ,\n                             NULL,              --          POL_SUB_AGN_CODE ,\n                             NULL,         --          POL_SUB_AGNT_SHT_DESC ,\n                             NULL,      --          POL_CLIENT_POLICY_NUMBER ,\n                             NULL,                  --          POL_AGA_CODE ,\n                             NULL,                 --          POL_CLNA_CODE ,\n                             NULL,              --          POL_SUB_AGA_CODE ,\n                             NULL,      --          POL_COIN_LEADER_COMBINED ,\n                             NULL,          --          POL_DECLARATION_TYPE ,\n                             NULL,           --          POL_MED_POLICY_TYPE ,\n                             NULL,           --          POL_FREQ_OF_PAYMENT ,\n                             NULL,             --          POL_FEE_ADMISSIBLE,\n                             NULL,                --          QUOT_CLNT_TYPE ,\n                             NULL,                  --          QUOT_PRS_CODE,\n                             NULL,             --          POL_MKTR_AGN_CODE ,\n                             'N',\n                             NULL,                        --POL_OLD_BATCH_NO ,\n                             NULL,                         --POL_POP_TAXES   ,\n                             'N',\n                             NULL,                    --          POL_LOADED ,\n                             NULL,                   --          POL_COMMENTS,\n                             NULL,     --          POL_BUSSINESS_GROWTH_TYPE ,\n                             NULL,                 --          POL_SUBAGENT  ,\n                             NULL,           --          POL_IPF_NOF_INSTALS ,\n                             NULL,                  --          POL_COAGENT  ,\n                             NULL,          --          POL_COAGENT_MAIN_PCT ,\n                             NULL,            --          POL_AGN_DISCOUNTED ,\n                             NULL,            --          POL_AGN_DISC_TYPE  ,\n                             NULL,              --          POL_AGN_DISCOUNT ,\n                             NULL,             --          POL_PIP_PF_CODE   ,\n                             NULL,            --          POL_NO_INSTALLMENT ,\n                             NULL,\n                             NULL,        --          POL_IPF_DOWN_PYMT_TYPE ,\n                             NULL,         --          POL_IPF_DOWN_PYMT_AMT ,\n                             NULL,           --          POL_IPF_INTEREST_RATE\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,                           --POL OPEN POLICY\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,                       --POL_INTERFACE_TYPE,\n                             NULL,               --POL_CHECKOFF_AGNT_SHT_DESC,\n                             NULL,                   --POL_CHECKOFF_AGNT_CODE,\n                             NULL,                   --POL_PYMT_FACI_AGNT_CODE\n                             NULL,                         --POL_OLD_POLICY_NO\n                             NULL,                             --POL_OLD_AGENT\n                             NULL,                           --POL_INSTLMT_DAY\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             pol.pol_admin_fee_allowed,\n                             pol.pol_cashback_appl,\n                             pol.pol_uw_only,\n                             pol.pol_debiting_type,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL,\n                             NULL);\n        END LOOP;\n\n        BEGIN\n            gin_policies_prc (v_pol_no,\n                              v_pol_rec,\n                              NULL,\n                              v_new_pol_batch,\n                              v_user);\n\n            UPDATE gin_policies\n               SET pol_commission_allowed = 'N'\n             WHERE pol_batch_no = v_new_pol_batch;\n\n            --         FOR i IN new_pol_cur (v_new_pol_batch)\n            --         LOOP\n            --            BEGIN\n            --               pop_taxes (i.pol_policy_no,\n            --                          i.pol_ren_endos_no,\n            --                          v_new_pol_batch,\n            --                          i.pol_pro_code,\n            --                          i.pol_binder_policy,\n            --                          'RE'\n            --                         );\n            --            EXCEPTION\n            --               WHEN OTHERS\n            --               THEN\n            --                  raise_error ('ERROR POPULATING TAXES..');\n            --            END;",
        "delete_risk_section": "PROCEDURE delete_risk_section (v_pil_code   IN NUMBER,\n                                   v_batch_no   IN NUMBER)\n    IS\n        v_pol_binder          VARCHAR2 (2);\n        v_bindr_del_allowed   VARCHAR2 (10);\n    -- REMEMBER TO HANLDE BINDERS. WE DONT DELETE BINDER SECTIONS SOLOMON 05/07/2010\n    BEGIN\n        --RAISE_ERROR('v_pil_code'||v_pil_code);\n        BEGIN\n            SELECT pol_binder_policy\n              INTO v_pol_binder\n              FROM gin_policies\n             WHERE pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder..3..');\n        END;",
        "delete_ren_risk_section": "PROCEDURE delete_ren_risk_section (v_pil_code   IN NUMBER,\n                                       v_batch_no   IN NUMBER DEFAULT NULL)\n    IS\n    BEGIN\n        DELETE gin_ren_policy_insured_limits\n         WHERE pil_code = v_pil_code;\n    END;",
        "delete_coinsurer_agent": "PROCEDURE delete_coinsurer_agent (v_batch_no   IN NUMBER,\n                                      v_agn_code   IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_coinsurers\n         WHERE     coin_agnt_agent_code = v_agn_code\n               AND coin_pol_batch_no = v_batch_no;\n    END;",
        "delete_ren_coinsurer_agent": "PROCEDURE delete_ren_coinsurer_agent (v_batch_no   IN NUMBER,\n                                          v_agn_code   IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_ren_coinsurers\n         WHERE     coin_agnt_agent_code = v_agn_code\n               AND coin_pol_batch_no = v_batch_no;\n    END;",
        "update_ren_insured_details": "PROCEDURE update_ren_insured_details (v_polin_no   IN NUMBER,\n                                          v_pip_code   IN NUMBER)\n    IS\n    BEGIN\n        UPDATE gin_ren_policy_insureds\n           SET polin_interested_parties =\n                   NVL (v_pip_code, polin_interested_parties)\n         WHERE polin_code = v_polin_no;\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error ('error updating insured details....');\n    END;",
        "update_insured_details": "PROCEDURE update_insured_details (v_polin_no   IN NUMBER,\n                                      v_pip_code   IN NUMBER)\n    IS\n    BEGIN\n        UPDATE gin_policy_insureds\n           SET polin_interested_parties =\n                   NVL (v_pip_code, polin_interested_parties)\n         WHERE polin_code = v_polin_no;\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error ('error updating insured details....');\n    END;",
        "update_coinsurance_share": "PROCEDURE update_coinsurance_share (\n        v_pol_batch_no   IN NUMBER,\n        v_leader         IN VARCHAR2,\n        v_share          IN NUMBER,\n        v_fee            IN NUMBER,\n        v_fac_appl       IN VARCHAR2 DEFAULT 'N',\n        v_fac_pcnt       IN NUMBER DEFAULT NULL)\n    IS\n        v_cnt   NUMBER;\n    BEGIN\n        IF NVL (v_leader, 'N') = 'Y'\n        THEN\n            BEGIN\n                SELECT COUNT (*)\n                  INTO v_cnt\n                  FROM gin_coinsurers\n                 WHERE     coin_pol_batch_no = v_pol_batch_no\n                       AND NVL (coin_lead, 'N') = 'Y';\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    v_cnt := 0;\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error fetching the existing coinsurers...');\n            END;",
        "update_ren_coinsurance_share": "PROCEDURE update_ren_coinsurance_share (\n        v_pol_batch_no   IN NUMBER,\n        v_leader         IN VARCHAR2,\n        v_share          IN NUMBER,\n        v_fee            IN NUMBER,\n        v_fac_appl       IN VARCHAR2 DEFAULT 'N',\n        v_fac_pcnt       IN NUMBER DEFAULT NULL)\n    IS\n        v_cnt   NUMBER;\n    BEGIN\n        IF NVL (v_leader, 'N') = 'Y'\n        THEN\n            BEGIN\n                SELECT COUNT (*)\n                  INTO v_cnt\n                  FROM gin_ren_coinsurers\n                 WHERE     coin_pol_batch_no = v_pol_batch_no\n                       AND NVL (coin_lead, 'N') = 'Y';\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    v_cnt := 0;\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error fetching the existing coinsurers...');\n            END;",
        "pop_single_clauses": "PROCEDURE pop_single_clauses (v_pol_policy_no   IN VARCHAR2,\n                                  v_pol_endos_no    IN VARCHAR2,\n                                  v_cls_code        IN VARCHAR2,\n                                  v_pol_batch_no    IN NUMBER,\n                                  v_pro_code        IN NUMBER)\n    IS\n        v_clause   CLOB;\n        v_cnt      NUMBER;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code = v_cls_code\n                   AND ROWNUM = 1\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no);\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            BEGIN\n                SELECT COUNT (1)\n                  INTO v_cnt\n                  FROM gin_policy_lvl_clauses\n                 WHERE     plcl_sbcl_cls_code = cls.sbcl_cls_code\n                       AND plcl_pol_batch_no = v_pol_batch_no;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    NULL;\n            END;",
        "edit_pol_clause": "PROCEDURE edit_pol_clause (\n        v_plcl_code        IN NUMBER,\n        v_pol_code         IN NUMBER,\n        v_clause           IN gin_policy_lvl_clauses.plcl_clause%TYPE,\n        v_clause_heading   IN VARCHAR2)\n    IS\n    BEGIN\n        IF tqc_parameters_pkg.get_org_type (37) NOT IN ('INS')\n        THEN\n            UPDATE gin_policy_lvl_clauses\n               SET plcl_clause = v_clause,              --NVL(null, QC_CLAUSE)\n                                           plcl_heading = v_clause_heading\n             WHERE     plcl_sbcl_cls_code = v_plcl_code\n                   AND plcl_pol_batch_no = v_pol_code;\n        ELSE\n            UPDATE gin_policy_lvl_clauses\n               SET plcl_clause = v_clause, plcl_heading = v_clause_heading --NVL(null, QC_CLAUSE)\n             WHERE     plcl_sbcl_cls_code = v_plcl_code\n                   AND plcl_pol_batch_no = v_pol_code;\n        END IF;\n    END;",
        "del_pol_clause": "PROCEDURE del_pol_clause (v_plcl_code IN NUMBER, v_pol_code IN NUMBER)\n    IS\n        v_cnt                NUMBER;\n        v_count              NUMBER;\n        v_trans_no           NUMBER;\n        v_trans_code         VARCHAR2 (5);\n        v_del_mand_clauses   VARCHAR2 (1) := 'N';\n    BEGIN\n        BEGIN\n            v_del_mand_clauses :=\n                gin_parameters_pkg.get_param_varchar ('DEL_MANDATORY_CLAUSE');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_del_mand_clauses := 'N';\n        END;",
        "del_pol_cover_type_clauses": "PROCEDURE del_pol_cover_type_clauses (v_batch_no    IN NUMBER,\n                                          v_covt_code   IN NUMBER)\n    IS\n    BEGIN\n        --raise_error(v_batch_no||'='||v_covt_code);\n        DELETE gin_policy_lvl_clauses\n         WHERE     plcl_pol_batch_no = v_batch_no\n               AND plcl_sbcl_cls_code IN\n                       (SELECT scvtmc_cls_code\n                          FROM gin_scl_cvt_mand_clauses\n                         WHERE scvtmc_sclcovt_code = v_covt_code);\n\n        DELETE gin_policy_subclass_clauses\n         WHERE     poscl_pol_batch_no = v_batch_no\n               AND poscl_cls_code IN\n                       (SELECT scvtmc_cls_code\n                          FROM gin_scl_cvt_mand_clauses\n                         WHERE scvtmc_sclcovt_code = v_covt_code);\n    END;",
        "pop_ren_single_clauses": "PROCEDURE pop_ren_single_clauses (v_pol_policy_no   IN VARCHAR2,\n                                      v_pol_endos_no    IN VARCHAR2,\n                                      v_cls_code        IN VARCHAR2,\n                                      v_pol_batch_no    IN NUMBER,\n                                      v_pro_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code = v_cls_code\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_ren_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND sbcl_scl_code IN\n                           (SELECT DISTINCT ipu_sec_scl_code\n                              FROM gin_ren_insured_property_unds\n                             WHERE ipu_pol_batch_no = v_pol_batch_no);\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_ren_policy_lvl_clauses (plcl_sbcl_cls_code,\n                                                    plcl_sbcl_scl_code,\n                                                    plcl_pro_sht_desc,\n                                                    plcl_pro_code,\n                                                    plcl_pol_policy_no,\n                                                    plcl_pol_ren_endos_no,\n                                                    plcl_pol_batch_no,\n                                                    plcl_sbcl_cls_sht_desc,\n                                                    plcl_cls_type, --PLCL_CLAUSE,\n                                                    plcl_cls_editable,\n                                                    plcl_new,\n                                                    plcl_header,\n                                                    plcl_rownum,\n                                                    plcl_product_appl,\n                                                    plcl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.clp_scl_code,\n                         cls.clp_pro_sht_desc,\n                         cls.clp_pro_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         cls.sbcl_cls_sht_desc,\n                         cls.cls_type,                          --PLCL_CLAUSE,\n                         cls.cls_editable,\n                         'Y',\n                         NULL,\n                         NULL,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "edit_ren_pol_clause": "PROCEDURE edit_ren_pol_clause (v_plcl_code        IN NUMBER,\n                                   v_pol_code         IN NUMBER,\n                                   v_clause           IN VARCHAR2,\n                                   v_clause_heading   IN VARCHAR2)\n    IS\n    BEGIN\n        UPDATE gin_ren_policy_lvl_clauses\n           SET plcl_clause = v_clause, plcl_heading = v_clause_heading --NVL(null, QC_CLAUSE)\n         WHERE     plcl_sbcl_cls_code = v_plcl_code\n               AND plcl_pol_batch_no = v_pol_code;\n    END;",
        "del_ren_pol_clause": "PROCEDURE del_ren_pol_clause (v_plcl_code   IN NUMBER,\n                                  v_pol_code    IN NUMBER)\n    IS\n        v_cnt          NUMBER;\n        v_count        NUMBER;\n        v_trans_no     NUMBER;\n        v_trans_code   VARCHAR2 (5);\n    BEGIN\n        BEGIN\n            SELECT ggt_trans_no, ggt_btr_trans_code\n              INTO v_trans_no, v_trans_code\n              FROM gin_gis_transactions\n             WHERE ggt_pol_batch_no = v_pol_code;\n\n            SELECT COUNT (1)\n              INTO v_cnt\n              FROM gin_subcl_clauses\n             WHERE sbcl_cls_code = v_plcl_code;\n\n            SELECT COUNT (1)\n              INTO v_count\n              FROM gin_scl_cvt_mand_clauses\n             WHERE scvtmc_cls_code = v_plcl_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_cnt := 0;\n                v_count := 0;\n            WHEN OTHERS\n            THEN\n                v_cnt := 0;\n                v_count := 0;\n        END;",
        "insert_certificate_charge": "PROCEDURE insert_certificate_charge (\n        v_pol_policy_no   IN VARCHAR2,\n        v_pol_endos_no    IN VARCHAR2,\n        v_pol_batch_no    IN NUMBER,\n        v_pro_code        IN NUMBER,\n        v_pol_binder      IN VARCHAR2 DEFAULT 'N')\n    IS\n        v_cert_charge      VARCHAR2 (5);\n        v_cert_tran_code   VARCHAR2 (15);\n        v_tax_type         VARCHAR2 (10);\n        v_cnt              NUMBER;\n        v_taxr_rate        NUMBER;\n    BEGIN\n        v_cert_charge :=\n            gin_parameters_pkg.get_param_varchar ('CERTIFICATE_CHARGE_ON_EN');\n        DBMS_OUTPUT.put_line ('v_cert_charge' || v_cert_charge);\n\n        IF NVL (v_cert_charge, 'N') = 'Y'\n        THEN\n            v_cert_tran_code :=\n                gin_parameters_pkg.get_param_varchar (\n                    'CERTIFICATE_CHARGE_TRAN_CODE');\n            DBMS_OUTPUT.put_line ('v_cert_tran_code' || v_cert_tran_code);\n\n            IF v_cert_tran_code IS NOT NULL\n            THEN\n                BEGIN\n                    SELECT trnt_type, taxr_rate\n                      INTO v_tax_type, v_taxr_rate\n                      FROM gin_taxes_types_view\n                     WHERE taxr_trnt_code = v_cert_tran_code;\n                EXCEPTION\n                    WHEN NO_DATA_FOUND\n                    THEN\n                        raise_error (\n                               'Certificate charge code '\n                            || v_cert_tran_code\n                            || ' not defined in setups..');\n                    WHEN TOO_MANY_ROWS\n                    THEN\n                        raise_error (\n                               'More than one Certificate charge code '\n                            || v_cert_tran_code\n                            || '  defined in setups..');\n                END;",
        "pop_single_taxes": "PROCEDURE pop_single_taxes (v_pol_policy_no    IN VARCHAR2,\n                                v_pol_endos_no     IN VARCHAR2,\n                                v_pol_batch_no     IN NUMBER,\n                                v_pro_code         IN NUMBER,\n                                v_pol_binder       IN VARCHAR2 DEFAULT 'N',\n                                v_taxr_trnt_code   IN VARCHAR2,\n                                v_tax_type         IN VARCHAR2,\n                                v_trans_lvl        IN VARCHAR2,\n                                v_comp_lvl         IN VARCHAR2,\n                                v_rate             IN NUMBER,\n                                v_amt              IN NUMBER,\n                                v_add_edit         IN VARCHAR2,\n                                v_override_rate    IN VARCHAR2 DEFAULT 'N')\n    IS\n        v_pol_policy_type               VARCHAR2 (1);\n        v_allowsdonfacrein_param        VARCHAR2 (1);\n        v_allowsdoncoinfollower_param   VARCHAR2 (1);\n        v_pol_coinsurance               VARCHAR2 (1);\n        v_pol_coinsure_leader           VARCHAR2 (1);\n\n        CURSOR sub_class IS\n            SELECT ipu_sec_scl_code\n              FROM gin_insured_property_unds\n             WHERE ipu_pol_batch_no = v_pol_batch_no;\n\n        CURSOR taxes (v_scl_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN\n                               (SELECT clp_scl_code\n                                  FROM gin_product_sub_classes\n                                 WHERE     clp_pro_code = v_pro_code\n                                       AND clp_scl_code = v_scl_code))\n                   --AND TRNT_MANDATORY = 'Y'\n                   --AND TRNT_TYPE IN ('UTX','SD','UTL','EX','PHFUND')\n                   AND taxr_trnt_code = v_taxr_trnt_code\n                   AND taxr_trnt_code NOT IN\n                           (SELECT ptx_trac_trnt_code\n                              FROM gin_policy_taxes\n                             WHERE ptx_pol_batch_no = v_pol_batch_no);\n\n        CURSOR edit_taxes (v_scl_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN\n                               (SELECT clp_scl_code\n                                  FROM gin_product_sub_classes\n                                 WHERE     clp_pro_code = v_pro_code\n                                       AND clp_scl_code = v_scl_code))\n                   AND taxr_trnt_code = v_taxr_trnt_code;\n    BEGIN\n        BEGIN\n            SELECT pol_policy_type, pol_coinsurance, pol_coinsure_leader\n              INTO v_pol_policy_type,\n                   v_pol_coinsurance,\n                   v_pol_coinsure_leader\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error Checking the policy ...');\n        END;",
        "pop_ren_single_taxes": "PROCEDURE pop_ren_single_taxes (\n        v_pol_policy_no    IN VARCHAR2,\n        v_pol_endos_no     IN VARCHAR2,\n        v_pol_batch_no     IN NUMBER,\n        v_pro_code         IN NUMBER,\n        v_pol_binder       IN VARCHAR2 DEFAULT 'N',\n        v_taxr_trnt_code   IN VARCHAR2,\n        v_tax_type         IN VARCHAR2,\n        v_trans_lvl        IN VARCHAR2,\n        v_comp_lvl         IN VARCHAR2,\n        v_rate             IN NUMBER,\n        v_amt              IN NUMBER,\n        v_add_edit         IN VARCHAR2,\n        v_override_rate    IN VARCHAR2 DEFAULT 'N')\n    IS\n        CURSOR taxes IS\n            SELECT *\n              FROM gin_taxes_types_view\n             WHERE     (   scl_code IS NULL\n                        OR scl_code IN (SELECT clp_scl_code\n                                          FROM gin_product_sub_classes\n                                         WHERE clp_pro_code = v_pro_code))\n                   --AND TRNT_MANDATORY = 'Y'\n                   --AND TRNT_TYPE IN ('UTX','SD','UTL','EX','PHFUND')\n                   AND taxr_trnt_code = v_taxr_trnt_code;\n    /*AND taxr_trnt_code NOT IN\n        (SELECT ptx_trac_trnt_code\n           FROM gin_ren_policy_taxes\n          WHERE ptx_pol_batch_no = v_pol_batch_no)*/\n    BEGIN\n        FOR taxes_rec IN taxes\n        LOOP\n            IF v_add_edit = 'A'\n            THEN\n                IF NOT (    taxes_rec.trnt_type = 'SD'\n                        AND NVL (v_pol_binder, 'N') = 'Y')\n                THEN\n                    BEGIN\n                        INSERT INTO gin_ren_policy_taxes (\n                                        ptx_trac_scl_code,\n                                        ptx_trac_trnt_code,\n                                        ptx_pol_policy_no,\n                                        ptx_pol_ren_endos_no,\n                                        ptx_pol_batch_no,\n                                        ptx_rate,\n                                        ptx_amount,\n                                        ptx_tl_lvl_code,\n                                        ptx_rate_type,\n                                        ptx_rate_desc,\n                                        ptx_endos_diff_amt,\n                                        ptx_tax_type,\n                                        ptx_risk_pol_level,\n                                        ptx_override,\n                                        ptx_override_amt)\n                             VALUES (taxes_rec.taxr_scl_code,\n                                     taxes_rec.trnt_code,\n                                     v_pol_policy_no,\n                                     v_pol_endos_no,\n                                     v_pol_batch_no,\n                                     v_rate,\n                                     v_amt,\n                                     v_trans_lvl,\n                                     taxes_rec.taxr_rate_type,\n                                     taxes_rec.taxr_rate_desc,\n                                     NULL,\n                                     v_tax_type,\n                                     v_comp_lvl,\n                                     v_override_rate,\n                                     v_amt);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            raise_error ('Error applying taxes..');\n                    END;",
        "edit_pol_taxes": "PROCEDURE edit_pol_taxes (v_trnt_code   IN VARCHAR2,\n                              v_pol_code    IN NUMBER,\n                              v_tax_type    IN VARCHAR2,\n                              v_trans_lvl   IN VARCHAR2,\n                              v_comp_lvl    IN VARCHAR2,\n                              v_rate        IN NUMBER,\n                              v_amt         IN NUMBER)\n    IS\n    BEGIN\n        UPDATE gin_policy_taxes\n           SET ptx_rate = NVL (v_rate, ptx_rate),\n               ptx_amount = NVL (v_amt, ptx_amount),\n               ptx_tl_lvl_code = NVL (v_trans_lvl, ptx_tl_lvl_code),\n               ptx_tax_type = NVL (v_tax_type, ptx_tax_type),\n               ptx_risk_pol_level = NVL (v_comp_lvl, ptx_risk_pol_level)\n         WHERE     ptx_trac_trnt_code = v_trnt_code\n               AND ptx_pol_batch_no = v_pol_code;\n    END;",
        "del_pol_taxes": "PROCEDURE del_pol_taxes (v_trnt_code IN VARCHAR2, v_pol_code IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_policy_taxes\n         WHERE     ptx_trac_trnt_code = v_trnt_code\n               AND ptx_pol_batch_no = v_pol_code;\n    END;",
        "del_ren_pol_taxes": "PROCEDURE del_ren_pol_taxes (v_trnt_code   IN VARCHAR2,\n                                 v_pol_code    IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_ren_policy_taxes\n         WHERE     ptx_trac_trnt_code = v_trnt_code\n               AND ptx_pol_batch_no = v_pol_code;\n    END;",
        "update_policy_excesses": "PROCEDURE update_policy_excesses (\n        v_pspr_code                     gin_policy_section_perils.pspr_code%TYPE,\n        v_action                        VARCHAR2,\n        v_pspr_pol_batch_no             gin_policy_section_perils.pspr_pol_batch_no%TYPE,\n        v_sspr_code                     gin_policy_section_perils.pspr_sspr_code%TYPE,\n        v_pspr_peril_limit              gin_policy_section_perils.pspr_peril_limit%TYPE,\n        v_pspr_peril_type               gin_policy_section_perils.pspr_peril_type%TYPE,\n        v_pspr_si_or_limit              gin_policy_section_perils.pspr_si_or_limit%TYPE,\n        v_pspr_excess_type              gin_policy_section_perils.pspr_excess_type%TYPE,\n        v_pspr_excess                   gin_policy_section_perils.pspr_excess%TYPE,\n        v_pspr_excess_min               gin_policy_section_perils.pspr_excess_min%TYPE,\n        v_pspr_excess_max               gin_policy_section_perils.pspr_excess_max%TYPE,\n        v_pspr_expire_on_claim          gin_policy_section_perils.pspr_expire_on_claim%TYPE,\n        v_pspr_person_limit             gin_policy_section_perils.pspr_person_limit%TYPE,\n        v_pspr_claim_limit              gin_policy_section_perils.pspr_claim_limit%TYPE,\n        v_pspr_desc                     gin_policy_section_perils.pspr_desc%TYPE,\n        v_pspr_tl_excess_type           gin_policy_section_perils.pspr_tl_excess_type%TYPE,\n        v_pspr_tl_excess                gin_policy_section_perils.pspr_tl_excess%TYPE,\n        v_pspr_tl_excess_min            gin_policy_section_perils.pspr_tl_excess_min%TYPE,\n        v_pspr_tl_excess_max            gin_policy_section_perils.pspr_tl_excess_max%TYPE,\n        v_pspr_pl_excess_type           gin_policy_section_perils.pspr_pl_excess_type%TYPE,\n        v_pspr_pl_excess                gin_policy_section_perils.pspr_pl_excess%TYPE,\n        v_pspr_pl_excess_min            gin_policy_section_perils.pspr_pl_excess_min%TYPE,\n        v_pspr_pl_excess_max            gin_policy_section_perils.pspr_pl_excess_max%TYPE,\n        v_prspr_salvage_pct             gin_pol_risk_section_perils.prspr_salvage_pct%TYPE,\n        v_prspr_claim_excess_type       gin_pol_risk_section_perils.prspr_claim_excess_type%TYPE,\n        v_prspr_claim_excess_min        gin_pol_risk_section_perils.prspr_claim_excess_min%TYPE,\n        v_prspr_claim_excess_max        gin_pol_risk_section_perils.prspr_claim_excess_max%TYPE,\n        v_prspr_depend_loss_type        gin_pol_risk_section_perils.prspr_depend_loss_type%TYPE,\n        v_prspr_ttd_ben_pcts            gin_pol_risk_section_perils.prspr_ttd_ben_pcts%TYPE,\n        v_pspr_ssprm_code               gin_policy_section_perils.pspr_ssprm_code%TYPE,\n        v_code                          NUMBER,\n        v_err                       OUT VARCHAR2)\n    IS                                             --GIN_POLICY_SECTION_PERILS\n        v_new_pspr_code        NUMBER;\n        v_pspr_scl_code        gin_policy_section_perils.pspr_scl_code%TYPE;\n        v_pspr_sect_code       gin_policy_section_perils.pspr_sect_code%TYPE;\n        v_pspr_sect_sht_desc   gin_policy_section_perils.pspr_sect_sht_desc%TYPE;\n        v_pspr_per_code        gin_policy_section_perils.pspr_per_code%TYPE;\n        v_pspr_per_sht_desc    gin_policy_section_perils.pspr_per_sht_desc%TYPE;\n        v_pspr_sec_code        gin_policy_section_perils.pspr_sec_code%TYPE;\n        v_pspr_bind_type       gin_policy_section_perils.pspr_bind_type%TYPE;\n        v_pspr_bind_code       gin_policy_section_perils.pspr_bind_code%TYPE;\n        v_pspr_mandatory       gin_policy_section_perils.pspr_mandatory%TYPE;\n        v_status               VARCHAR2 (200);\n        v_pol_loaded           VARCHAR2 (1);\n    BEGIN\n        BEGIN\n            --v_err:='test ' || v_sspr_code;\n            --return;\n            SELECT sspr_scl_code,\n                   ssprm_sect_code         sspr_sect_code,\n                   ssprm_sect_sht_desc     sspr_sect_sht_desc,\n                   sspr_per_code,\n                   sspr_per_sht_desc,\n                   ssprm_sec_code          sspr_sec_code,\n                   ssprm_bind_type         sspr_bind_type,\n                   ssprm_bind_code         sspr_bind_code,\n                   sspr_mandatory\n              INTO v_pspr_scl_code,\n                   v_pspr_sect_code,\n                   v_pspr_sect_sht_desc,\n                   v_pspr_per_code,\n                   v_pspr_per_sht_desc,\n                   v_pspr_sec_code,\n                   v_pspr_bind_type,\n                   v_pspr_bind_code,\n                   v_pspr_mandatory\n              FROM gin_subcl_sction_perils, gin_subcl_sction_perils_map\n             WHERE     sspr_code = v_sspr_code\n                   AND ssprm_sspr_code = sspr_code\n                   AND ssprm_code = v_pspr_ssprm_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_err :=\n                       'Perils / Excesses have NOT been defined for the subclass'\n                    || v_pspr_scl_code\n                    || '..'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n            WHEN OTHERS\n            THEN\n                v_err :=\n                       'Error on Perils / Excesses for subclass'\n                    || v_pspr_scl_code\n                    || ' ...'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n        END;",
        "update_ren_policy_excesses": "PROCEDURE update_ren_policy_excesses (\n        v_pspr_code                     gin_policy_section_perils.pspr_code%TYPE,\n        v_action                        VARCHAR2,\n        v_pspr_pol_batch_no             gin_policy_section_perils.pspr_pol_batch_no%TYPE,\n        v_sspr_code                     gin_policy_section_perils.pspr_sspr_code%TYPE,\n        v_pspr_peril_limit              gin_policy_section_perils.pspr_peril_limit%TYPE,\n        v_pspr_peril_type               gin_policy_section_perils.pspr_peril_type%TYPE,\n        v_pspr_si_or_limit              gin_policy_section_perils.pspr_si_or_limit%TYPE,\n        v_pspr_excess_type              gin_policy_section_perils.pspr_excess_type%TYPE,\n        v_pspr_excess                   gin_policy_section_perils.pspr_excess%TYPE,\n        v_pspr_excess_min               gin_policy_section_perils.pspr_excess_min%TYPE,\n        v_pspr_excess_max               gin_policy_section_perils.pspr_excess_max%TYPE,\n        v_pspr_expire_on_claim          gin_policy_section_perils.pspr_expire_on_claim%TYPE,\n        v_pspr_person_limit             gin_policy_section_perils.pspr_person_limit%TYPE,\n        v_pspr_claim_limit              gin_policy_section_perils.pspr_claim_limit%TYPE,\n        v_pspr_desc                     gin_policy_section_perils.pspr_desc%TYPE,\n        v_pspr_tl_excess_type           gin_policy_section_perils.pspr_tl_excess_type%TYPE,\n        v_pspr_tl_excess                gin_policy_section_perils.pspr_tl_excess%TYPE,\n        v_pspr_tl_excess_min            gin_policy_section_perils.pspr_tl_excess_min%TYPE,\n        v_pspr_tl_excess_max            gin_policy_section_perils.pspr_tl_excess_max%TYPE,\n        v_pspr_pl_excess_type           gin_policy_section_perils.pspr_pl_excess_type%TYPE,\n        v_pspr_pl_excess                gin_policy_section_perils.pspr_pl_excess%TYPE,\n        v_pspr_pl_excess_min            gin_policy_section_perils.pspr_pl_excess_min%TYPE,\n        v_pspr_pl_excess_max            gin_policy_section_perils.pspr_pl_excess_max%TYPE,\n        v_prspr_salvage_pct             gin_pol_risk_section_perils.prspr_salvage_pct%TYPE,\n        v_prspr_claim_excess_type       gin_pol_risk_section_perils.prspr_claim_excess_type%TYPE,\n        v_prspr_claim_excess_min        gin_pol_risk_section_perils.prspr_claim_excess_min%TYPE,\n        v_prspr_claim_excess_max        gin_pol_risk_section_perils.prspr_claim_excess_max%TYPE,\n        v_prspr_depend_loss_type        gin_pol_risk_section_perils.prspr_depend_loss_type%TYPE,\n        v_prspr_ttd_ben_pcts            gin_pol_risk_section_perils.prspr_ttd_ben_pcts%TYPE,\n        v_pspr_ssprm_code               gin_pol_risk_section_perils.prspr_ssprm_code%TYPE,\n        v_err                       OUT VARCHAR2)\n    IS                                             --GIN_POLICY_SECTION_PERILS\n        v_new_pspr_code        NUMBER;\n        v_pspr_scl_code        gin_policy_section_perils.pspr_scl_code%TYPE;\n        v_pspr_sect_code       gin_policy_section_perils.pspr_sect_code%TYPE;\n        v_pspr_sect_sht_desc   gin_policy_section_perils.pspr_sect_sht_desc%TYPE;\n        v_pspr_per_code        gin_policy_section_perils.pspr_per_code%TYPE;\n        v_pspr_per_sht_desc    gin_policy_section_perils.pspr_per_sht_desc%TYPE;\n        v_pspr_sec_code        gin_policy_section_perils.pspr_sec_code%TYPE;\n        v_pspr_bind_type       gin_policy_section_perils.pspr_bind_type%TYPE;\n        v_pspr_bind_code       gin_policy_section_perils.pspr_bind_code%TYPE;\n        v_pspr_mandatory       gin_policy_section_perils.pspr_mandatory%TYPE;\n        v_status               VARCHAR2 (200);\n        v_pol_loaded           VARCHAR2 (1);\n    BEGIN\n        BEGIN\n            --v_err:='test ' || v_sspr_code;\n            --return;\n            SELECT sspr_scl_code,\n                   ssprm_sect_code         sspr_sect_code,\n                   ssprm_sect_sht_desc     sspr_sect_sht_desc,\n                   sspr_per_code,\n                   sspr_per_sht_desc,\n                   ssprm_sec_code          sspr_sec_code,\n                   ssprm_bind_type         sspr_bind_type,\n                   ssprm_bind_code         sspr_bind_code,\n                   sspr_mandatory\n              INTO v_pspr_scl_code,\n                   v_pspr_sect_code,\n                   v_pspr_sect_sht_desc,\n                   v_pspr_per_code,\n                   v_pspr_per_sht_desc,\n                   v_pspr_sec_code,\n                   v_pspr_bind_type,\n                   v_pspr_bind_code,\n                   v_pspr_mandatory\n              FROM gin_subcl_sction_perils, gin_subcl_sction_perils_map\n             WHERE     sspr_code = v_sspr_code\n                   AND ssprm_sspr_code = sspr_code\n                   AND ssprm_code = v_pspr_ssprm_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_err :=\n                       'Perils / Excesses have NOT been defined for the subclass'\n                    || v_pspr_scl_code\n                    || '..'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n            WHEN OTHERS\n            THEN\n                v_err :=\n                       'Error on Perils / Excesses for subclass'\n                    || v_pspr_scl_code\n                    || ' ...'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n        END;",
        "update_risk_excesses": "PROCEDURE update_risk_excesses (\n        v_pspr_code                     gin_policy_section_perils.pspr_code%TYPE,\n        v_action                        VARCHAR2,\n        v_pspr_pol_batch_no             gin_policy_section_perils.pspr_pol_batch_no%TYPE,\n        v_sspr_code                     gin_policy_section_perils.pspr_sspr_code%TYPE,\n        v_pspr_peril_limit              gin_policy_section_perils.pspr_peril_limit%TYPE,\n        v_pspr_peril_type               gin_policy_section_perils.pspr_peril_type%TYPE,\n        v_pspr_si_or_limit              gin_policy_section_perils.pspr_si_or_limit%TYPE,\n        v_pspr_excess_type              gin_policy_section_perils.pspr_excess_type%TYPE,\n        v_pspr_excess                   gin_policy_section_perils.pspr_excess%TYPE,\n        v_pspr_excess_min               gin_policy_section_perils.pspr_excess_min%TYPE,\n        v_pspr_excess_max               gin_policy_section_perils.pspr_excess_max%TYPE,\n        v_pspr_expire_on_claim          gin_policy_section_perils.pspr_expire_on_claim%TYPE,\n        v_pspr_person_limit             gin_policy_section_perils.pspr_person_limit%TYPE,\n        v_pspr_claim_limit              gin_policy_section_perils.pspr_claim_limit%TYPE,\n        v_pspr_desc                     gin_policy_section_perils.pspr_desc%TYPE,\n        v_pspr_tl_excess_type           gin_policy_section_perils.pspr_tl_excess_type%TYPE,\n        v_pspr_tl_excess                gin_policy_section_perils.pspr_tl_excess%TYPE,\n        v_pspr_tl_excess_min            gin_policy_section_perils.pspr_tl_excess_min%TYPE,\n        v_pspr_tl_excess_max            gin_policy_section_perils.pspr_tl_excess_max%TYPE,\n        v_pspr_pl_excess_type           gin_policy_section_perils.pspr_pl_excess_type%TYPE,\n        v_pspr_pl_excess                gin_policy_section_perils.pspr_pl_excess%TYPE,\n        v_pspr_pl_excess_min            gin_policy_section_perils.pspr_pl_excess_min%TYPE,\n        v_pspr_pl_excess_max            gin_policy_section_perils.pspr_pl_excess_max%TYPE,\n        v_prspr_salvage_pct             gin_pol_risk_section_perils.prspr_salvage_pct%TYPE,\n        v_prspr_claim_excess_type       gin_pol_risk_section_perils.prspr_claim_excess_type%TYPE,\n        v_prspr_claim_excess_min        gin_pol_risk_section_perils.prspr_claim_excess_min%TYPE,\n        v_prspr_claim_excess_max        gin_pol_risk_section_perils.prspr_claim_excess_max%TYPE,\n        v_prspr_depend_loss_type        gin_pol_risk_section_perils.prspr_depend_loss_type%TYPE,\n        v_prspr_ttd_ben_pcts            gin_pol_risk_section_perils.prspr_ttd_ben_pcts%TYPE,\n        v_prspr_ssprm_code              gin_pol_risk_section_perils.prspr_ssprm_code%TYPE,\n        v_ipu_code                      NUMBER,\n        v_err                       OUT VARCHAR2)\n    IS                                             --GIN_POLICY_SECTION_PERILS\n        v_new_pspr_code        NUMBER;\n        v_pspr_scl_code        gin_policy_section_perils.pspr_scl_code%TYPE;\n        v_pspr_sect_code       gin_policy_section_perils.pspr_sect_code%TYPE;\n        v_pspr_sect_sht_desc   gin_policy_section_perils.pspr_sect_sht_desc%TYPE;\n        v_pspr_per_code        gin_policy_section_perils.pspr_per_code%TYPE;\n        v_pspr_per_sht_desc    gin_policy_section_perils.pspr_per_sht_desc%TYPE;\n        v_pspr_sec_code        gin_policy_section_perils.pspr_sec_code%TYPE;\n        v_pspr_bind_type       gin_policy_section_perils.pspr_bind_type%TYPE;\n        v_pspr_bind_code       gin_policy_section_perils.pspr_bind_code%TYPE;\n        v_pspr_mandatory       gin_policy_section_perils.pspr_mandatory%TYPE;\n        v_status               VARCHAR2 (200);\n        v_pol_loaded           VARCHAR2 (1);\n    BEGIN\n        BEGIN\n            --         v_err:='test ' || v_sspr_code;\n            --         return;\n            SELECT ssprm_scl_code          sspr_scl_code,\n                   ssprm_sect_code         sspr_sect_code,\n                   ssprm_sect_sht_desc     sspr_sect_sht_desc,\n                   sspr_per_code,\n                   sspr_per_sht_desc,\n                   ssprm_sec_code          sspr_sec_code,\n                   ssprm_bind_type         sspr_bind_type,\n                   ssprm_bind_code         sspr_bind_code,\n                   sspr_mandatory\n              INTO v_pspr_scl_code,\n                   v_pspr_sect_code,\n                   v_pspr_sect_sht_desc,\n                   v_pspr_per_code,\n                   v_pspr_per_sht_desc,\n                   v_pspr_sec_code,\n                   v_pspr_bind_type,\n                   v_pspr_bind_code,\n                   v_pspr_mandatory\n              FROM gin_subcl_sction_perils, gin_subcl_sction_perils_map\n             WHERE     sspr_code = v_sspr_code\n                   AND ssprm_sspr_code = sspr_code\n                   AND ssprm_code = v_prspr_ssprm_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_err :=\n                       'Perils / Excesses have NOT been defined for the subclass'\n                    || v_pspr_scl_code\n                    || '..'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n            WHEN OTHERS\n            THEN\n                v_err :=\n                       'Error on Perils / Excesses for subclass'\n                    || v_prspr_ssprm_code\n                    || ' ...'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n        END;",
        "update_ren_risk_excesses": "PROCEDURE update_ren_risk_excesses (\n        v_pspr_code                     gin_policy_section_perils.pspr_code%TYPE,\n        v_action                        VARCHAR2,\n        v_pspr_pol_batch_no             gin_policy_section_perils.pspr_pol_batch_no%TYPE,\n        v_sspr_code                     gin_policy_section_perils.pspr_sspr_code%TYPE,\n        v_pspr_peril_limit              gin_policy_section_perils.pspr_peril_limit%TYPE,\n        v_pspr_peril_type               gin_policy_section_perils.pspr_peril_type%TYPE,\n        v_pspr_si_or_limit              gin_policy_section_perils.pspr_si_or_limit%TYPE,\n        v_pspr_excess_type              gin_policy_section_perils.pspr_excess_type%TYPE,\n        v_pspr_excess                   gin_policy_section_perils.pspr_excess%TYPE,\n        v_pspr_excess_min               gin_policy_section_perils.pspr_excess_min%TYPE,\n        v_pspr_excess_max               gin_policy_section_perils.pspr_excess_max%TYPE,\n        v_pspr_expire_on_claim          gin_policy_section_perils.pspr_expire_on_claim%TYPE,\n        v_pspr_person_limit             gin_policy_section_perils.pspr_person_limit%TYPE,\n        v_pspr_claim_limit              gin_policy_section_perils.pspr_claim_limit%TYPE,\n        v_pspr_desc                     gin_policy_section_perils.pspr_desc%TYPE,\n        v_pspr_tl_excess_type           gin_policy_section_perils.pspr_tl_excess_type%TYPE,\n        v_pspr_tl_excess                gin_policy_section_perils.pspr_tl_excess%TYPE,\n        v_pspr_tl_excess_min            gin_policy_section_perils.pspr_tl_excess_min%TYPE,\n        v_pspr_tl_excess_max            gin_policy_section_perils.pspr_tl_excess_max%TYPE,\n        v_pspr_pl_excess_type           gin_policy_section_perils.pspr_pl_excess_type%TYPE,\n        v_pspr_pl_excess                gin_policy_section_perils.pspr_pl_excess%TYPE,\n        v_pspr_pl_excess_min            gin_policy_section_perils.pspr_pl_excess_min%TYPE,\n        v_pspr_pl_excess_max            gin_policy_section_perils.pspr_pl_excess_max%TYPE,\n        v_prspr_salvage_pct             gin_pol_risk_section_perils.prspr_salvage_pct%TYPE,\n        v_prspr_claim_excess_type       gin_pol_risk_section_perils.prspr_claim_excess_type%TYPE,\n        v_prspr_claim_excess_min        gin_pol_risk_section_perils.prspr_claim_excess_min%TYPE,\n        v_prspr_claim_excess_max        gin_pol_risk_section_perils.prspr_claim_excess_max%TYPE,\n        v_prspr_depend_loss_type        gin_pol_risk_section_perils.prspr_depend_loss_type%TYPE,\n        v_prspr_ttd_ben_pcts            gin_pol_risk_section_perils.prspr_ttd_ben_pcts%TYPE,\n        v_prspr_ssprm_code              gin_pol_risk_section_perils.prspr_ssprm_code%TYPE,\n        v_ipu_code                      NUMBER,\n        v_err                       OUT VARCHAR2)\n    IS                                             --GIN_POLICY_SECTION_PERILS\n        v_new_pspr_code        NUMBER;\n        v_pspr_scl_code        gin_policy_section_perils.pspr_scl_code%TYPE;\n        v_pspr_sect_code       gin_policy_section_perils.pspr_sect_code%TYPE;\n        v_pspr_sect_sht_desc   gin_policy_section_perils.pspr_sect_sht_desc%TYPE;\n        v_pspr_per_code        gin_policy_section_perils.pspr_per_code%TYPE;\n        v_pspr_per_sht_desc    gin_policy_section_perils.pspr_per_sht_desc%TYPE;\n        v_pspr_sec_code        gin_policy_section_perils.pspr_sec_code%TYPE;\n        v_pspr_bind_type       gin_policy_section_perils.pspr_bind_type%TYPE;\n        v_pspr_bind_code       gin_policy_section_perils.pspr_bind_code%TYPE;\n        v_pspr_mandatory       gin_policy_section_perils.pspr_mandatory%TYPE;\n        v_status               VARCHAR2 (200);\n        v_pol_loaded           VARCHAR2 (1);\n    BEGIN\n        BEGIN\n            SELECT sspr_scl_code,\n                   ssprm_sect_code         sspr_sect_code,\n                   ssprm_sect_sht_desc     sspr_sect_sht_desc,\n                   sspr_per_code,\n                   sspr_per_sht_desc,\n                   ssprm_sec_code          sspr_sec_code,\n                   ssprm_bind_type         sspr_bind_type,\n                   ssprm_bind_code         sspr_bind_code,\n                   sspr_mandatory\n              INTO v_pspr_scl_code,\n                   v_pspr_sect_code,\n                   v_pspr_sect_sht_desc,\n                   v_pspr_per_code,\n                   v_pspr_per_sht_desc,\n                   v_pspr_sec_code,\n                   v_pspr_bind_type,\n                   v_pspr_bind_code,\n                   v_pspr_mandatory\n              FROM gin_subcl_sction_perils, gin_subcl_sction_perils_map\n             WHERE     sspr_code = v_sspr_code\n                   AND ssprm_sspr_code = sspr_code\n                   AND ssprm_code = v_prspr_ssprm_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_err :=\n                       'Perils / Excesses have NOT been defined for the subclass'\n                    || v_pspr_scl_code\n                    || '..'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n            WHEN OTHERS\n            THEN\n                v_err :=\n                       'Error on Perils / Excesses for subclass'\n                    || v_pspr_scl_code\n                    || ' ...'\n                    || SQLERRM (SQLCODE);\n                RETURN;\n        END;",
        "update_facre_dtls": "PROCEDURE update_facre_dtls (\n        v_fid_code                 NUMBER,\n        v_action                   VARCHAR2,\n        v_fid_pol_batch_no         NUMBER,\n        v_pol_no                   VARCHAR2,\n        v_ren_endors_no            VARCHAR2,\n        v_ced_pol_no               gin_facre_in_dtls.fid_cede_comp_policy_no%TYPE,\n        v_si                       gin_facre_in_dtls.fid_sum_insured%TYPE,\n        v_gross_rate               gin_facre_in_dtls.fid_gross_rate%TYPE,\n        v_first_prem               gin_facre_in_dtls.fid_cede_comp_first_prem%TYPE,\n        v_ren_prem                 gin_facre_in_dtls.fid_cede_company_ren_prem%TYPE,\n        v_wef                      gin_facre_in_dtls.fid_wef%TYPE,\n        v_wet                      gin_facre_in_dtls.fid_wet%TYPE,\n        v_rein_terms               gin_facre_in_dtls.fid_rein_terms_from%TYPE,\n        v_rein_terms_to            gin_facre_in_dtls.fid_reins_term_to%TYPE,\n        v_gross_ret                gin_facre_in_dtls.fid_cede_comp_gross_ret%TYPE,\n        v_rein_amt                 gin_facre_in_dtls.fid_cede_comp_rein_amt%TYPE,\n        v_amt                      gin_facre_in_dtls.fid_amt_perc_sum_insured%TYPE,\n        v_sign_dt                  gin_facre_in_dtls.fid_cede_sign_dt%TYPE,\n        v_fid_primary_broker       gin_facre_in_dtls.fid_primary_broker%TYPE,\n        v_err                  OUT VARCHAR2)\n    IS\n        v_new_fid_code   NUMBER;\n        v_status         VARCHAR2 (10);\n    BEGIN\n        -- raise_error('v_si'||v_si);\n        BEGIN\n            SELECT pol_authosrised\n              INTO v_status\n              FROM gin_policies\n             WHERE pol_batch_no = v_fid_pol_batch_no;\n        END;",
        "update_ren_facre_dtls": "PROCEDURE update_ren_facre_dtls (\n        v_fid_code               NUMBER,\n        v_action                 VARCHAR2,\n        v_fid_pol_batch_no       NUMBER,\n        v_pol_no                 VARCHAR2,\n        v_ren_endors_no          VARCHAR2,\n        v_ced_pol_no             gin_facre_in_dtls.fid_cede_comp_policy_no%TYPE,\n        v_si                     gin_facre_in_dtls.fid_sum_insured%TYPE,\n        v_gross_rate             gin_facre_in_dtls.fid_gross_rate%TYPE,\n        v_first_prem             gin_facre_in_dtls.fid_cede_comp_first_prem%TYPE,\n        v_ren_prem               gin_facre_in_dtls.fid_cede_company_ren_prem%TYPE,\n        v_wef                    gin_facre_in_dtls.fid_wef%TYPE,\n        v_wet                    gin_facre_in_dtls.fid_wet%TYPE,\n        v_rein_terms             gin_facre_in_dtls.fid_rein_terms%TYPE,\n        v_rein_terms_to          gin_facre_in_dtls.fid_reins_term_to%TYPE,\n        v_gross_ret              gin_facre_in_dtls.fid_cede_comp_gross_ret%TYPE,\n        v_rein_amt               gin_facre_in_dtls.fid_cede_comp_rein_amt%TYPE,\n        v_amt                    gin_facre_in_dtls.fid_amt_perc_sum_insured%TYPE,\n        v_sign_dt                gin_facre_in_dtls.fid_cede_sign_dt%TYPE,\n        v_err                OUT VARCHAR2)\n    IS\n        v_new_fid_code   NUMBER;\n        v_status         VARCHAR2 (10);\n    BEGIN\n        BEGIN\n            SELECT pol_authosrised\n              INTO v_status\n              FROM gin_policies\n             WHERE pol_batch_no = v_fid_pol_batch_no;\n        END;",
        "pop_single_risk_clause": "PROCEDURE pop_single_risk_clause (v_pol_policy_no   IN VARCHAR2,\n                                      v_pol_endos_no    IN VARCHAR2,\n                                      v_cls_code        IN VARCHAR2,\n                                      v_pol_batch_no    IN NUMBER,\n                                      v_pro_code        IN NUMBER,\n                                      v_ipu_code        IN NUMBER)\n    IS\n        v_clause     CLOB;\n        v_scl_code   NUMBER;\n\n        CURSOR clause (v_sclcode NUMBER)\n        IS\n            SELECT DISTINCT\n                   cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND sbcl_scl_code = v_sclcode\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code = v_cls_code\n                   AND cls_code NOT IN\n                           (SELECT pocl_sbcl_cls_code\n                              FROM gin_policy_clauses\n                             WHERE     pocl_pol_batch_no = v_pol_batch_no\n                                   AND pocl_ipu_code = v_ipu_code);\n    BEGIN\n        BEGIN\n            SELECT ipu_sec_scl_code\n              INTO v_scl_code\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting Risk Sub class');\n        END;",
        "edit_risk_clause": "PROCEDURE edit_risk_clause (v_pocl_code   IN NUMBER,\n                                v_ipu_code    IN NUMBER,\n                                v_clause      IN VARCHAR2,\n                                v_heading     IN VARCHAR2)\n    IS\n    BEGIN\n        UPDATE gin_policy_clauses\n           SET pocl_clause = v_clause, pocl_heading = v_heading --NVL(null, QC_CLAUSE)\n         WHERE     pocl_sbcl_cls_code = v_pocl_code\n               AND pocl_ipu_code = v_ipu_code;\n    END;",
        "del_risk_clause": "PROCEDURE del_risk_clause (v_pocl_code IN NUMBER, v_ipu_code IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_policy_clauses\n         WHERE     pocl_sbcl_cls_code = v_pocl_code\n               AND pocl_ipu_code = v_ipu_code;\n    END;",
        "pop_ren_single_risk_clause": "PROCEDURE pop_ren_single_risk_clause (v_pol_policy_no   IN VARCHAR2,\n                                          v_pol_endos_no    IN VARCHAR2,\n                                          v_cls_code        IN VARCHAR2,\n                                          v_pol_batch_no    IN NUMBER,\n                                          v_pro_code        IN NUMBER,\n                                          v_ipu_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable,\n                   cls_wording\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND cls_code = v_cls_code\n                   AND cls_code NOT IN\n                           (SELECT pocl_sbcl_cls_code\n                              FROM gin_ren_policy_clauses\n                             WHERE pocl_pol_batch_no = v_pol_batch_no);\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_ren_policy_clauses (pocl_sbcl_cls_code,\n                                                pocl_cls_sht_desc,\n                                                pocl_sbcl_scl_code,\n                                                pocl_pol_policy_no,\n                                                pocl_pol_ren_endos_no,\n                                                pocl_pol_batch_no,\n                                                pocl_ipu_code,\n                                                plcl_cls_type,\n                                                pocl_clause,\n                                                pocl_cls_editable,\n                                                pocl_new,\n                                                pocl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.sbcl_cls_sht_desc,\n                         cls.clp_scl_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         v_ipu_code,\n                         cls.cls_type,\n                         cls.cls_wording,\n                         cls.cls_editable,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "edit_ren_risk_clause": "PROCEDURE edit_ren_risk_clause (v_pocl_code   IN NUMBER,\n                                    v_ipu_code    IN NUMBER,\n                                    v_clause      IN VARCHAR2)\n    IS\n    BEGIN\n        UPDATE gin_ren_policy_clauses\n           SET pocl_clause = v_clause                   --NVL(null, QC_CLAUSE)\n         WHERE     pocl_sbcl_cls_code = v_pocl_code\n               AND pocl_ipu_code = v_ipu_code;\n    END;",
        "del_ren_risk_clause": "PROCEDURE del_ren_risk_clause (v_pocl_code   IN NUMBER,\n                                   v_ipu_code    IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_ren_policy_clauses\n         WHERE     pocl_sbcl_cls_code = v_pocl_code\n               AND pocl_ipu_code = v_ipu_code;\n    END;",
        "edit_endors_details": "PROCEDURE edit_endors_details (v_pol_batch_no   IN NUMBER,\n                                   v_prp_code       IN NUMBER,\n                                   v_comment        IN VARCHAR2,\n                                   v_type           IN VARCHAR2,\n                                   v_end_code       IN NUMBER)\n    IS\n        v_text         VARCHAR2 (4000);\n        v_pol_status   VARCHAR2 (5);\n    BEGIN\n        -- RAISE_ERROR('v_text ; '||v_pol_batch_no);\n        BEGIN\n            -- RAISE_ERROR('TEST'||v_comment);\n            IF v_type = 'RN'\n            THEN\n                v_text := merge_ren_policies_text (v_pol_batch_no, v_comment);\n            -- RAISE_ERROR('v_text'||v_text);\n            ELSE\n                v_text := merge_policies_text (v_pol_batch_no, v_comment);\n            END IF;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_text := v_comment;\n        --RAISE_ERROR('Error Occured while saving Endorsement Details...'||SQLERRM(SQLCODE));\n        END;",
        "update_risk_remarks": "PROCEDURE update_risk_remarks (v_polrs_code     IN     NUMBER,\n                                   v_action         IN     VARCHAR2,\n                                   v_pol_batch_no   IN     NUMBER,\n                                   v_ipu_code       IN     NUMBER,\n                                   v_polrs_sch      IN     LONG,\n                                   v_err               OUT VARCHAR2)\n    IS\n        v_new_polrs_code   NUMBER;\n    BEGIN\n        IF v_action = 'A'\n        THEN\n            BEGIN\n                SELECT gin_polrs_code_seq.NEXTVAL\n                  INTO v_new_polrs_code\n                  FROM DUAL;\n\n                INSERT INTO gin_policy_risk_schedules (polrs_code,\n                                                       polrs_ipu_code,\n                                                       polrs_pol_batch_no,\n                                                       polrs_schedule)\n                     VALUES (v_new_polrs_code,\n                             v_ipu_code,\n                             v_pol_batch_no,\n                             v_polrs_sch);\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    v_err := 'error inserting risk remark....';\n                    RETURN;\n            END;",
        "update_allocate_certs": "PROCEDURE update_allocate_certs (\n        v_action                      VARCHAR2,\n        v_polc_code                   gin_policy_certs.polc_code%TYPE,\n        v_polc_pol_policy_no          gin_policy_certs.polc_pol_policy_no%TYPE,\n        v_polc_pol_ren_endos_no       gin_policy_certs.polc_pol_ren_endos_no%TYPE,\n        v_polc_pol_batch_no           gin_policy_certs.polc_pol_batch_no%TYPE,\n        v_polc_ipu_code               gin_policy_certs.polc_ipu_code%TYPE,\n        v_ipu_id                      gin_policy_certs.polc_ipu_id%TYPE,\n        v_polc_ct_code                gin_policy_certs.polc_ct_code%TYPE,\n        v_polc_ct_sht_desc            gin_policy_certs.polc_ct_sht_desc%TYPE,\n        v_polc_cer_cert_no            gin_policy_certs.polc_cer_cert_no%TYPE,\n        v_polc_lot_id                 gin_policy_certs.polc_lot_id%TYPE,\n        v_polc_issue_dt               gin_policy_certs.polc_issue_dt%TYPE,\n        v_polc_cert_year              gin_policy_certs.polc_cert_year%TYPE,\n        v_polc_status                 gin_policy_certs.polc_status%TYPE,\n        v_polc_print_status           gin_policy_certs.polc_print_status%TYPE,\n        v_polc_print_dt               gin_policy_certs.polc_print_dt%TYPE,\n        v_polc_wef                    gin_policy_certs.polc_wef%TYPE,\n        v_polc_wet                    gin_policy_certs.polc_wet%TYPE,\n        v_polc_check_cert             gin_policy_certs.polc_check_cert%TYPE,\n        v_polc_reason_cancelled       gin_policy_certs.polc_reason_cancelled%TYPE,\n        v_polc_cancel_dt              gin_policy_certs.polc_cancel_dt%TYPE,\n        v_user                        VARCHAR,\n        v_err                     OUT VARCHAR2)\n    IS\n        v_new_polc_code               NUMBER;\n        v_new_pcq_code                NUMBER;\n        --  v_wef            DATE;\n        v_wet                         DATE;\n        v_ipu_wef                     DATE;\n        v_ipu_wet                     DATE;\n        v_ipu_eff_wet                 DATE;\n        v_unsubmtd_docs               NUMBER;\n        v_short_period                NUMBER;\n        v_cert_wef                    DATE;\n        v_rqrd_docs                   NUMBER;\n        --v_rqrd_doc       VARCHAR2(1);\n        v_ipu_prev_ipu_code           NUMBER;\n        v_error                       VARCHAR2 (200);\n        v_polc_passenger_no           gin_policy_certs.polc_passenger_no%TYPE;\n        v_polc_tonnage                gin_policy_certs.polc_tonnage%TYPE;\n        v_ipu_clp_code                gin_insured_property_unds.ipu_clp_code%TYPE;\n        v_ipu_eff_wef                 gin_insured_property_unds.ipu_eff_wef%TYPE;\n        v_ipu_covt_sht_desc           gin_insured_property_unds.ipu_covt_sht_desc%TYPE;\n        v_insured                     VARCHAR2 (300);\n        v_comp_name                   VARCHAR2 (100);\n        v_uw_certs                    VARCHAR2 (1);\n        --v_cert_sht_period Number;\n        v_cover_code                  NUMBER;\n        v_cert_desc                   VARCHAR2 (50);\n        v_ct_type                     VARCHAR2 (10);\n        v_cert_no                     VARCHAR2 (20);\n        v_ipu_sec_scl_code            gin_insured_property_unds.ipu_sec_scl_code%TYPE;\n        v_brn_code                    gin_policies.pol_brn_code%TYPE;\n        v_pol_uw_year                 gin_policies.pol_uw_year%TYPE;\n        v_pol_tran_type               gin_policies.pol_tran_type%TYPE;\n        v_agn_agent_code              tqc_agencies.agn_code%TYPE;\n        v_agnt_sht_desc               tqc_agencies.agn_sht_desc%TYPE;\n        v_ipu_property_id             gin_insured_property_unds.ipu_property_id%TYPE;\n        v_pol_client_policy_number    gin_policies.pol_client_policy_number%TYPE;\n        v_ipu_prp_code                gin_insured_property_unds.ipu_prp_code%TYPE;\n        v_cnt                         NUMBER;\n        cert_status                   VARCHAR2 (1);\n        cert_wef                      DATE;\n        cert_wet                      DATE;\n        print_cert_status             VARCHAR2 (1);\n        v_polc_ipu_id                 NUMBER;\n        v_pol_prem_computed           VARCHAR2 (10);\n        v_pol_statusi                 VARCHAR2 (10);\n        v_clnt_code                   NUMBER;\n        v_agn_code                    NUMBER;\n        v_backdating_of_certs_param   VARCHAR2 (1);\n        v_print_status                VARCHAR2 (1);\n        v_cer_cert_no                 VARCHAR2 (100);\n    BEGIN\n        BEGIN\n            SELECT pol_prp_code, pol_agnt_agent_code\n              INTO v_clnt_code, v_agn_code\n              FROM gin_policies\n             WHERE pol_batch_no = v_polc_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting policy details...');\n        END;",
        "check_dup_certificates": "PROCEDURE check_dup_certificates (\n        v_polc_wef          gin_policy_certs.polc_wef%TYPE,\n        v_polc_wet          gin_policy_certs.polc_wet%TYPE,\n        v_polc_status       gin_policy_certs.polc_status%TYPE,\n        v_polc_ipu_id       NUMBER,\n        v_err           OUT VARCHAR2,\n        v_ipu_code          NUMBER DEFAULT NULL)\n    IS\n        --v_curr_wef DATE;\n        v_dummy    NUMBER := 0;\n        v_ipu_id   NUMBER;\n    BEGIN\n        -- v_curr_wef :=v_polc_wef;\n        IF v_polc_ipu_id IS NULL AND v_ipu_code IS NOT NULL\n        THEN\n            BEGIN\n                SELECT IPU_ID\n                  INTO v_ipu_id\n                  FROM GIN_INSURED_PROPERTY_UNDS\n                 WHERE IPU_CODE = v_ipu_code;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    v_ipu_id := NULL;\n            END;",
        "default_srv_fee_rate": "PROCEDURE default_srv_fee_rate (v_fee_rate OUT NUMBER)\n    IS\n    --v_param_value NUMBER(10);\n    --v_status VARCHAR2(10);\n    BEGIN\n        BEGIN\n            SELECT gin_parameters_pkg.get_param_number ('DEFAULTSRVFEERATE')\n              INTO v_fee_rate\n              FROM DUAL;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_fee_rate := NULL;\n        END;",
        "pop_sections": "PROCEDURE pop_sections (v_ipu_code NUMBER)\n    IS\n        v_scl_code    NUMBER;\n        v_bind_code   NUMBER;\n        v_covt_code   NUMBER;\n        v_batch_no    NUMBER;\n    BEGIN\n        SELECT ipu_sec_scl_code,\n               ipu_bind_code,\n               ipu_covt_code,\n               ipu_pol_batch_no\n          INTO v_scl_code,\n               v_bind_code,\n               v_covt_code,\n               v_batch_no\n          FROM gin_insured_property_unds\n         WHERE ipu_code = v_ipu_code;\n\n        BEGIN\n            DELETE gin_policy_insured_limits\n             WHERE pil_ipu_code = v_ipu_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                    'Error deleting previously populated sections...');\n        END;",
        "check_duplicate_risks": "PROCEDURE check_duplicate_risks (v_pol_batch_no IN NUMBER)\n    IS\n        v_cnt                NUMBER;\n        v_allow_duplicates   VARCHAR2 (5);\n        v_msg                VARCHAR2 (2000);\n        v_count              NUMBER;\n\n        CURSOR dup_risk IS\n              SELECT ipu_pol_batch_no, ipu_property_id, ipu_sec_scl_code\n                FROM gin_insured_property_unds, gin_policy_active_risks\n               WHERE     ipu_code = polar_ipu_code\n                     AND polar_pol_batch_no = v_pol_batch_no\n                     AND ipu_pol_batch_no NOT IN\n                             (SELECT pol_batch_no\n                                FROM gin_policies\n                               WHERE     pol_batch_no = ipu_pol_batch_no\n                                     AND NVL (pol_loaded, 'N') = 'Y')\n              HAVING COUNT (1) > 1\n            GROUP BY ipu_pol_batch_no, ipu_property_id, ipu_sec_scl_code;\n    BEGIN\n        BEGIN\n            v_allow_duplicates :=\n                gin_parameters_pkg.get_param_varchar (\n                    'ALLOW_DUPLICATION_OF_RISKS');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_allow_duplicates := 'Y';\n        END;",
        "update_cert_details": "PROCEDURE update_cert_details (v_ipu_code       IN NUMBER,\n                                   v_tonnage        IN NUMBER,\n                                   v_carry_cap      IN NUMBER DEFAULT NULL,\n                                   v_pol_batch_no   IN NUMBER DEFAULT NULL)\n    IS\n        v_polc_pll      NUMBER;\n        v_ct_sht_desc   VARCHAR2 (30);\n        v_count1        NUMBER;\n        v_scl_code      NUMBER;\n        v_covt_code     NUMBER;\n        v_ct_code       NUMBER;\n    BEGIN\n        --        BEGIN\n        --\n        --\n        --            SELECT PCQ_CT_SHT_DESC\n        --            INTO v_ct_sht_desc\n        --            FROM GIN_PRINT_CERT_QUEUE\n        --            WHERE PCQ_IPU_CODE = v_ipu_code\n        --            AND PCQ_CODE IN (SELECT MAX(PCQ_CODE) FROM GIN_PRINT_CERT_QUEUE WHERE PCQ_IPU_CODE = v_ipu_code);\n        --        EXCEPTION\n        --        WHEN OTHERS THEN\n        --              SELECT POLC_CT_SHT_DESC INTO v_ct_sht_desc\n        --              FROM  GIN_POLICY_CERTS\n        --              WHERE POLC_POL_BATCH_NO=v_pol_batch_no;\n        --\n        --        END;",
        "saveserviceproviderdetails": "PROCEDURE saveserviceproviderdetails (v_action                VARCHAR2,\n                                          v_gsp_code              NUMBER,\n                                          v_gsp_spr_code          NUMBER,\n                                          v_gsp_spt_code       IN NUMBER,\n                                          v_gsp_pol_batch_no   IN NUMBER)\n    IS\n    BEGIN\n        -- RAISE_ERROR('v_cgpte_pol_batch_no'||v_cgpte_pol_batch_no);\n        IF v_action = 'A'\n        THEN\n            BEGIN\n                INSERT INTO gin_service_providers (gsp_code,\n                                                   gsp_spr_code,\n                                                   gsp_spt_code,\n                                                   gsp_pol_batch_no)\n                     VALUES (gin_gsp_code_seq.NEXTVAL,\n                             v_gsp_spr_code,\n                             v_gsp_spt_code,\n                             v_gsp_pol_batch_no);\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                        'Error inserting Service Provider Details...');\n            END;",
        "delete_multiple_insured": "PROCEDURE delete_multiple_insured (v_polin_code     IN NUMBER,\n                                       v_pol_batch_no   IN NUMBER,\n                                       v_pro_code       IN NUMBER)\n    IS\n        v_cnt             NUMBER;\n        v_auths           VARCHAR2 (100);\n        -- v_polin_code NUMBER;\n        v_err_pos         VARCHAR2 (100);\n        v_cert_ipu_code   NUMBER;\n        v_errmsg          VARCHAR2 (200);\n\n        CURSOR insured_ref IS\n            SELECT *\n              FROM gin_insured_property_unds\n             WHERE ipu_polin_code = v_polin_code;\n    BEGIN\n        FOR x IN insured_ref\n        LOOP\n            del_ipu_details (v_pol_batch_no, x.ipu_code, v_pro_code);\n        END LOOP;\n\n        DELETE gin_policy_insureds\n         WHERE polin_code = v_polin_code;\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error ('deleting Insured details failed');\n    END;",
        "populate_binder_renewals": "PROCEDURE populate_binder_renewals (v_pol_batch_no VARCHAR2)\n    IS\n        CURSOR cur_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n\n        v_bind_code         NUMBER;\n        v_rate              NUMBER;\n        v_sect_code         NUMBER;\n        v_prem_rate         NUMBER;\n        v_coin_pct          NUMBER;\n        v_min_prem_factor   NUMBER := 1;\n        v_rnd               NUMBER := 2;\n        v_param             VARCHAR2 (1);\n        act_type            VARCHAR2 (5);\n        v_cnt               NUMBER;\n    BEGIN\n        FOR cur_pol_rec IN cur_pol\n        LOOP\n            BEGIN\n                SELECT NVL (\n                           gin_parameters_pkg.get_param_varchar (\n                               'ALLOW_PREM_COMP_BINDERS'),\n                           'N')\n                  INTO v_param\n                  FROM DUAL;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    v_param := 'N';\n            END;",
        "pop_resc_rsk_limits": "PROCEDURE pop_resc_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                   v_scl_code       IN NUMBER,\n                                   v_bind_code      IN NUMBER,\n                                   v_cvt_code       IN NUMBER,\n                                   v_sect_type      IN VARCHAR2,\n                                   v_rs_code        IN NUMBER DEFAULT NULL)\n    IS\n        v_sect_sht_desc             VARCHAR2 (30);\n        v_sect_desc                 VARCHAR2 (40);\n        --v_sect_type                                VARCHAR2(30);\n        v_type_desc                 VARCHAR2 (30);\n        v_prr_rate_type             VARCHAR2 (10);\n        v_prr_rate                  NUMBER;\n        v_terr_description          VARCHAR2 (30);\n        v_prr_prem_minimum_amt      NUMBER;\n        v_prr_multiplier_rate       NUMBER;\n        v_prr_division_factor       NUMBER;\n        v_prr_multplier_div_fact    NUMBER;\n        v_prr_rate_desc             VARCHAR2 (30);\n        v_dc_sect                   VARCHAR2 (5);\n        v_insert                    BOOLEAN := FALSE;\n        v_no_limit                  VARCHAR2 (2);\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_apply_as_discount         VARCHAR2 (1);\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc || ' ' || prr_ncd_level\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD ' || prr_ncd_level,\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full\n              FROM gin_premium_rates, gin_sections, gin_resc_srv_subcl\n             WHERE     prr_sect_code = sect_code\n                   AND rss_sect_code = sect_code\n                   AND rss_rs_code = v_rs_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND NVL (rss_apply_as_discount, 'N') = 'Y'\n                   AND prr_section_type = v_sect_type\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n    BEGIN\n        --RAISE_ERROR('Unable='||v_bind_code||'='||v_sect_type||'='||v_cvt_code||'=='||v_scl_code||'='||v_rs_code||'==='||v_new_ipu_code);\n        BEGIN\n            DELETE gin_policy_insured_limits\n             WHERE     pil_ipu_code = v_new_ipu_code\n                   AND pil_sect_type = v_sect_type;\n        END;",
        "pop_ren_resc_rsk_limits": "PROCEDURE pop_ren_resc_rsk_limits (\n        v_new_ipu_code   IN NUMBER,\n        v_scl_code       IN NUMBER,\n        v_bind_code      IN NUMBER,\n        v_cvt_code       IN NUMBER,\n        v_sect_type      IN VARCHAR2,\n        v_rs_code        IN NUMBER DEFAULT NULL)\n    IS\n        v_sect_sht_desc             VARCHAR2 (30);\n        v_sect_desc                 VARCHAR2 (40);\n        --v_sect_type                                VARCHAR2(30);\n        v_type_desc                 VARCHAR2 (30);\n        v_prr_rate_type             VARCHAR2 (10);\n        v_prr_rate                  NUMBER;\n        v_terr_description          VARCHAR2 (30);\n        v_prr_prem_minimum_amt      NUMBER;\n        v_prr_multiplier_rate       NUMBER;\n        v_prr_division_factor       NUMBER;\n        v_prr_multplier_div_fact    NUMBER;\n        v_prr_rate_desc             VARCHAR2 (30);\n        v_dc_sect                   VARCHAR2 (5);\n        v_insert                    BOOLEAN := FALSE;\n        v_no_limit                  VARCHAR2 (2);\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_apply_as_discount         VARCHAR2 (1);\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc || ' ' || prr_ncd_level\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD ' || prr_ncd_level,\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full\n              FROM gin_premium_rates, gin_sections, gin_resc_srv_subcl\n             WHERE     prr_sect_code = sect_code\n                   AND rss_sect_code = sect_code\n                   AND rss_rs_code = v_rs_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND NVL (rss_apply_as_discount, 'N') = 'Y'\n                   AND prr_section_type = v_sect_type\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_ren_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n    BEGIN\n        BEGIN\n            DELETE gin_ren_policy_insured_limits\n             WHERE     pil_ipu_code = v_new_ipu_code\n                   AND pil_sect_type = v_sect_type;\n        END;",
        "pop_extra_taxes": "PROCEDURE pop_extra_taxes (v_pol_policy_no   IN VARCHAR2,\n                               v_pol_endos_no    IN VARCHAR2,\n                               v_pol_batch_no    IN NUMBER,\n                               v_pro_code        IN NUMBER,\n                               v_pol_binder      IN VARCHAR2 DEFAULT 'N')\n    IS\n        CURSOR taxes IS\n              SELECT COUNT (1)     cnt,\n                     trnt_code,\n                     taxr_rate,\n                     taxr_rate_desc,\n                     trnt_type,\n                     rs_sht_desc,\n                     taxr_rate_type,\n                     rs_appl_lvl\n                FROM gin_taxes_types_view,\n                     gin_rescue_services,\n                     gin_insured_property_unds,\n                     gin_resc_srv_subcl\n               WHERE     taxr_scl_code IS NULL\n                     AND rss_rs_code = ipu_rs_code\n                     AND rss_scl_code = ipu_sec_scl_code\n                     AND taxr_trnt_code = rs_sht_desc\n                     AND ipu_pol_batch_no = v_pol_batch_no\n                     AND ipu_rs_code = rs_code\n                     AND NVL (rss_apply_as_discount, 'N') = 'Y'\n                     AND trnt_type IN ('RSC')\n                     AND taxr_trnt_code NOT IN\n                             (SELECT ptx_trac_trnt_code\n                                FROM gin_policy_taxes\n                               WHERE ptx_pol_batch_no = v_pol_batch_no)\n            GROUP BY trnt_code,\n                     taxr_rate,\n                     taxr_rate_desc,\n                     trnt_type,\n                     rs_sht_desc,\n                     trnt_type,\n                     taxr_rate_type,\n                     rs_appl_lvl;\n\n        v_apply_as_discount   VARCHAR2 (1);\n    BEGIN\n        FOR taxes_rec IN taxes\n        LOOP\n            IF taxes_rec.trnt_type IN ('RSC')\n            THEN\n                --null;\n                BEGIN\n                    INSERT INTO gin_policy_taxes (ptx_trac_scl_code,\n                                                  ptx_trac_trnt_code,\n                                                  ptx_pol_policy_no,\n                                                  ptx_pol_ren_endos_no,\n                                                  ptx_pol_batch_no,\n                                                  ptx_rate,\n                                                  ptx_amount,\n                                                  ptx_tl_lvl_code,\n                                                  ptx_rate_type,\n                                                  ptx_rate_desc,\n                                                  ptx_endos_diff_amt,\n                                                  ptx_tax_type,\n                                                  ptx_risk_pol_level)\n                         VALUES (NULL,\n                                 taxes_rec.trnt_code,\n                                 v_pol_policy_no,\n                                 v_pol_endos_no,\n                                 v_pol_batch_no,\n                                 taxes_rec.taxr_rate,\n                                 NULL,\n                                 'UP',\n                                 taxes_rec.taxr_rate_type,\n                                 taxes_rec.taxr_rate_desc,\n                                 NULL,\n                                 taxes_rec.trnt_type,\n                                 taxes_rec.rs_appl_lvl);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error ('Error applying taxes..');\n                END;",
        "pop_cover_type_clauses": "PROCEDURE pop_cover_type_clauses (v_pol_policy_no   IN VARCHAR2,\n                                      v_pol_endos_no    IN VARCHAR2,\n                                      v_pol_batch_no    IN NUMBER,\n                                      v_pro_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (sbcl_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n            UNION\n            SELECT cls_heading,\n                   scvtmc_cls_sht_desc,\n                   scvtmc_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_scl_cvt_mand_clauses,\n                   gin_product_sub_classes,\n                   gin_clause\n             WHERE     clp_scl_code = scvtmc_scl_code\n                   AND scvtmc_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (scvmtc_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND scvtmc_cls_code NOT IN\n                           (SELECT sbcl_cls_code\n                              FROM gin_subcl_clauses\n                             WHERE NVL (sbcl_cls_mandatory, 'N') = 'Y');\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_policy_lvl_clauses (plcl_sbcl_cls_code,\n                                                plcl_sbcl_scl_code,\n                                                plcl_pro_sht_desc,\n                                                plcl_pro_code,\n                                                plcl_pol_policy_no,\n                                                plcl_pol_ren_endos_no,\n                                                plcl_pol_batch_no,\n                                                plcl_sbcl_cls_sht_desc,\n                                                plcl_cls_type,  --PLCL_CLAUSE,\n                                                plcl_cls_editable,\n                                                plcl_new,\n                                                plcl_header,\n                                                plcl_rownum,\n                                                plcl_product_appl,\n                                                plcl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.clp_scl_code,\n                         cls.clp_pro_sht_desc,\n                         cls.clp_pro_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         cls.sbcl_cls_sht_desc,\n                         cls.cls_type,                          --PLCL_CLAUSE,\n                         cls.cls_editable,\n                         'Y',\n                         NULL,\n                         NULL,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "pop_cov_type_binder_clauses": "PROCEDURE pop_cov_type_binder_clauses (v_pol_policy_no   IN VARCHAR2,\n                                           v_pol_endos_no    IN VARCHAR2,\n                                           v_pol_batch_no    IN NUMBER,\n                                           v_pro_code        IN NUMBER)\n    IS\n        v_clause   LONG;\n\n        CURSOR clause IS\n            SELECT cls_heading,\n                   sbcl_cls_sht_desc,\n                   sbcl_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_subcl_clauses, gin_product_sub_classes, gin_clause\n             WHERE     clp_scl_code = sbcl_scl_code\n                   AND sbcl_cls_code = cls_code\n                   AND cls_code IN\n                           (SELECT bsccl_cls_code\n                              FROM gin_binder_subcl_clauses, gin_policies\n                             WHERE     pol_bind_code = bsccl_bind_code\n                                   AND pol_batch_no = v_pol_batch_no\n                                   AND NVL (pol_binder_policy, 'N') = 'Y')\n                   AND clp_pro_code = v_pro_code\n                   --AND NVL(SBCL_CLS_MANDATORY,'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n            UNION\n            SELECT cls_heading,\n                   scvtmc_cls_sht_desc,\n                   scvtmc_cls_code,\n                   cls_type,\n                   DECODE (cls_type,\n                           'CL', 'Clause',\n                           'WR', 'Warranty',\n                           'SC', 'Special Conditions')    type_desc,\n                   clp_pro_code,\n                   clp_pro_sht_desc,\n                   clp_scl_code,\n                   cls_editable                               --,--CLS_WORDING\n              FROM gin_scl_cvt_mand_clauses,\n                   gin_product_sub_classes,\n                   gin_clause\n             WHERE     clp_scl_code = scvtmc_scl_code\n                   AND scvtmc_cls_code = cls_code\n                   AND clp_pro_code = v_pro_code\n                   AND NVL (scvmtc_cls_mandatory, 'N') = 'Y'\n                   AND cls_code NOT IN\n                           (SELECT plcl_sbcl_cls_code\n                              FROM gin_policy_lvl_clauses\n                             WHERE plcl_pol_batch_no = v_pol_batch_no)\n                   AND scvtmc_cls_code NOT IN\n                           (SELECT sbcl_cls_code\n                              FROM gin_subcl_clauses\n                             WHERE NVL (sbcl_cls_mandatory, 'N') = 'Y');\n    BEGIN\n        FOR cls IN clause\n        LOOP\n            INSERT INTO gin_policy_lvl_clauses (plcl_sbcl_cls_code,\n                                                plcl_sbcl_scl_code,\n                                                plcl_pro_sht_desc,\n                                                plcl_pro_code,\n                                                plcl_pol_policy_no,\n                                                plcl_pol_ren_endos_no,\n                                                plcl_pol_batch_no,\n                                                plcl_sbcl_cls_sht_desc,\n                                                plcl_cls_type,  --PLCL_CLAUSE,\n                                                plcl_cls_editable,\n                                                plcl_new,\n                                                plcl_header,\n                                                plcl_rownum,\n                                                plcl_product_appl,\n                                                plcl_heading)\n                 VALUES (cls.sbcl_cls_code,\n                         cls.clp_scl_code,\n                         cls.clp_pro_sht_desc,\n                         cls.clp_pro_code,\n                         v_pol_policy_no,\n                         v_pol_endos_no,\n                         v_pol_batch_no,\n                         cls.sbcl_cls_sht_desc,\n                         cls.cls_type,                          --PLCL_CLAUSE,\n                         cls.cls_editable,\n                         'Y',\n                         NULL,\n                         NULL,\n                         'Y',\n                         cls.cls_heading);\n\n            IF NVL (cls.cls_editable, 'N') = 'Y'\n            THEN\n                SELECT cls_wording\n                  INTO v_clause\n                  FROM gin_clause\n                 WHERE cls_code = cls.sbcl_cls_code;\n\n                BEGIN\n                    v_clause :=\n                        merge_policies_text (v_pol_batch_no, v_clause);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        NULL;\n                END;",
        "addreqdocs": "PROCEDURE addreqdocs (v_pol_batch_no IN NUMBER, v_trans_type IN VARCHAR2)\n    IS\n        v_cnt   NUMBER;\n\n        CURSOR dispatchdocs IS\n            SELECT *\n              FROM gin_dispatch_docs\n             WHERE dd_doc_lvl = v_trans_type;\n    BEGIN\n        SELECT COUNT (1)\n          INTO v_cnt\n          FROM gin_uw_pol_docs\n         WHERE upd_pol_batch_no = v_pol_batch_no;\n\n        IF NVL (v_cnt, 0) > 0\n        THEN\n            FOR dispatchdocs_rec IN dispatchdocs\n            LOOP\n                INSERT INTO gin_uw_pol_docs (upd_code,\n                                             upd_dd_code,\n                                             upd_dispatched,\n                                             upd_pol_batch_no)\n                     VALUES (gin_upd_code_seq.NEXTVAL,\n                             dispatchdocs_rec.dd_code,\n                             'N',\n                             v_pol_batch_no);\n            END LOOP;\n        END IF;\n    END;",
        "dispatchselectedreddoc": "PROCEDURE dispatchselectedreddoc (v_upd_code IN NUMBER)\n    IS\n    BEGIN\n        UPDATE gin_uw_pol_docs\n           SET upd_dispatched = 'Y'\n         WHERE upd_code = v_upd_code;\n    END;",
        "checkifauthorised": "PROCEDURE checkifauthorised (v_pol_batch_no IN NUMBER)\n    IS\n        v_cnt   NUMBER;\n    BEGIN\n        SELECT COUNT (1)\n          INTO v_cnt\n          FROM gin_uw_pol_docs\n         WHERE upd_pol_batch_no = v_pol_batch_no AND upd_dispatched = 'N';\n\n        IF NVL (v_cnt, 0) > 0\n        THEN\n            raise_error (\n                   'You have not Authorised '\n                || ' '\n                || v_cnt\n                || ' '\n                || 'Documents');\n        END IF;\n    END;",
        "auto_renew_prc": "PROCEDURE auto_renew_prc (v_renewal_batch IN NUMBER)\n    IS\n        v_endos_prem      NUMBER;\n        v_pol_batch_no    NUMBER;\n        v_user            VARCHAR2 (30);\n        v_batch_no        NUMBER;\n        v_balance         NUMBER;\n        v_trans_no        NUMBER;\n        v_cr_bal          NUMBER;\n        v_cr_com          NUMBER;\n        v_mtran_dr_no     NUMBER;\n        v_com_inclusive   VARCHAR2 (1) := 'N';\n        v_itb_code        NUMBER;\n\n        CURSOR rcpt IS\n            SELECT *\n              FROM gin_master_transactions\n             WHERE mtran_pol_batch_no = v_batch_no AND mtran_balance <> 0;\n    BEGIN\n        -- RAISE_ERROR(v_renewal_batch);\n        BEGIN\n            SELECT pol_tot_endos_diff_amt, pol_batch_no, pol_prepared_by\n              INTO v_endos_prem, v_pol_batch_no, v_user\n              FROM gin_ren_policies\n             WHERE pol_renewal_batch = v_renewal_batch;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching renewal record....');\n        END;",
        "auto_pop_policy_excesses": "PROCEDURE auto_pop_policy_excesses (\n        v_pspr_pol_batch_no   gin_policy_section_perils.pspr_pol_batch_no%TYPE)\n    IS\n        v_status          VARCHAR2 (200);\n        v_pol_loaded      VARCHAR2 (200);\n        v_new_pspr_code   NUMBER;\n        v_prev_scl        NUMBER;\n\n        CURSOR pilicy_risks_ref IS\n              SELECT *\n                FROM gin_insured_property_unds\n               WHERE ipu_pol_batch_no = v_pspr_pol_batch_no\n            ORDER BY ipu_sec_scl_code;\n    BEGIN\n        --RAISE_ERROR('v_pspr_pol_batch_no'||v_pspr_pol_batch_no);\n        BEGIN\n            SELECT pol_authosrised, pol_loaded\n              INTO v_status, v_pol_loaded\n              FROM gin_policies\n             WHERE pol_batch_no = v_pspr_pol_batch_no;\n        END;",
        "process_med_risk_prc": "PROCEDURE process_med_risk_prc (v_pol_batch_no   IN NUMBER,\n                                    v_comm_rate      IN NUMBER,\n                                    v_trans_type     IN VARCHAR2,\n                                    v_scl1           IN VARCHAR2,\n                                    v_scl2           IN VARCHAR2,\n                                    v_scl3           IN VARCHAR2,\n                                    v_scl4           IN VARCHAR2,\n                                    v_scl5           IN VARCHAR2,\n                                    v_scl6           IN VARCHAR2,\n                                    v_prem1          IN NUMBER,\n                                    v_prem2          IN NUMBER,\n                                    v_prem3          IN NUMBER,\n                                    v_prem4          IN NUMBER,\n                                    v_prem5          IN NUMBER,\n                                    v_prem6          IN NUMBER)\n    IS\n        v_insert          BOOLEAN := FALSE;\n        v_scl_code        NUMBER;\n        v_prem            NUMBER (23, 5);\n        v_covt_type       VARCHAR2 (30);\n        v_covt_code       NUMBER;\n        v_si              NUMBER;\n        v_rsk_rec         web_risk_tab := web_risk_tab ();\n        v_rsk_sect_data   web_sect_tab := web_sect_tab ();\n        r_no              NUMBER := 0;\n        v_med_scl         VARCHAR2 (10);\n        v_scl_desc        VARCHAR2 (50);\n        v_date_from       DATE;\n        v_date_to         DATE;\n        v_prp_code        NUMBER;\n        v_med_policy_no   VARCHAR2 (30);\n        v_bind_code       NUMBER;\n        v_user            VARCHAR2 (30);\n        v_new_ipu_code    NUMBER;\n        v_sect_code       NUMBER;\n    BEGIN\n        FOR x IN 1 .. 6\n        LOOP\n            v_insert := FALSE;\n\n            IF x = 1 AND v_scl1 IS NOT NULL AND NVL (v_prem1, 0) != 0\n            THEN\n                BEGIN\n                    SELECT scm_scl_code\n                      INTO v_scl_code\n                      FROM gin_subclass_mapping\n                     WHERE scm_mapped_code = v_scl1;\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error (\n                            'Error Fetching Sub Class Mapping For ' || v_scl1);\n                END;",
        "update_insured_remarks": "PROCEDURE update_insured_remarks (v_polin_code   NUMBER,\n                                      v_comment      VARCHAR2)\n    IS\n    BEGIN\n        UPDATE gin_policy_insureds\n           SET polin_comment = v_comment\n         WHERE polin_code = v_polin_code;\n    END;",
        "duplicate_risk": "PROCEDURE duplicate_risk (v_ipu_code NUMBER)\n    IS\n        v_new_ipu_code       NUMBER;\n        v_ipu_pol_batch_no   NUMBER;\n        v_is_motor_risk      CHAR;\n    BEGIN\n        SELECT IPU_POL_BATCH_NO, SCL_MOTOR_VERIFY\n          INTO v_ipu_pol_batch_no, v_is_motor_risk\n          FROM GIN_INSURED_PROPERTY_UNDS, GIN_SUB_CLASSES\n         WHERE IPU_SEC_SCL_CODE = SCL_CODE AND IPU_CODE = v_ipu_code;\n\n        SELECT    TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n               || gin_ipu_code_seq.NEXTVAL\n          INTO v_new_ipu_code\n          FROM DUAL;\n\n        INSERT INTO gin_insured_property_unds (\n                        ipu_code,\n                        ipu_property_id,\n                        ipu_item_desc,\n                        ipu_qty,\n                        ipu_value,\n                        ipu_wef,\n                        ipu_wet,\n                        ipu_pol_policy_no,\n                        ipu_pol_ren_endos_no,\n                        ipu_pol_batch_no,\n                        ipu_basic_premium,\n                        ipu_nett_premium,\n                        ipu_compulsory_excess,\n                        ipu_add_theft_excess,\n                        ipu_add_exp_excess,\n                        ipu_prr_rate,\n                        ipu_comp_retention,\n                        ipu_pol_est_max_loss,\n                        ipu_avail_fulc_bal,\n                        ipu_endos_diff_amt,\n                        ipu_prem_wef,\n                        ipu_earth_quake_cover,\n                        ipu_earth_quake_prem,\n                        ipu_location,\n                        ipu_itl,\n                        ipu_polin_code,\n                        ipu_sec_sect_code,\n                        ipu_sect_sht_desc,\n                        ipu_sec_scl_code,\n                        ipu_ncd_status,\n                        ipu_cert_issued,\n                        ipu_related_ipu_code,\n                        ipu_prorata,\n                        ipu_bp,\n                        ipu_gp,\n                        ipu_fp,\n                        ipu_fap,\n                        ipu_prev_ipu_code,\n                        ipu_cummulative_reins,\n                        ipu_eml_si,\n                        ipu_reinsured,\n                        ipu_ct_code,\n                        ipu_sht_desc,\n                        ipu_quz_code,\n                        ipp_quz_sht_desc,\n                        ipu_quz_sht_desc,\n                        ipu_ncl_level,\n                        ipu_ncd_level,\n                        ipu_id,\n                        ipu_gross_comp_retention,\n                        ipu_bind_code,\n                        ipu_commission,\n                        ipu_comm_endos_diff_amt,\n                        ipu_facre_amount,\n                        ipu_clp_code,\n                        ipu_excess_rate,\n                        ipu_excess_type,\n                        ipu_excess_rate_type,\n                        ipu_excess_min,\n                        ipu_excess_max,\n                        ipu_prereq_ipu_code,\n                        ipu_escalation_rate,\n                        ipu_endos_remove,\n                        ipu_comm_rate,\n                        ipu_prev_batch_no,\n                        ipu_cur_code,\n                        ipu_relr_code,\n                        ipu_relr_sht_desc,\n                        ipu_reinsure_amt,\n                        ipu_prp_code,\n                        ipu_max_exposure,\n                        ipu_com_retention_rate,\n                        ipu_eff_wef,\n                        ipu_eff_wet,\n                        ipu_retro_cover,\n                        ipu_retro_wef,\n                        ipu_covt_code,\n                        ipu_covt_sht_desc,\n                        ipu_si_diff,\n                        ipu_terr_code,\n                        ipu_terr_desc,\n                        ipu_comments,\n                        ipu_from_time,\n                        ipu_to_time,\n                        ipu_mar_cert_no,\n                        ipu_tot_endos_prem_dif,\n                        ipu_tot_gp,\n                        ipu_tot_value,\n                        ipu_cover_days,\n                        ipu_grp_comp_net_ret,\n                        ipu_grp_si_risk_pct,\n                        ipu_grp_top_loc,\n                        ipu_grp_comp_gross_ret,\n                        ipu_prev_prem,\n                        ipu_current_prrd_code,\n                        ipu_ri_agnt_com_rate,\n                        ipu_ri_agnt_comm_amt,\n                        ipu_tot_fap,\n                        ipu_max_dc_refund_pct,\n                        ipu_extra_premium,\n                        ipu_status,\n                        ipu_uw_yr,\n                        ipu_endose_fap_or_bc,\n                        ipu_tot_first_loss,\n                        ipu_accumulation_limit,\n                        ipu_compute_max_exposure,\n                        ipu_trans_eff_wet,\n                        ipu_prem_tax,\n                        ipu_rate_change_comment,\n                        ipu_trans_count,\n                        ipu_paid_premium,\n                        ipu_paid_tl,\n                        ipu_inception_uwyr,\n                        ipu_prem_comment,\n                        ipu_coin_tl,\n                        ipu_dc_paid_premium,\n                        ipu_dc_ap,\n                        ipu_item_details,\n                        ipu_eml_based_on,\n                        ipu_aggregate_limits,\n                        ipu_rc_code,\n                        ipu_rc_sht_desc,\n                        ipu_free_limit,\n                        ipu_contrad_ipu_code,\n                        ipu_survey_date,\n                        ipu_declared,\n                        ipu_prev_fap,\n                        ipu_prev_tot_fap,\n                        ipu_min_premium_used,\n                        ipu_cancellation_days,\n                        ipu_allowed_comm_rate,\n                        ipu_allowed_comm_amt,\n                        ipu_dc_penalty_pct,\n                        ipu_reinsure_diff_amt,\n                        ipu_prev_reinsure_amt,\n                        ipu_phfund,\n                        ipu_coin_phfund,\n                        ipu_enforce_cvt_min_prem,\n                        ipu_instal_prem,\n                        ipu_prev_ri_si,\n                        ipu_policy_status,\n                        ipu_earthqke_prem_diff,\n                        ipu_override_ri_retention,\n                        ipu_risk_oth_int_parties,\n                        ipu_prorata_sect_prem,\n                        ipu_nonprorata_sect_prem,\n                        ipu_prev_prorata_sect_prem,\n                        ipu_prev_nonprorata_sect_prem,\n                        ipu_tot_prorata_sect_prem,\n                        ipu_tot_nonprorata_sect_prem,\n                        ipu_prev_tot_prorata_s_prem,\n                        ipu_prev_tot_nonprorata_s_prem,\n                        ipu_sub_agn_comm_rate,\n                        ipu_sub_agn_comm_amt,\n                        ipu_lta_endos_com_amt,\n                        ipu_lta_commission,\n                        ipu_lta_comm_rate,\n                        ipu_admin_fee_disc_amt,\n                        ipu_admin_fee_disc_rate,\n                        ipu_lta_comm_disc_rate,\n                        ipu_lta_comm_disc_amt,\n                        ipu_tot_families,\n                        ipu_tot_individuals,\n                        ipu_tot_females,\n                        ipu_tot_males,\n                        ipu_conveyance_type,\n                        ipu_stamp_duty,\n                        ipu_mktr_com_amt,\n                        ipu_mktr_com_rate,\n                        ipu_vat_amt,\n                        ipu_vat_rate,\n                        ipu_comm_disc_type,\n                        ipu_comm_disc_rate,\n                        ipu_comm_disc_amt,\n                        ipu_prev_status,\n                        ipu_rs_code,\n                        ipu_rescue_mem,\n                        ipu_ped_code,\n                        ipu_cover_suspended,\n                        ipu_suspend_wef,\n                        ipu_suspend_wet,\n                        ipu_ncd_cert_no,\n                        ipu_pymt_install_pcts,\n                        ipu_susp_reinstmt_type,\n                        ipu_install_period,\n                        ipu_rescue_charge,\n                        ipu_previous_insurer,\n                        ipu_next_inst_prem,\n                        ipu_wtht,\n                        ipu_drcr_no,\n                        ipu_post_retro_wet,\n                        ipu_post_retro_cover,\n                        ipu_co_phfund,\n                        ipu_cover_note_remarks,\n                        ipu_cover_note_wet,\n                        ipu_cover_note_wef,\n                        ipu_cover_note_date,\n                        ipu_cover_note_by,\n                        ipu_cover_note_no,\n                        ipu_health_tax,\n                        ipu_motor_tax,\n                        ipu_certchg,\n                        ipu_road_safety_tax,\n                        ipu_client_vat_amt,\n                        ipu_motor_levy,\n                        ipu_overrideride_ret_type,\n                        ipu_db_code,\n                        ipu_rare_model,\n                        ipu_cashback_appl,\n                        ipu_cashback_level,\n                        ipu_vehicle_model,\n                        ipu_vehicle_make,\n                        ipu_vehicle_model_code,\n                        ipu_vehicle_make_code,\n                        ipu_loc_town,\n                        ipu_prop_address,\n                        ipu_other_com_charges,\n                        ipu_risk_note,\n                        ipu_model_yr,\n                        ipu_insured_driver,\n                        ipu_cert_no,\n                        ipu_validate_ucr,\n                        ipu_ucr_code,\n                        ipu_pip_code,\n                        ipu_pip_pf_code,\n                        ipu_survey_agnt_code,\n                        ipu_quza_code,\n                        ipu_survey,\n                        ipu_maintenance_period_type,\n                        ipu_maintenance_period,\n                        ipu_other_client_deductibles,\n                        ipu_coin_other_client_charges)\n            SELECT v_new_ipu_code,\n                   ipu_property_id,\n                   ipu_item_desc,\n                   ipu_qty,\n                   ipu_value,\n                   ipu_wef,\n                   ipu_wet,\n                   ipu_pol_policy_no,\n                   ipu_pol_ren_endos_no,\n                   ipu_pol_batch_no,\n                   ipu_basic_premium,\n                   ipu_nett_premium,\n                   ipu_compulsory_excess,\n                   ipu_add_theft_excess,\n                   ipu_add_exp_excess,\n                   ipu_prr_rate,\n                   ipu_comp_retention,\n                   ipu_pol_est_max_loss,\n                   ipu_avail_fulc_bal,\n                   ipu_endos_diff_amt,\n                   ipu_prem_wef,\n                   ipu_earth_quake_cover,\n                   ipu_earth_quake_prem,\n                   ipu_location,\n                   ipu_itl,\n                   ipu_polin_code,\n                   ipu_sec_sect_code,\n                   ipu_sect_sht_desc,\n                   ipu_sec_scl_code,\n                   ipu_ncd_status,\n                   ipu_cert_issued,\n                   ipu_related_ipu_code,\n                   ipu_prorata,\n                   ipu_bp,\n                   ipu_gp,\n                   ipu_fp,\n                   ipu_fap,\n                   ipu_prev_ipu_code,\n                   ipu_cummulative_reins,\n                   ipu_eml_si,\n                   ipu_reinsured,\n                   ipu_ct_code,\n                   ipu_sht_desc,\n                   ipu_quz_code,\n                   ipp_quz_sht_desc,\n                   ipu_quz_sht_desc,\n                   ipu_ncl_level,\n                   ipu_ncd_level,\n                      TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n                   || gin_ipu_id_seq.NEXTVAL,\n                   ipu_gross_comp_retention,\n                   ipu_bind_code,\n                   ipu_commission,\n                   ipu_comm_endos_diff_amt,\n                   ipu_facre_amount,\n                   ipu_clp_code,\n                   ipu_excess_rate,\n                   ipu_excess_type,\n                   ipu_excess_rate_type,\n                   ipu_excess_min,\n                   ipu_excess_max,\n                   ipu_prereq_ipu_code,\n                   ipu_escalation_rate,\n                   ipu_endos_remove,\n                   ipu_comm_rate,\n                   ipu_prev_batch_no,\n                   ipu_cur_code,\n                   ipu_relr_code,\n                   ipu_relr_sht_desc,\n                   ipu_reinsure_amt,\n                   ipu_prp_code,\n                   ipu_max_exposure,\n                   ipu_com_retention_rate,\n                   ipu_eff_wef,\n                   ipu_eff_wet,\n                   ipu_retro_cover,\n                   ipu_retro_wef,\n                   ipu_covt_code,\n                   ipu_covt_sht_desc,\n                   ipu_si_diff,\n                   ipu_terr_code,\n                   ipu_terr_desc,\n                   ipu_comments,\n                   ipu_from_time,\n                   ipu_to_time,\n                   ipu_mar_cert_no,\n                   ipu_tot_endos_prem_dif,\n                   ipu_tot_gp,\n                   ipu_tot_value,\n                   ipu_cover_days,\n                   ipu_grp_comp_net_ret,\n                   ipu_grp_si_risk_pct,\n                   ipu_grp_top_loc,\n                   ipu_grp_comp_gross_ret,\n                   ipu_prev_prem,\n                   ipu_current_prrd_code,\n                   ipu_ri_agnt_com_rate,\n                   ipu_ri_agnt_comm_amt,\n                   ipu_tot_fap,\n                   ipu_max_dc_refund_pct,\n                   ipu_extra_premium,\n                   ipu_status,\n                   ipu_uw_yr,\n                   ipu_endose_fap_or_bc,\n                   ipu_tot_first_loss,\n                   ipu_accumulation_limit,\n                   ipu_compute_max_exposure,\n                   ipu_trans_eff_wet,\n                   ipu_prem_tax,\n                   ipu_rate_change_comment,\n                   ipu_trans_count,\n                   ipu_paid_premium,\n                   ipu_paid_tl,\n                   ipu_inception_uwyr,\n                   ipu_prem_comment,\n                   ipu_coin_tl,\n                   ipu_dc_paid_premium,\n                   ipu_dc_ap,\n                   ipu_item_details,\n                   ipu_eml_based_on,\n                   ipu_aggregate_limits,\n                   ipu_rc_code,\n                   ipu_rc_sht_desc,\n                   ipu_free_limit,\n                   ipu_contrad_ipu_code,\n                   ipu_survey_date,\n                   ipu_declared,\n                   ipu_prev_fap,\n                   ipu_prev_tot_fap,\n                   ipu_min_premium_used,\n                   ipu_cancellation_days,\n                   ipu_allowed_comm_rate,\n                   ipu_allowed_comm_amt,\n                   ipu_dc_penalty_pct,\n                   ipu_reinsure_diff_amt,\n                   ipu_prev_reinsure_amt,\n                   ipu_phfund,\n                   ipu_coin_phfund,\n                   ipu_enforce_cvt_min_prem,\n                   ipu_instal_prem,\n                   ipu_prev_ri_si,\n                   ipu_policy_status,\n                   ipu_earthqke_prem_diff,\n                   ipu_override_ri_retention,\n                   ipu_risk_oth_int_parties,\n                   ipu_prorata_sect_prem,\n                   ipu_nonprorata_sect_prem,\n                   ipu_prev_prorata_sect_prem,\n                   ipu_prev_nonprorata_sect_prem,\n                   ipu_tot_prorata_sect_prem,\n                   ipu_tot_nonprorata_sect_prem,\n                   ipu_prev_tot_prorata_s_prem,\n                   ipu_prev_tot_nonprorata_s_prem,\n                   ipu_sub_agn_comm_rate,\n                   ipu_sub_agn_comm_amt,\n                   ipu_lta_endos_com_amt,\n                   ipu_lta_commission,\n                   ipu_lta_comm_rate,\n                   ipu_admin_fee_disc_amt,\n                   ipu_admin_fee_disc_rate,\n                   ipu_lta_comm_disc_rate,\n                   ipu_lta_comm_disc_amt,\n                   ipu_tot_families,\n                   ipu_tot_individuals,\n                   ipu_tot_females,\n                   ipu_tot_males,\n                   ipu_conveyance_type,\n                   ipu_stamp_duty,\n                   ipu_mktr_com_amt,\n                   ipu_mktr_com_rate,\n                   ipu_vat_amt,\n                   ipu_vat_rate,\n                   ipu_comm_disc_type,\n                   ipu_comm_disc_rate,\n                   ipu_comm_disc_amt,\n                   ipu_prev_status,\n                   ipu_rs_code,\n                   ipu_rescue_mem,\n                   ipu_ped_code,\n                   ipu_cover_suspended,\n                   ipu_suspend_wef,\n                   ipu_suspend_wet,\n                   ipu_ncd_cert_no,\n                   ipu_pymt_install_pcts,\n                   ipu_susp_reinstmt_type,\n                   ipu_install_period,\n                   ipu_rescue_charge,\n                   ipu_previous_insurer,\n                   ipu_next_inst_prem,\n                   ipu_wtht,\n                   ipu_drcr_no,\n                   ipu_post_retro_wet,\n                   ipu_post_retro_cover,\n                   ipu_co_phfund,\n                   ipu_cover_note_remarks,\n                   ipu_cover_note_wet,\n                   ipu_cover_note_wef,\n                   ipu_cover_note_date,\n                   ipu_cover_note_by,\n                   ipu_cover_note_no,\n                   ipu_health_tax,\n                   ipu_motor_tax,\n                   ipu_certchg,\n                   ipu_road_safety_tax,\n                   ipu_client_vat_amt,\n                   ipu_motor_levy,\n                   ipu_overrideride_ret_type,\n                   ipu_db_code,\n                   ipu_rare_model,\n                   ipu_cashback_appl,\n                   ipu_cashback_level,\n                   ipu_vehicle_model,\n                   ipu_vehicle_make,\n                   ipu_vehicle_model_code,\n                   ipu_vehicle_make_code,\n                   ipu_loc_town,\n                   ipu_prop_address,\n                   ipu_other_com_charges,\n                   ipu_risk_note,\n                   ipu_model_yr,\n                   ipu_insured_driver,\n                   ipu_cert_no,\n                   ipu_validate_ucr,\n                   ipu_ucr_code,\n                   ipu_pip_code,\n                   ipu_pip_pf_code,\n                   ipu_survey_agnt_code,\n                   ipu_quza_code,\n                   ipu_survey,\n                   ipu_maintenance_period_type,\n                   ipu_maintenance_period,\n                   ipu_other_client_deductibles,\n                   ipu_coin_other_client_charges\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_ipu_code;\n\n\n        IF v_is_motor_risk = 'Y'\n        THEN\n            BEGIN\n                gin_stp_uw_pkg.populate_cert_to_print (v_ipu_pol_batch_no,\n                                                       'N',\n                                                       'N',\n                                                       NULL,\n                                                       v_new_ipu_code);\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                           'Error allocating certificates at step 1....'\n                        || SQLERRM (SQLCODE));\n            END;",
        "pop_loading_rsk_limits": "PROCEDURE pop_loading_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                      v_scl_code       IN NUMBER,\n                                      v_bind_code      IN NUMBER,\n                                      v_cvt_code       IN NUMBER,\n                                      v_batch_no       IN NUMBER,\n                                      v_sect_type      IN VARCHAR2,\n                                      v_range          IN NUMBER)\n    IS\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                gin_insured_property_unds.ipu_ncd_status%TYPE;\n        v_ncd_level                 gin_insured_property_unds.ipu_ncd_level%TYPE;\n        v_calc_group                NUMBER := 1;\n        v_calc_row                  NUMBER := 1;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code)\n            UNION\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code)\n            UNION\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n\n        CURSOR pil_cur_ncd IS\n            SELECT *\n              FROM gin_policy_insured_limits\n             WHERE pil_ipu_code = v_new_ipu_code AND pil_sect_type = 'ND';\n    BEGIN\n        BEGIN\n            SELECT pol_binder_policy,\n                   NVL (ipu_ncd_status, 'N'),\n                   NVL (ipu_ncd_level, 0)\n              INTO v_pol_binder, v_ncd_status, v_ncd_level\n              FROM gin_policies, gin_insured_property_unds\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "pop_bouquet_rsk_limits": "PROCEDURE pop_bouquet_rsk_limits (v_new_ipu_code    IN NUMBER,\n                                      v_scl_code        IN NUMBER,\n                                      v_bind_code       IN NUMBER,\n                                      v_cvt_code        IN NUMBER,\n                                      v_batch_no        IN NUMBER,\n                                      v_sect_type       IN VARCHAR2,\n                                      v_range           IN NUMBER,\n                                      v_garage_applic   IN VARCHAR2,\n                                      v_no_claim_hist   IN NUMBER,\n                                      v_usage_type      IN VARCHAR2,\n                                      v_vehicle_size    IN VARCHAR2)\n    IS\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                gin_insured_property_unds.ipu_ncd_status%TYPE;\n        v_ncd_level                 gin_insured_property_unds.ipu_ncd_level%TYPE;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   --AND NVL(v_range,0) BETWEEN NVL(prr_range_from,0) AND NVL(prr_range_to,0)\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n        /*UNION\n        SELECT DISTINCT sect_sht_desc, sect_code, sect_desc sect_desc,\n                      sect_type,DECODE (sect_type,'ND', 'NCD','ES', 'Extension SI','EL', 'Extension Limit','SS', 'Section SI',\n                              'SL', 'Section Limit','DS', 'Discount','LO', 'Loading', 'EC', 'Escalation' ) type_desc, prr_rate_type,\n                      DECODE (prr_rate_type,'SRG', 0,'RCU', 0,prr_rate) prr_rate,\n                      DECODE (prr_rate_type,     'SRG', 0,  'RCU', 0,   prr_rate    ) rate,\n                      '0' terr_description,  DECODE (prr_rate_type, 'SRG', 0,'RCU', 0, prr_prem_minimum_amt) prr_prem_minimum_amt,\n                      DECODE (prr_rate_type,'SRG', 1,    'RCU', 1, prr_multiplier_rate) prr_multiplier_rate,\n                      DECODE (prr_rate_type,    'SRG', 1,   'RCU', 1,   prr_division_factor ) prr_division_factor,\n                      DECODE (prr_rate_type, 'SRG', 1, 'RCU', 1,prr_multplier_div_fact) prr_multplier_div_fact,\n                      prr_rate_desc, prr_free_limit, prr_prorated_full,prr_max_rate, prr_min_rate\n                 FROM gin_premium_rates, gin_sections\n                WHERE prr_sect_code = sect_code\n                  AND prr_scl_code = v_scl_code\n                  AND prr_bind_code = v_bind_code\n                  AND sect_type =v_sect_type\n                  AND v_range  BETWEEN prr_range_from AND prr_range_to\n                  AND sect_code NOT IN (\n                                      SELECT pil_sect_code\n                                       FROM gin_policy_insured_limits\n                                        WHERE pil_ipu_code =\n                                                         v_new_ipu_code)\nUNION\nSELECT DISTINCT sect_sht_desc, sect_code, sect_desc sect_desc,\n                      sect_type,DECODE (sect_type,'ND', 'NCD','ES', 'Extension SI','EL', 'Extension Limit','SS', 'Section SI',\n                              'SL', 'Section Limit','DS', 'Discount','LO', 'Loading', 'EC', 'Escalation' ) type_desc, prr_rate_type,\n                      DECODE (prr_rate_type,'SRG', 0,'RCU', 0,prr_rate) prr_rate,\n                      DECODE (prr_rate_type,     'SRG', 0,  'RCU', 0,   prr_rate    ) rate,\n                      '0' terr_description,  DECODE (prr_rate_type, 'SRG', 0,'RCU', 0, prr_prem_minimum_amt) prr_prem_minimum_amt,\n                      DECODE (prr_rate_type,'SRG', 1,    'RCU', 1, prr_multiplier_rate) prr_multiplier_rate,\n                      DECODE (prr_rate_type,    'SRG', 1,   'RCU', 1,   prr_division_factor ) prr_division_factor,\n                      DECODE (prr_rate_type, 'SRG', 1, 'RCU', 1,prr_multplier_div_fact) prr_multplier_div_fact,\n                      prr_rate_desc, prr_free_limit, prr_prorated_full,prr_max_rate, prr_min_rate\n                 FROM gin_premium_rates, gin_sections\n                WHERE prr_sect_code = sect_code\n                  AND prr_scl_code = v_scl_code\n                  AND prr_bind_code = v_bind_code\n                 AND sect_type  =v_sect_type\n                  AND v_range  BETWEEN prr_range_from AND prr_range_to\n                  AND sect_code NOT IN (\n                                       SELECT pil_sect_code\n                                        FROM gin_policy_insured_limits\n                                        WHERE pil_ipu_code =\n                                                            v_new_ipu_code);*/\n    BEGIN\n        --RAISE_eRROR('v_pol_binder='||v_pol_binder);\n        FOR pil_cur_rec IN pil_cur\n        LOOP\n            v_row := NVL (v_row, 0) + 1;\n\n            IF pil_cur_rec.sect_type NOT IN ('GD',\n                                             'GR',\n                                             'NC',\n                                             'CL',\n                                             'UD',\n                                             'VU',\n                                             'VL')\n            THEN\n                BEGIN\n                    INSERT INTO gin_policy_insured_limits (\n                                    pil_code,\n                                    pil_ipu_code,\n                                    pil_sect_code,\n                                    pil_sect_sht_desc,\n                                    pil_desc,\n                                    pil_row_num,\n                                    pil_calc_group,\n                                    pil_limit_amt,\n                                    pil_prem_rate,\n                                    pil_prem_amt,\n                                    pil_rate_type,\n                                    pil_rate_desc,\n                                    pil_sect_type,\n                                    pil_original_prem_rate,\n                                    pil_multiplier_rate,\n                                    pil_multiplier_div_factor,\n                                    pil_annual_premium,\n                                    pil_rate_div_fact,\n                                    --PIL_DESC,\n                                    pil_compute,\n                                    pil_prd_type,\n                                    pil_dual_basis,\n                                    pil_prem_accumulation,\n                                    pil_declaration_section,\n                                    pil_annual_actual_prem,\n                                    pil_free_limit,\n                                    pil_prorata_full,\n                                    pil_prr_max_rate,\n                                    pil_prr_min_rate)\n                             VALUES (\n                                           TO_NUMBER (\n                                               TO_CHAR (SYSDATE, 'RRRR'))\n                                        || gin_pil_code_seq.NEXTVAL,\n                                        v_new_ipu_code,\n                                        pil_cur_rec.sect_code,\n                                        pil_cur_rec.sect_sht_desc,\n                                        pil_cur_rec.sect_desc,\n                                        v_row,\n                                        1,\n                                        NULL,\n                                        DECODE (pil_cur_rec.prr_rate_type,\n                                                'SRG', 0,\n                                                'RCU', 0,\n                                                pil_cur_rec.prr_rate),\n                                        0,\n                                        pil_cur_rec.prr_rate_type,\n                                        pil_cur_rec.prr_rate_desc,\n                                        pil_cur_rec.sect_type,\n                                        pil_cur_rec.prr_rate,\n                                        pil_cur_rec.prr_multiplier_rate,\n                                        pil_cur_rec.prr_multplier_div_fact,\n                                        0,\n                                        pil_cur_rec.prr_division_factor,\n                                        --v_type_desc,\n                                        'Y',\n                                        NULL,\n                                        'N',\n                                        0,\n                                        v_pil_declaration_section,\n                                        0,\n                                        pil_cur_rec.prr_free_limit,\n                                        pil_cur_rec.prr_prorated_full,\n                                        pil_cur_rec.prr_max_rate,\n                                        pil_cur_rec.prr_min_rate);\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error ('Error inserting risk sections..');\n                END;",
        "delete_rsk_limits": "PROCEDURE delete_rsk_limits (v_ipu_code IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_policy_insured_limits\n         WHERE     pil_ipu_code = v_ipu_code\n               AND pil_sect_type IN ('SC', 'CC', 'VA');\n    END;",
        "pop_loading_quot_rsk_limits": "PROCEDURE pop_loading_quot_rsk_limits (v_qr_code     IN NUMBER,\n                                           v_scl_code    IN NUMBER,\n                                           v_bind_code   IN NUMBER,\n                                           v_cvt_code    IN NUMBER,\n                                           v_batch_no    IN NUMBER,\n                                           v_sect_type   IN VARCHAR2,\n                                           v_range       IN NUMBER)\n    IS\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                VARCHAR2 (2);\n        v_ncd_level                 gin_quot_risks.qr_ncd_level%TYPE;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN (SELECT qrl_sect_code\n                                           FROM gin_quot_risk_limits\n                                          WHERE qrl_qr_code = v_qr_code)\n            UNION\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN (SELECT qrl_sect_code\n                                           FROM gin_quot_risk_limits\n                                          WHERE qrl_qr_code = v_qr_code)\n            UNION\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type = v_sect_type\n                   AND v_range BETWEEN prr_range_from AND prr_range_to\n                   AND sect_code NOT IN (SELECT qrl_sect_code\n                                           FROM gin_quot_risk_limits\n                                          WHERE qrl_qr_code = v_qr_code);\n\n        CURSOR pil_cur_ncd IS\n            SELECT *\n              FROM gin_quot_risk_limits\n             WHERE qrl_qr_code = v_qr_code AND qrl_sect_type = 'ND';\n    BEGIN\n        --RAISE_ERROR(v_qr_code||'='||v_bind_code||'v_range'||v_range||'v_sect_type='|| v_sect_type);\n        BEGIN\n            SELECT 'N', NVL ('N', 'N'), NVL (qr_ncd_level, 0)\n              INTO v_pol_binder, v_ncd_status, v_ncd_level\n              FROM gin_quotations, gin_quot_risks\n             WHERE     quot_code = qr_quot_code\n                   AND qr_code = v_qr_code\n                   AND quot_code = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "delete_quot_rsk_limits": "PROCEDURE delete_quot_rsk_limits (v_qr_code IN NUMBER)\n    IS\n    BEGIN\n        DELETE gin_quot_risk_limits\n         WHERE     qrl_qr_code = v_qr_code\n               AND qrl_sect_type IN ('SC', 'CC', 'VA');\n    END;",
        "pop_ren_loading_rsk_limits": "PROCEDURE pop_ren_loading_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                          v_scl_code       IN NUMBER,\n                                          v_bind_code      IN NUMBER,\n                                          v_cvt_code       IN NUMBER,\n                                          v_batch_no       IN NUMBER,\n                                          v_sect_type      IN VARCHAR2,\n                                          v_range          IN NUMBER)\n    IS\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n\n        CURSOR pil_cur_ncd IS\n            SELECT *\n              FROM gin_ren_policy_insured_limits\n             WHERE     pil_ipu_code = v_new_ipu_code\n                   AND pil_sect_type = v_sect_type;\n    BEGIN\n        --RAISE_ERROR(v_scl_code||'='||v_bind_code||'='||v_new_ipu_code||'=v_range'||v_range);\n        BEGIN\n            SELECT pol_binder_policy\n              INTO v_pol_binder\n              FROM gin_ren_policies, gin_ren_insured_property_unds\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "pop_sbu_dtls": "PROCEDURE pop_sbu_dtls (v_pol_batch_no        IN NUMBER,\n                            v_pol_unit_code       IN VARCHAR2,\n                            v_pol_location_code   IN VARCHAR2,\n                            v_pol_add_edit        IN VARCHAR2)\n    IS\n        v_pdl_code   NUMBER;\n        v_cnt        NUMBER;\n    BEGIN\n        SELECT    TO_NUMBER (TO_CHAR (SYSDATE, 'YYYY'))\n               || gin_pdl_code_seq.NEXTVAL\n          INTO v_pdl_code\n          FROM DUAL;\n\n        IF NVL (v_pol_add_edit, 'E') = 'A'\n        THEN\n            BEGIN\n                INSERT INTO gin_policy_sbu_dtls (pdl_code,\n                                                 pdl_pol_batch_no,\n                                                 pdl_unit_code,\n                                                 pdl_location_code,\n                                                 pdl_prepared_date)\n                     VALUES (v_pdl_code,\n                             v_pol_batch_no,\n                             v_pol_unit_code,\n                             v_pol_location_code,\n                             TRUNC (SYSDATE));\n            EXCEPTION\n                WHEN NO_DATA_FOUND\n                THEN\n                    NULL;\n                WHEN OTHERS\n                THEN\n                    raise_error (\n                        'Error Creating Policy Other Details Record..');\n            END;",
        "gin_policies_stp_prc": "PROCEDURE gin_policies_stp_prc (v_pro_code     IN     NUMBER,\n                                    v_brn_code     IN     NUMBER,\n                                    v_cover_from   IN     DATE,\n                                    v_cover_to     IN     DATE,\n                                    v_user         IN     VARCHAR2,\n                                    v_cur_code     IN     NUMBER,\n                                    v_prp_code     IN     NUMBER,\n                                    v_bind_code    IN     NUMBER,\n                                    v_rsk_data     IN     web_risk_tab,\n                                    v_uni_code     IN     NUMBER,\n                                    v_loc_code     IN     NUMBER,\n                                    v_agnt_code    IN     NUMBER,\n                                    v_pop_taxes    IN     VARCHAR2,\n                                    v_batchno         OUT NUMBER)\n    IS\n        v_cnt                      NUMBER;\n        v_new_polin_code           NUMBER;\n        v_exp_flag                 VARCHAR2 (2);\n        v_uw_yr                    VARCHAR2 (1);\n        v_open_cover               VARCHAR2 (2);\n        v_pol_status               VARCHAR2 (5);\n        v_trans_no                 NUMBER;\n        v_stp_code                 NUMBER;\n        v_wet_date                 DATE;\n        v_pol_renewal_dt           DATE;\n        v_new_ipu_code             NUMBER;\n        v_client_pol_no            VARCHAR2 (45);\n        v_end_no                   VARCHAR2 (45);\n        --v_batchno                 NUMBER;\n        v_cur_symbol               VARCHAR2 (15);\n        v_cur_rate                 NUMBER;\n        v_pwet_dt                  DATE;\n        v_pol_uwyr                 NUMBER;\n        v_policy_doc               VARCHAR2 (200);\n        v_brn_sht_desc             VARCHAR2 (15);\n        v_endrsd_rsks_tab          gin_stp_pkg.endrsd_rsks_tab;\n        v_rsk_sect_data            web_sect_tab;\n        v_admin_fee_applicable     VARCHAR2 (1);\n        v_ren_cnt                  NUMBER;\n        v_admin_disc               NUMBER;\n        v_pro_min_prem             NUMBER;\n        v_uw_trans                 VARCHAR2 (1);\n        v_valid_trans              VARCHAR2 (1);\n        v_inception_dt             DATE;\n        v_inception_yr             NUMBER;\n        y                          NUMBER;\n        vuser                      VARCHAR2 (35)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.pvg_username');\n        v_seqno                    VARCHAR2 (35);\n        v_brn_sht_length           NUMBER;\n        v_growth_type              VARCHAR2 (5);\n        v_pol_loaded               VARCHAR2 (5);\n        v_policy_status            VARCHAR2 (5);\n        v_prev_tot_instlmt         NUMBER;\n        v_install_pct              NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_ipu_wef                  DATE;\n        v_ipu_wet                  DATE;\n        v_install_period           NUMBER;\n        v_cover_days               NUMBER;\n        v_pro_sht_desc             gin_products.pro_sht_desc%TYPE;\n        next_ggts_trans_no         NUMBER;\n        v_old_act_code             NUMBER;\n        v_new_act_code             NUMBER;\n        v_pro_travel_cnt           NUMBER;\n        v_ren_wef_dt               DATE;\n        v_ren_wet_dt               DATE;\n        v_pdl_code                 NUMBER;\n        v_agnt_agent_code          NUMBER;\n        v_seq                      NUMBER;\n        v_pol_seq_type             VARCHAR2 (100);\n        v_trans_type               VARCHAR2 (5);\n        vcur_code                  NUMBER;\n        v_coinsurance              VARCHAR2 (1);\n        v_div_code                 NUMBER;\n        v_pol_no                   VARCHAR2 (50);\n        v_serial_no                NUMBER;\n        v_policy_type              VARCHAR2 (50);\n        v_binder_policy            VARCHAR2 (2);\n        v_agent_code               NUMBER;\n        v_agnt_sht_desc            VARCHAR2 (50);\n        --v_pop_taxes              VARCHAR2 (2);\n        v_outside_system           VARCHAR2 (1);\n        v_interface_type           VARCHAR2 (50);\n        v_row                      NUMBER;\n        v_comm_allowed             VARCHAR2 (1);\n        v_tran_ref_no              VARCHAR2 (100);\n        v_serial                   VARCHAR2 (100);\n        v_cashback_lvl             NUMBER;\n        v_cashback_rate            NUMBER;\n        sect_cursor                SYS_REFCURSOR;\n        v_sect_sht_desc            gin_sections.sect_sht_desc%TYPE;\n        v_sec_code                 gin_sections.sect_code%TYPE;\n        v_sect_desc                gin_sections.sect_desc%TYPE;\n        v_sect_type                gin_sections.sect_type%TYPE;\n        v_type_desc                VARCHAR2 (25);\n        v_prr_rate_type            gin_premium_rates.prr_rate_type%TYPE;\n        v_prr_rate                 gin_premium_rates.prr_rate%TYPE;\n        v_terr_description         VARCHAR2 (5);\n        v_prr_prem_minimum_amt     gin_premium_rates.prr_prem_minimum_amt%TYPE;\n        v_prr_multiplier_rate      gin_premium_rates.prr_multiplier_rate%TYPE;\n        v_prr_division_factor      gin_premium_rates.prr_division_factor%TYPE;\n        v_prr_multplier_div_fact   gin_premium_rates.prr_multplier_div_fact%TYPE;\n        v_prr_rate_desc            gin_premium_rates.prr_rate_desc%TYPE;\n        v_prr_free_limit           gin_premium_rates.prr_free_limit%TYPE;\n        v_sec_declaration          gin_subcl_sections.sec_declaration%TYPE;\n        v_scvts_order              gin_subcl_covt_sections.scvts_order%TYPE;\n        v_prr_prorated_full        gin_premium_rates.prr_prorated_full%TYPE;\n        v_prr_si_limit_type        gin_premium_rates.prr_si_limit_type%TYPE;\n        v_prr_si_rate              gin_premium_rates.prr_si_rate%TYPE;\n    BEGIN\n        vuser := v_user;\n\n        IF vuser IS NULL\n        THEN\n            raise_error ('User unknown...');\n        END IF;\n\n        BEGIN\n            SELECT brn_sht_desc\n              INTO v_brn_sht_desc\n              FROM tqc_branches\n             WHERE brn_code = v_brn_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('ERROR GETTING BRANCH DETAILS');\n        END;",
        "gin_ipu_stp_prc": "PROCEDURE gin_ipu_stp_prc (v_batchno        IN     NUMBER,\n                               v_bind_code      IN     NUMBER,\n                               v_property_id    IN     VARCHAR2,\n                               v_ipu_desc       IN     VARCHAR2,\n                               -- v_limit      IN      NUMBER,\n                               v_user           IN     VARCHAR2,\n                               --v_rsk_sect_data               IN   web_sect_tab,\n                               v_scl_code       IN     NUMBER,\n                               v_covt_code      IN     NUMBER,\n                               v_new_ipu_code      OUT NUMBER,\n                               v_db_code        IN     NUMBER)\n    IS\n        v_loaded                   VARCHAR2 (1) DEFAULT 'N';\n        v_ipu_ncd_cert_no          VARCHAR2 (30) DEFAULT NULL;\n        v_del_sect                 VARCHAR2 (1) DEFAULT NULL;\n        v_cnt                      NUMBER;\n        v_new_polin_code           NUMBER;\n        v_uw_yr                    VARCHAR2 (1);\n        v_wef_date                 DATE;\n        v_wet_date                 DATE;\n        v_cover_days               NUMBER;\n        v_bind_name                VARCHAR2 (100);\n        v_cert_no                  VARCHAR2 (35);\n        v_quz_sht_desc             VARCHAR2 (35);\n        --v_count                                NUMBER;\n        v_uw_trans                 VARCHAR2 (1);\n        v_ren_cnt                  NUMBER;\n        v_ipu_prev_status          VARCHAR2 (35);\n        v_ipu_prorata              VARCHAR2 (2);\n        v_pol_tot_instlmt          NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_install_pct              NUMBER;\n        v_ipu_id                   NUMBER;\n        v_cer_cnt                  NUMBER;\n        v_ct_code                  NUMBER;\n        v_error                    VARCHAR2 (200);\n        v_cer_cnt                  NUMBER;\n        v_ipu_id                   NUMBER;\n        v_install_period           NUMBER;\n        v_polc_code                NUMBER;\n        v_risk_pymt_install_pcts   VARCHAR2 (50);\n        v_susp_reinst_type         VARCHAR2 (5);\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_new_pol_wet              DATE;\n        v_rsk_trans_type           VARCHAR2 (3);\n        v_pol_instal_wet           DATE;\n        v_wef                      DATE;\n        v_prev_install_period      NUMBER;\n        v_increment_by             NUMBER;\n        v_increment                VARCHAR2 (2);\n        v_interface_type           VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_risk_id_format           VARCHAR2 (50);\n        v_risk_id_format_param     VARCHAR2 (50);\n        v_id_reg_no                VARCHAR2 (50);\n        v_clnt_pin_no              VARCHAR2 (50);\n        v_ipu_covt_code            NUMBER;\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_pin                  VARCHAR2 (50);\n        v_max_exposure             NUMBER;\n        v_pol_status               VARCHAR2 (10);\n        v_enforce_covt_prem        VARCHAR2 (1);\n        v_cert_autogen             VARCHAR2 (1);\n        v_agnt_agent_code          NUMBER;\n        v_trans_type               VARCHAR2 (5);\n        v_covt_sht_desc            VARCHAR2 (20);\n\n        CURSOR pol_cur IS\n            SELECT gin_policies.*,\n                   NVL (pro_expiry_period, 'Y')     pro_expiry_period,\n                   NVL (pol_open_cover, 'N')        pro_open_cover,\n                   NVL (pro_earthquake, 'N')        pro_earthquake,\n                   NVL (pro_moto_verfy, 'N')        pro_moto_verfy,\n                   NVL (pro_stp, 'N')               pro_stp\n              FROM gin_policies, gin_products\n             WHERE pro_code = pol_pro_code AND pol_batch_no = v_batchno;\n    BEGIN\n        v_trans_type := 'NB';\n\n        SELECT bind_name\n          INTO v_bind_name\n          FROM gin_binders\n         WHERE bind_code = v_bind_code;\n\n        --RAISE_eRROR(v_bind_code|| ' = '||v_scl_code);\n        --                    SELECT db_covt_code\n        --                      INTO v_covt_code\n        --                      FROM gin_binder_details\n        --                     WHERE db_bind_code = v_bind_code;\n        SELECT covt_sht_desc\n          INTO v_covt_sht_desc\n          FROM gin_cover_types\n         WHERE covt_code = v_covt_code;\n\n        SELECT scl_bond_subclass\n          INTO v_cert_autogen\n          FROM gin_sub_classes\n         WHERE scl_code = v_scl_code;\n\n        FOR pol_cur_rec IN pol_cur\n        LOOP\n            IF pol_cur_rec.pol_policy_status = 'NB'\n            THEN\n                v_enforce_covt_prem := 'Y';\n            END IF;\n\n            IF    NVL (pol_cur_rec.pol_binder_policy, 'N') = 'Y'\n               OR NVL (pol_cur_rec.pro_open_cover, 'N') = 'Y'\n            THEN\n                v_uw_yr := 'R';\n            ELSE\n                v_uw_yr := 'P';\n            END IF;\n\n            SELECT db_max_limit\n              INTO v_max_exposure\n              FROM gin_binder_details\n             WHERE db_code = v_db_code;\n\n            v_wef_date := pol_cur_rec.pol_policy_cover_from;\n            v_wet_date := pol_cur_rec.pol_policy_cover_to;\n            -- raise_error(pol_cur_rec.pol_policy_cover_from||' = '||pol_cur_rec.pol_policy_cover_to);\n            v_wef := v_wef_date;\n\n            BEGIN\n                IF v_pol_instal_wet != pol_cur_rec.pol_paid_to_date\n                THEN\n                    UPDATE gin_policies\n                       SET pol_paid_to_date = v_pol_instal_wet\n                     WHERE pol_batch_no = v_batchno;\n                END IF;\n            END;",
        "gin_ipu_stp_prc090216": "PROCEDURE gin_ipu_stp_prc090216 (v_batchno        IN     NUMBER,\n                                     v_bind_code      IN     NUMBER,\n                                     v_property_id    IN     VARCHAR2,\n                                     v_ipu_desc       IN     VARCHAR2,\n                                     -- v_limit      IN      NUMBER,\n                                     v_user           IN     VARCHAR2,\n                                     --v_rsk_sect_data               IN   web_sect_tab,\n                                     v_scl_code       IN     NUMBER,\n                                     v_covt_code      IN     NUMBER,\n                                     v_new_ipu_code      OUT NUMBER)\n    IS\n        v_loaded                   VARCHAR2 (1) DEFAULT 'N';\n        v_ipu_ncd_cert_no          VARCHAR2 (30) DEFAULT NULL;\n        v_del_sect                 VARCHAR2 (1) DEFAULT NULL;\n        v_cnt                      NUMBER;\n        v_new_polin_code           NUMBER;\n        v_uw_yr                    VARCHAR2 (1);\n        v_wef_date                 DATE;\n        v_wet_date                 DATE;\n        v_cover_days               NUMBER;\n        v_bind_name                VARCHAR2 (100);\n        v_cert_no                  VARCHAR2 (35);\n        v_quz_sht_desc             VARCHAR2 (35);\n        --v_count                                NUMBER;\n        v_uw_trans                 VARCHAR2 (1);\n        v_ren_cnt                  NUMBER;\n        v_ipu_prev_status          VARCHAR2 (35);\n        v_ipu_prorata              VARCHAR2 (2);\n        v_pol_tot_instlmt          NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_install_pct              NUMBER;\n        v_ipu_id                   NUMBER;\n        v_cer_cnt                  NUMBER;\n        v_ct_code                  NUMBER;\n        v_error                    VARCHAR2 (200);\n        v_cer_cnt                  NUMBER;\n        v_ipu_id                   NUMBER;\n        v_install_period           NUMBER;\n        v_polc_code                NUMBER;\n        v_risk_pymt_install_pcts   VARCHAR2 (50);\n        v_susp_reinst_type         VARCHAR2 (5);\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_new_pol_wet              DATE;\n        v_rsk_trans_type           VARCHAR2 (3);\n        v_pol_instal_wet           DATE;\n        v_wef                      DATE;\n        v_prev_install_period      NUMBER;\n        v_increment_by             NUMBER;\n        v_increment                VARCHAR2 (2);\n        v_interface_type           VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_risk_id_format           VARCHAR2 (50);\n        v_risk_id_format_param     VARCHAR2 (50);\n        v_id_reg_no                VARCHAR2 (50);\n        v_clnt_pin_no              VARCHAR2 (50);\n        v_ipu_covt_code            NUMBER;\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_pin                  VARCHAR2 (50);\n        v_max_exposure             NUMBER;\n        v_pol_status               VARCHAR2 (10);\n        v_enforce_covt_prem        VARCHAR2 (1);\n        v_cert_autogen             VARCHAR2 (1);\n        v_agnt_agent_code          NUMBER;\n        v_trans_type               VARCHAR2 (5);\n        v_covt_sht_desc            VARCHAR2 (20);\n\n        CURSOR pol_cur IS\n            SELECT gin_policies.*,\n                   NVL (pro_expiry_period, 'Y')     pro_expiry_period,\n                   NVL (pol_open_cover, 'N')        pro_open_cover,\n                   NVL (pro_earthquake, 'N')        pro_earthquake,\n                   NVL (pro_moto_verfy, 'N')        pro_moto_verfy,\n                   NVL (pro_stp, 'N')               pro_stp\n              FROM gin_policies, gin_products\n             WHERE pro_code = pol_pro_code AND pol_batch_no = v_batchno;\n    BEGIN\n        v_trans_type := 'NB';\n\n        SELECT bind_name\n          INTO v_bind_name\n          FROM gin_binders\n         WHERE bind_code = v_bind_code;\n\n        --RAISE_eRROR(v_bind_code|| ' = '||v_scl_code);\n        --                    SELECT db_covt_code\n        --                      INTO v_covt_code\n        --                      FROM gin_binder_details\n        --                     WHERE db_bind_code = v_bind_code;\n        SELECT covt_sht_desc\n          INTO v_covt_sht_desc\n          FROM gin_cover_types\n         WHERE covt_code = v_covt_code;\n\n        SELECT scl_bond_subclass\n          INTO v_cert_autogen\n          FROM gin_sub_classes\n         WHERE scl_code = v_scl_code;\n\n        FOR pol_cur_rec IN pol_cur\n        LOOP\n            IF pol_cur_rec.pol_policy_status = 'NB'\n            THEN\n                v_enforce_covt_prem := 'Y';\n            END IF;\n\n            IF    NVL (pol_cur_rec.pol_binder_policy, 'N') = 'Y'\n               OR NVL (pol_cur_rec.pro_open_cover, 'N') = 'Y'\n            THEN\n                v_uw_yr := 'R';\n            ELSE\n                v_uw_yr := 'P';\n            END IF;\n\n            v_wef_date := pol_cur_rec.pol_policy_cover_from;\n            v_wet_date := pol_cur_rec.pol_policy_cover_to;\n            -- raise_error(pol_cur_rec.pol_policy_cover_from||' = '||pol_cur_rec.pol_policy_cover_to);\n            v_wef := v_wef_date;\n\n            BEGIN\n                IF v_pol_instal_wet != pol_cur_rec.pol_paid_to_date\n                THEN\n                    UPDATE gin_policies\n                       SET pol_paid_to_date = v_pol_instal_wet\n                     WHERE pol_batch_no = v_batchno;\n                END IF;\n            END;",
        "gin_rsk_stp_limits": "PROCEDURE gin_rsk_stp_limits (v_new_ipu_code    IN NUMBER,\n                                  v_scl_code        IN NUMBER,\n                                  v_bind_code       IN NUMBER,\n                                  v_row             IN NUMBER,\n                                  v_add_edit        IN VARCHAR2,\n                                  v_covt_code       IN NUMBER,\n                                  v_rsk_sect_data   IN web_sect_tab,\n                                  v_dbcode          IN NUMBER)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n        v_cnt                      NUMBER;\n        v_cover_days               NUMBER;\n        v_prrd_max_rate            NUMBER;\n        v_prrd_min_rate            NUMBER;\n        v_age                      NUMBER;\n        v_cur_code                 NUMBER;\n        v_batch_no                 NUMBER;\n        v_count                    NUMBER := 0;\n        v_dec_section              VARCHAR2 (5);\n\n        CURSOR pil_cur (v_db_code     IN NUMBER,\n                        vrange        IN NUMBER,\n                        vfreg         IN VARCHAR2,\n                        v_sect_code      NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_max_rate,\n                   prr_min_rate,\n                   prr_prorated_full,\n                   prr_free_limit,\n                   sect_code,\n                   prr_si_limit_type\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_sect_code = v_sect_code\n                           AND sect_sht_desc != 'NCD'\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH',\n                                                 'TL')\n                           AND prr_db_code = v_db_code\n                           AND NVL (prr_rate_freq_type, 'A') =\n                               NVL (vfreg, 'A')\n                           AND prr_rate_type = 'FXD'\n                           AND NVL (vrange, 0) BETWEEN NVL (prr_range_from,\n                                                            0)\n                                                   AND NVL (prr_range_to, 0)\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_db_code = v_db_code\n                           AND prr_sect_code = v_sect_code\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH',\n                                                 'TL')\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_db_code = v_db_code\n                           AND prr_sect_code = v_sect_code\n                           AND sect_type != 'ND'\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH',\n                                                 'TL')\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_sect_code = v_sect_code\n                           AND prr_db_code = v_db_code\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH',\n                                                 'TL')\n                           AND sect_type = 'ND');\n\n        v_freq                     VARCHAR2 (2);\n        v_range                    NUMBER;\n        v_alb_required             VARCHAR2 (2);\n        v_pol_status               VARCHAR2 (10);\n        v_prr_prorated_full        VARCHAR2 (10);\n        v_prr_free_limit           NUMBER;\n        v_sect_code                NUMBER;\n        v_prr_si_limit_type        VARCHAR2 (10);\n    -- v_dbcode                   NUMBER;\n    BEGIN\n        --      BEGIN\n        --         SELECT db_code\n        --           INTO v_dbcode\n        --           FROM gin_binder_details\n        --          WHERE db_bind_code = v_bind_code\n        --            AND db_scl_code = v_scl_code\n        --            AND db_covt_code = v_covt_code;\n\n        --         IF v_dbcode IS NULL\n        --         THEN\n        --            raise_error ('Binder Details have not been set up');\n        --         END IF;\n        --      EXCEPTION\n        --         WHEN OTHERS\n        --         THEN\n        --            raise_error ('Error getting the premium rates for 1st section..');\n        --      END;",
        "gin_rsk_stp_limits090216": "PROCEDURE gin_rsk_stp_limits090216 (v_new_ipu_code    IN NUMBER,\n                                        v_scl_code        IN NUMBER,\n                                        v_bind_code       IN NUMBER,\n                                        v_row             IN NUMBER,\n                                        v_add_edit        IN VARCHAR2,\n                                        v_covt_code       IN NUMBER,\n                                        v_rsk_sect_data   IN web_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n        v_cnt                      NUMBER;\n        v_cover_days               NUMBER;\n        v_prrd_max_rate            NUMBER;\n        v_prrd_min_rate            NUMBER;\n        v_age                      NUMBER;\n        v_cur_code                 NUMBER;\n        v_batch_no                 NUMBER;\n        v_count                    NUMBER := 0;\n        v_dec_section              VARCHAR2 (5);\n\n        CURSOR pil_cur (v_bind_code   IN NUMBER,\n                        v_scl_code    IN NUMBER,\n                        vrange        IN NUMBER,\n                        vfreg         IN VARCHAR2,\n                        v_covt_code   IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_max_rate,\n                   prr_min_rate,\n                   prr_prorated_full,\n                   prr_free_limit,\n                   sect_code,\n                   prr_si_limit_type\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates,\n                           gin_sections,\n                           gin_subcl_sections,\n                           gin_subcl_covt_sections,\n                           gin_binders,\n                           gin_binder_details\n                     WHERE     prr_sect_code = sect_code\n                           AND sec_sect_code = prr_sect_code\n                           AND sec_scl_code = prr_scl_code\n                           AND sect_sht_desc != 'NCD'\n                           AND bind_code = db_bind_code\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH')\n                           AND bind_type = 'Q'\n                           AND db_scl_code = prr_scl_code\n                           AND db_covt_code = scvts_covt_code\n                           AND db_covt_code = v_covt_code\n                           AND prr_scl_code = v_scl_code\n                           AND prr_bind_code = v_bind_code\n                           AND scvts_scl_code = v_scl_code\n                           AND sect_code = scvts_sect_code\n                           AND NVL (prr_rate_freq_type, 'A') =\n                               NVL (vfreg, 'A')\n                           AND prr_rate_type = 'FXD'\n                           AND NVL (vrange, 0) BETWEEN NVL (prr_range_from,\n                                                            0)\n                                                   AND NVL (prr_range_to, 0)\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates,\n                           gin_sections,\n                           gin_binders,\n                           gin_binder_details\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_bind_code = v_bind_code\n                           AND prr_scl_code = v_scl_code\n                           AND db_covt_code = v_covt_code\n                           AND bind_code = db_bind_code\n                           AND bind_type = 'Q'\n                           AND db_scl_code = prr_scl_code\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH')\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates,\n                           gin_sections,\n                           gin_binders,\n                           gin_binder_details\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_bind_code = v_bind_code\n                           AND prr_scl_code = v_scl_code\n                           AND bind_type = 'Q'\n                           AND db_scl_code = prr_scl_code\n                           AND bind_code = db_bind_code\n                           AND db_covt_code = v_covt_code\n                           AND sect_type != 'ND'\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH')\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate,\n                           prr_prorated_full,\n                           prr_free_limit,\n                           prr_si_limit_type\n                      FROM gin_premium_rates,\n                           gin_sections,\n                           gin_binders,\n                           gin_binder_details\n                     WHERE     prr_sect_code = sect_code\n                           AND prr_bind_code = v_bind_code\n                           AND prr_scl_code = v_scl_code\n                           AND bind_type = 'Q'\n                           AND sect_type NOT IN ('GR',\n                                                 'GD',\n                                                 'OM',\n                                                 'OD',\n                                                 'VD',\n                                                 'VL',\n                                                 'LD',\n                                                 'L',\n                                                 'UD',\n                                                 'VU',\n                                                 'NA',\n                                                 'DL',\n                                                 'DL',\n                                                 'MM',\n                                                 'MD',\n                                                 'ND',\n                                                 'CL',\n                                                 'NC',\n                                                 'VH')\n                           AND db_scl_code = prr_scl_code\n                           AND bind_code = db_bind_code\n                           AND db_covt_code = v_covt_code\n                           AND sect_type = 'ND');\n\n        v_freq                     VARCHAR2 (2);\n        v_range                    NUMBER;\n        v_alb_required             VARCHAR2 (2);\n        v_pol_status               VARCHAR2 (10);\n        v_prr_prorated_full        VARCHAR2 (10);\n        v_prr_free_limit           NUMBER;\n        v_sect_code                NUMBER;\n        v_prr_si_limit_type        VARCHAR2 (10);\n    BEGIN\n        BEGIN\n            OPEN pil_cur (v_bind_code,\n                          v_scl_code,\n                          v_range,\n                          v_freq,\n                          v_covt_code);\n\n            LOOP\n                EXIT WHEN pil_cur%NOTFOUND;\n\n                FETCH pil_cur\n                    INTO v_sect_sht_desc,\n                         v_sect_desc,\n                         v_sect_type,\n                         v_type_desc,\n                         v_prr_rate_type,\n                         v_prr_rate,\n                         v_terr_description,\n                         v_prr_prem_minimum_amt,\n                         v_prr_multiplier_rate,\n                         v_prr_division_factor,\n                         v_prr_multplier_div_fact,\n                         v_prr_rate_desc,\n                         v_prrd_max_rate,\n                         v_prrd_min_rate,\n                         v_prr_prorated_full,\n                         v_prr_free_limit,\n                         v_sect_code,\n                         v_prr_si_limit_type;\n            END LOOP;\n\n            CLOSE pil_cur;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error (\n                    'Error getting the premium rates for 1st section..');\n        END;",
        "populate_endos_rsk_dtls_cleang": "PROCEDURE populate_endos_rsk_dtls_cleang (\n        v_old_batch_no       IN     NUMBER,\n        v_trans_type         IN     VARCHAR2,\n        v_new_batch_no       IN     NUMBER,\n        v_old_ipu_code       IN     NUMBER,\n        v_ipu_add_edit       IN     VARCHAR2,\n        v_new_ipu_code          OUT NUMBER,\n        v_action_type        IN     VARCHAR2,\n        --S Suspend, C Cancel RT Reinstate R Revise\n        v_del_date           IN     DATE DEFAULT NULL,\n        v_susp_reinst_type   IN     VARCHAR2 DEFAULT 'PREM',\n        -- Reinstate by refund premium (PREM) or Extending days (DAYS)\n        v_rcpt_amt           IN     NUMBER DEFAULT NULL,\n        -- cash basis  functionality\n        v_sclcode            IN     NUMBER DEFAULT NULL,\n        v_bindcode           IN     NUMBER DEFAULT NULL,\n        v_covtcode           IN     NUMBER DEFAULT NULL,\n        v_dtfrom             IN     DATE DEFAULT NULL,\n        v_dtto               IN     DATE DEFAULT NULL)\n    IS\n        CURSOR cur_ipu IS\n            SELECT DISTINCT ipu_code,\n                            ipu_property_id,\n                            ipu_item_desc,\n                            ipu_qty,\n                            ipu_value,\n                            ipu_wef,\n                            ipu_wet,\n                            ipu_pol_policy_no,\n                            ipu_pol_ren_endos_no,\n                            ipu_pol_batch_no,\n                            ipu_earth_quake_cover,\n                            ipu_earth_quake_prem,\n                            ipu_location,\n                            ipu_polin_code,\n                            ipu_sec_scl_code,\n                            ipu_ncd_status,\n                            ipu_related_ipu_code,\n                            ipu_prorata,\n                            ipu_gp,\n                            ipu_fap,\n                            ipu_prev_ipu_code,\n                            ipu_ncd_level,\n                            ipu_quz_code,\n                            ipu_quz_sht_desc,\n                            ipu_sht_desc,\n                            ipu_id,\n                            ipu_bind_code,\n                            ipu_excess_rate,\n                            ipu_excess_type,\n                            ipu_excess_rate_type,\n                            ipu_excess_min,\n                            ipu_excess_max,\n                            ipu_prereq_ipu_code,\n                            ipu_escalation_rate,\n                            ipu_comm_rate,\n                            ipu_prev_batch_no,\n                            ipu_cur_code,\n                            ipu_relr_code,\n                            ipu_relr_sht_desc,\n                            ipu_pol_est_max_loss,\n                            ipu_eff_wef,\n                            ipu_eff_wet,\n                            ipu_retro_cover,\n                            ipu_retro_wef,\n                            ipu_covt_code,\n                            ipu_covt_sht_desc,\n                            ipu_si_diff,\n                            ipu_terr_code,\n                            ipu_terr_desc,\n                            ipu_from_time,\n                            ipu_to_time,\n                            ipu_mar_cert_no,\n                            ipu_comp_retention,\n                            ipu_bp,\n                            ipu_fp,\n                            ipu_gross_comp_retention,\n                            ipu_prev_prem,\n                            ipu_com_retention_rate,\n                            ipu_prp_code,\n                            ipu_tot_endos_prem_dif,\n                            ipu_tot_gp,\n                            ipu_tot_value,\n                            ipu_ri_agnt_com_rate,\n                            ipu_cover_days,\n                            ipu_ri_agnt_comm_amt,\n                            ipu_tot_fap,\n                            ipu_max_exposure,\n                            ipu_uw_yr,\n                            ipu_tot_first_loss,\n                            ipu_accumulation_limit,\n                            ipu_reinsure_amt,\n                            ipu_compute_max_exposure,\n                            ipu_paid_premium,\n                            ipu_trans_count,\n                            ipu_paid_tl,\n                            ipu_inception_uwyr,\n                            ipu_endos_remove,\n                            ipu_eml_based_on,\n                            ipu_aggregate_limits,\n                            ipu_rc_sht_desc,\n                            ipu_rc_code,\n                            ipu_survey_date,\n                            ipu_item_details,\n                            ipu_override_ri_retention,\n                            ipu_conveyance_type,\n                            ipu_prorata_sect_prem,\n                            ipu_nonprorata_sect_prem,\n                            ipu_prev_prorata_sect_prem,\n                            ipu_prev_nonprorata_sect_prem,\n                            ipu_tot_prorata_sect_prem,\n                            ipu_tot_nonprorata_sect_prem,\n                            ipu_prev_tot_prorata_s_prem,\n                            ipu_prev_tot_nonprorata_s_prem,\n                            ipu_status,\n                            ipu_cover_suspended,\n                            ipu_suspend_wef,\n                            ipu_suspend_wet,\n                            ipu_install_period,\n                            ipu_pymt_install_pcts,\n                            ipu_rs_code,\n                            ipu_rescue_mem,\n                            ipu_rescue_charge,\n                            ipu_instal_prem,\n                            ipu_health_tax,\n                            ipu_road_safety_tax,\n                            ipu_certchg,\n                            ipu_motor_levy,\n                            ipu_client_vat_amt\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_old_ipu_code;\n\n        --AND session_id = v_session_id\n        --AND prp_code = v_prp;\n        CURSOR cur_limits (v_ipu VARCHAR2)\n        IS\n              SELECT *\n                FROM gin_policy_insured_limits\n               WHERE pil_ipu_code = v_ipu\n            ORDER BY pil_code, pil_calc_group, pil_row_num;\n\n        CURSOR security_docs (vipu_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_security_documents\n             WHERE rsd_ipu_code = vipu_code;\n\n        CURSOR cur_clauses (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_perils (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR cur_endors_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch_no;\n\n        --v_new_ipu_code NUMBER;\n        v_cnt                      NUMBER := 0;\n        v_ipu_status               VARCHAR2 (2);\n        v_ipu_wet                  DATE;\n        v_risk_uw_yr               NUMBER;\n        v_ipu_eff_wef              DATE;\n        v_ipu_wef                  DATE;\n        v_ipu_prev_prem            NUMBER;\n        v_dup_rec                  EXCEPTION;\n        v_ipu_prev_ri_amt          NUMBER;\n        v_pil_prem_amt             NUMBER;\n        v_pil_prev_limit           NUMBER;\n        v_compute                  VARCHAR2 (2);\n        v_pil_code                 NUMBER;\n        v_new_pol_no               VARCHAR2 (30);\n        v_new_endr_no              VARCHAR2 (30);\n        v_pol_wet                  DATE;\n        v_pol_wef                  DATE;\n        -- v_trans_eff_date DATE;\n        v_polin_code               NUMBER;\n        vipuwef                    DATE;\n        vipueffwef                 DATE;\n        vipuwet                    DATE;\n        vipueffwet                 DATE;\n        vprevipucode               NUMBER;\n        vprevprem                  NUMBER;\n        vipupaidprem               NUMBER;\n        vipupaidtl                 NUMBER;\n        viputranstype              VARCHAR2 (10);\n        v_pol_uw_year              NUMBER;\n        v_suspend                  VARCHAR2 (1) := 'N';\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_pol_cover_from           DATE;\n        v_pol_cover_to             DATE;\n        v_pol_tot_instlmt          NUMBER;\n        v_install_period           NUMBER;\n        v_cvt_install_type         gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs         gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts    gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods      gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct              NUMBER;\n        v_suspend_days             NUMBER;\n        v_rsks_count               NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_pro_expiry_period        VARCHAR2 (3);\n        v_risk_pymt_install_pcts   VARCHAR2 (35);\n        v_cover_days               NUMBER;\n        v_max_susp_period          NUMBER;\n        v_new_pol_wet              DATE;\n        v_pol_instal_wet           DATE;\n        v_downgrade_on_sus_param   VARCHAR2 (1) := 'N';\n        -- v_covt_code                NUMBER;\n        --v_covt_sht_desc            VARCHAR2 (10);\n        v_covt_downgrade           VARCHAR2 (1) := 'N';\n        v_covt_downgrade_to        VARCHAR2 (10);\n        v_id_reg_no                VARCHAR2 (30);\n        v_clnt_pin_no              VARCHAR2 (30);\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_regulator_number     VARCHAR2 (50);\n        v_maturity_date            DATE;\n        v_agt                      NUMBER;\n        v_sht_desc                 VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_count                    NUMBER;\n        v_no_inst                  NUMBER;\n        v_instal_prem              NUMBER;\n        v_fp_prem                  NUMBER;\n        v_excpt_count              NUMBER;\n        act_type                   NUMBER;\n        v_factor                   NUMBER;\n        v_scl_code                 NUMBER;\n        v_covt_code                NUMBER;\n        v_covt_sht_desc            VARCHAR2 (15);\n        v_bind_code                NUMBER;\n        v_rcpt_amt_to_clean        NUMBER;\n        v_prev_status              VARCHAR2 (5);\n        ipu_prev_status            VARCHAR2 (5);\n        v_pol_status               VARCHAR2 (5);\n        v_cert_autogen             VARCHAR2 (1);\n    BEGIN\n        --  RAISE_ERROR('v_action_type '||v_action_type||' v_old_batch_no '|| v_old_batch_no||' v_old_ipu_code '||v_old_ipu_code );\n        v_ipu_status := 'EN';\n        v_rcpt_amt_to_clean := v_rcpt_amt;\n\n        IF v_trans_type IN ('CN', 'CO')\n        THEN\n            RETURN;\n        END IF;\n\n        IF v_new_batch_no IS NULL\n        THEN\n            raise_error ('Error... Batch number is null...');\n        END IF;\n\n        IF v_old_ipu_code IS NULL\n        THEN\n            raise_error ('Error. No risk to endorse...');\n        END IF;\n\n        BEGIN\n            SELECT pol_policy_no,\n                   pol_ren_endos_no,\n                   pol_wef_dt,\n                   pol_wet_dt,\n                   pol_uw_year,\n                   pol_policy_cover_from,\n                   pol_policy_cover_to,\n                   pol_tot_instlmt,\n                   pro_expiry_period,\n                   pol_paid_to_date\n              INTO v_new_pol_no,\n                   v_new_endr_no,\n                   v_pol_wef,\n                   v_pol_wet,\n                   v_pol_uw_year,\n                   v_pol_cover_from,\n                   v_pol_cover_to,\n                   v_pol_tot_instlmt,\n                   v_pro_expiry_period,\n                   v_pol_instal_wet\n              FROM gin_policies, gin_products\n             WHERE pol_batch_no = v_new_batch_no AND pol_pro_code = pro_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details...');\n        END;",
        "update_comm_details": "PROCEDURE update_comm_details (v_add_edit        IN VARCHAR2,\n                                   v_prc_code        IN NUMBER,\n                                   v_prc_group       IN NUMBER,\n                                   v_prc_used_rate   IN NUMBER,\n                                   v_prc_disc_type   IN VARCHAR2,\n                                   v_prc_disc_rate   IN NUMBER,\n                                   v_ipucode         IN NUMBER,\n                                   v_override_comm   IN VARCHAR2 DEFAULT 'N',\n                                   v_prc_amount      IN NUMBER DEFAULT NULL)\n    IS\n    BEGIN\n        IF v_add_edit = 'E'\n        THEN\n            BEGIN\n                UPDATE gin_policy_risk_commissions\n                   SET prc_group = v_prc_group,\n                       prc_used_rate = v_prc_used_rate,\n                       prc_disc_type = v_prc_disc_type,\n                       prc_disc_rate = v_prc_disc_rate,\n                       prc_override_comm = v_override_comm,\n                       prc_amount = v_prc_amount\n                 WHERE prc_code = v_prc_code;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error updating Commission Details.');\n            END;",
        "add_comm_details": "PROCEDURE add_comm_details (v_trans_code   IN VARCHAR2,\n                                v_trnt_code    IN VARCHAR2,\n                                v_ipucode      IN NUMBER)\n    IS\n        v_pol_batch_no          NUMBER;\n        v_pol_agnt_agent_code   NUMBER;\n        v_bind_lta_type         VARCHAR (1);\n        v_bind_comm_type        VARCHAR (1);\n        v_agn_act_code          NUMBER;\n        v_type                  NUMBER;\n        v_count                 NUMBER;\n    BEGIN\n        BEGIN\n            SELECT pol_batch_no,\n                   pol_agnt_agent_code,\n                   bind_lta_type,\n                   bind_comm_type,\n                   agn_act_code\n              INTO v_pol_batch_no,\n                   v_pol_agnt_agent_code,\n                   v_bind_lta_type,\n                   v_bind_comm_type,\n                   v_agn_act_code\n              FROM gin_policies,\n                   gin_insured_property_unds,\n                   gin_binders,\n                   tqc_agencies\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_ipucode\n                   AND agn_code = pol_agnt_agent_code\n                   AND ipu_bind_code = bind_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details ');\n        END;",
        "updatepctriskdates": "PROCEDURE updatepctriskdates (v_pol_batch_no   IN NUMBER,\n                                  v_wef_dt         IN DATE,\n                                  v_wet_dt         IN DATE)\n    IS\n        v_current_ipu_code   NUMBER;\n        v_pol_batch_nos      NUMBER;\n    BEGIN\n        -- BEGIN\n        --   select   pol_batch_no  into v_pol_batch_nos  from gin_policies   where\n        --    --ipu_code=v_ipu_code\n        --    pol_batch_no=v_pol_batch_no\n        --   -- and ipu_pol_batch_no=pol_batch_no\n        --    and pol_policy_status='NB';\n        --\n        --    EXCEPTION WHEN OTHERS  THEN\n        --    raise_error('ERROR updating current risk dates');\n        --    END;",
        "populate_pol_risk_services": "PROCEDURE populate_pol_risk_services (v_ipu_code       IN NUMBER,\n                                          v_pol_batch_no   IN NUMBER,\n                                          v_rss_code       IN NUMBER,\n                                          v_rs_code        IN NUMBER,\n                                          v_policy_no      IN VARCHAR2,\n                                          v_endors_no      IN VARCHAR2)\n    IS\n        v_cnt      NUMBER;\n        v_end_no   VARCHAR2 (50);\n    BEGIN\n        IF v_endors_no = NULL\n        THEN\n            SELECT pol_ren_endos_no\n              INTO v_end_no\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        END IF;\n\n        BEGIN\n            SELECT COUNT (*)\n              INTO v_cnt\n              FROM gin_policy_risk_services\n             WHERE prs_ipu_code = v_ipu_code AND prs_rss_code = v_rss_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_cnt := 0;\n        END;",
        "delete_pol_risk_services": "PROCEDURE delete_pol_risk_services (v_action     IN VARCHAR2,\n                                        v_prs_code   IN NUMBER,\n                                        v_ipu_code   IN NUMBER)\n    IS\n    BEGIN\n        IF NVL (v_action, 'X') = 'D'\n        THEN\n            DELETE FROM gin_policy_risk_services\n                  WHERE prs_ipu_code = v_ipu_code AND prs_code = v_prs_code;\n        END IF;\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error (SQLERRM);\n    END;",
        "checkagentstatus": "PROCEDURE checkagentstatus (v_agn_code     IN NUMBER,\n                                v_trans_type   IN VARCHAR2 DEFAULT NULL)\n    IS\n        v_agn_status   VARCHAR2 (50);\n    BEGIN\n        ---CHECK THE AGENT STATUS IF INACTIVE OR ACTIVE\n        BEGIN\n            SELECT NVL (agn_status, 'XXX')\n              INTO v_agn_status\n              FROM tqc_agencies\n             WHERE agn_code = v_agn_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting agent status...........');\n        END;",
        "update_risk_values": "PROCEDURE update_risk_values (v_ipu_code   IN NUMBER,\n                                  v_survey     IN VARCHAR2 DEFAULT 'N')\n    IS\n    BEGIN\n        UPDATE gin_insured_property_unds\n           SET ipu_survey = UPPER (v_survey)\n         WHERE ipu_code = v_ipu_code;\n    EXCEPTION\n        WHEN OTHERS\n        THEN\n            raise_error ('Error updating if risk is to undergo survey');\n    END;",
        "check_risk_count_applicable": "PROCEDURE check_risk_count_applicable (v_pol_batch_no   IN NUMBER,\n                                           v_uw_year        IN NUMBER)\n    IS\n        v_max_risk_count   NUMBER;\n        v_risk_count       NUMBER;\n    BEGIN\n        IF gin_parameters_pkg.get_param_varchar ('RISKS_COUNT_LIMIT_ALLOWED') =\n           'Y'\n        THEN\n            BEGIN\n                  SELECT COUNT (ipu_code), NVL (scl_max_risk_count, 0)\n                    INTO v_risk_count, v_max_risk_count\n                    FROM gin_policies,\n                         gin_sub_classes,\n                         gin_insured_property_unds,\n                         gin_policy_active_risks\n                   WHERE     ipu_pol_batch_no = pol_batch_no\n                         AND polar_ipu_code = ipu_code\n                         AND polar_pol_batch_no = ipu_pol_batch_no\n                         AND scl_code = ipu_sec_scl_code\n                         AND pol_batch_no = v_pol_batch_no\n                         AND pol_uw_year = v_uw_year\n                GROUP BY NVL (scl_max_risk_count, 0);\n            END;",
        "auto_populate_risk_causes": "PROCEDURE auto_populate_risk_causes (v_ipu_code IN NUMBER)\n    IS\n        CURSOR risksrec IS\n            SELECT ipu_sec_scl_code,\n                   ipu_pol_policy_no,\n                   ipu_pol_ren_endos_no,\n                   ipu_pol_batch_no\n              FROM gin_insured_property_unds, gin_policies\n             WHERE ipu_code = v_ipu_code AND pol_batch_no = ipu_pol_batch_no;\n\n        CURSOR clauses (v_scl_code IN NUMBER)\n        IS\n              SELECT sbcl_cls_code,\n                     cls_sht_desc,\n                     cls_heading,\n                     sbcl_scl_code,\n                     scl_desc,\n                     cls_type,\n                     DECODE (cls_type,\n                             'CL', 'Clause',\n                             'WR', 'Warranty',\n                             'SC', 'Special Conditions')    type_desc,\n                     cls_wording,\n                     cls_editable\n                FROM gin_sub_classes,\n                     gin_clause,\n                     gin_subcl_clauses,\n                     gin_scl_cvt_mand_clauses\n               WHERE     sbcl_cls_code = cls_code\n                     AND scvtmc_cls_sht_desc = sbcl_cls_sht_desc\n                     AND sbcl_scl_code = scl_code\n                     AND scl_wet IS NULL\n                     AND scvmtc_cls_mandatory = 'Y'\n                     AND scvtmc_scl_code = v_scl_code\n                     AND scvtmc_sclcovt_code IN\n                             (SELECT ipu_covt_code\n                                FROM gin_insured_property_unds\n                               WHERE IPU_CODE = v_ipu_code)\n                     AND sbcl_cls_code NOT IN\n                             (SELECT pocl_sbcl_cls_code\n                                FROM gin_policy_clauses\n                               WHERE pocl_ipu_code = v_ipu_code)\n            ORDER BY sbcl_cls_code;\n    BEGIN\n        FOR risk IN risksrec\n        LOOP\n            BEGIN\n                FOR cls IN clauses (risk.ipu_sec_scl_code)\n                LOOP\n                    BEGIN\n                        INSERT INTO gin_policy_clauses (\n                                        pocl_sbcl_cls_code,\n                                        pocl_sbcl_scl_code,\n                                        pocl_cls_sht_desc,\n                                        pocl_pol_policy_no,\n                                        pocl_pol_ren_endos_no,\n                                        pocl_pol_batch_no,\n                                        pocl_ipu_code,\n                                        plcl_cls_type,\n                                        pocl_clause,\n                                        pocl_cls_editable,\n                                        pocl_new,\n                                        pocl_heading)\n                             VALUES (cls.sbcl_cls_code,\n                                     cls.sbcl_scl_code,\n                                     cls.cls_sht_desc,\n                                     risk.ipu_pol_policy_no,\n                                     risk.ipu_pol_ren_endos_no,\n                                     risk.ipu_pol_batch_no,\n                                     v_ipu_code,\n                                     cls.cls_type,\n                                     cls.cls_wording,\n                                     cls.cls_editable,\n                                     'N',\n                                     cls.cls_heading);\n                    EXCEPTION\n                        WHEN OTHERS\n                        THEN\n                            ROLLBACK;\n                            raise_error (\n                                '  Error creating risk clauses record. Contact the system administrator...');\n                    END;",
        "pop_ren_mand_rsk_limits": "PROCEDURE pop_ren_mand_rsk_limits (v_new_ipu_code   IN NUMBER,\n                                       v_scl_code       IN NUMBER,\n                                       v_bind_code      IN NUMBER,\n                                       v_cvt_code       IN NUMBER,\n                                       v_batch_no       IN NUMBER)\n    IS                 -- populates mandatory sections for non binder policies\n        v_pil_declaration_section   VARCHAR2 (30);\n        v_row                       NUMBER;\n        v_pol_binder                VARCHAR2 (2);\n        v_ncd_status                gin_insured_property_unds.ipu_ncd_status%TYPE;\n        v_ncd_level                 gin_insured_property_unds.ipu_ncd_level%TYPE;\n\n        CURSOR pil_cur IS\n            SELECT DISTINCT\n                   sect_sht_desc,\n                   sect_code,\n                   sect_desc\n                       sect_desc,\n                   sect_type,\n                   DECODE (sect_type,\n                           'ND', 'NCD',\n                           'ES', 'Extension SI',\n                           'EL', 'Extension Limit',\n                           'SS', 'Section SI',\n                           'SL', 'Section Limit',\n                           'DS', 'Discount',\n                           'LO', 'Loading',\n                           'EC', 'Escalation')\n                       type_desc,\n                   prr_rate_type,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       prr_rate,\n                   DECODE (prr_rate_type,  'SRG', 0,  'RCU', 0,  prr_rate)\n                       rate,\n                   '0'\n                       terr_description,\n                   DECODE (prr_rate_type,\n                           'SRG', 0,\n                           'RCU', 0,\n                           prr_prem_minimum_amt)\n                       prr_prem_minimum_amt,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multiplier_rate)\n                       prr_multiplier_rate,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_division_factor)\n                       prr_division_factor,\n                   DECODE (prr_rate_type,\n                           'SRG', 1,\n                           'RCU', 1,\n                           prr_multplier_div_fact)\n                       prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_free_limit,\n                   prr_prorated_full,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM gin_premium_rates, gin_sections\n             WHERE     prr_sect_code = sect_code\n                   AND prr_scl_code = v_scl_code\n                   AND prr_bind_code = v_bind_code\n                   AND sect_type != 'ND'\n                   AND sect_code IN\n                           (SELECT scvts_sect_code\n                              FROM gin_subcl_covt_sections\n                             WHERE     scvts_scl_code = v_scl_code\n                                   AND scvts_covt_code = v_cvt_code\n                                   AND NVL (scvts_mandatory, 'N') = 'Y')\n                   AND sect_code NOT IN\n                           (SELECT pil_sect_code\n                              FROM gin_ren_policy_insured_limits\n                             WHERE pil_ipu_code = v_new_ipu_code);\n    BEGIN\n        BEGIN\n            SELECT pol_binder_policy,\n                   NVL (ipu_ncd_status, 'N'),\n                   NVL (ipu_ncd_level, 0)\n              INTO v_pol_binder, v_ncd_status, v_ncd_level\n              FROM gin_ren_policies, gin_ren_insured_property_unds\n             WHERE     pol_batch_no = ipu_pol_batch_no\n                   AND ipu_code = v_new_ipu_code\n                   AND pol_batch_no = v_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining the policy binder...');\n        END;",
        "populate_endos_rsk_dtls_port": "PROCEDURE populate_endos_rsk_dtls_port (\n        v_old_batch_no       IN     NUMBER,\n        v_trans_type         IN     VARCHAR2,\n        v_new_batch_no       IN     NUMBER,\n        v_old_ipu_code       IN     NUMBER,\n        v_ipu_add_edit       IN     VARCHAR2,\n        v_new_ipu_code          OUT NUMBER,\n        v_action_type        IN     VARCHAR2,\n        --S Suspend, C Cancel RT Reinstate R Revise\n        v_del_date           IN     DATE DEFAULT NULL,\n        v_susp_reinst_type   IN     VARCHAR2 DEFAULT 'PREM',\n        -- Reinstate by refund premium (PREM) or Extending days (DAYS)\n        v_rcpt_amt           IN     NUMBER DEFAULT NULL,\n        -- cash basis  functionality\n        v_sclcode            IN     NUMBER DEFAULT NULL,\n        v_bindcode           IN     NUMBER DEFAULT NULL,\n        v_covtcode           IN     NUMBER DEFAULT NULL,\n        v_dtfrom             IN     DATE DEFAULT NULL,\n        v_dtto               IN     DATE DEFAULT NULL,\n        v_no_of_months       IN     NUMBER DEFAULT NULL,\n        v_quot_code          IN     VARCHAR2 DEFAULT NULL)\n    IS\n        CURSOR cur_ipu IS\n            SELECT DISTINCT\n                   ipu_code,\n                   ipu_property_id,\n                   ipu_item_desc,\n                   ipu_qty,\n                   ipu_value,\n                   ipu_wef,\n                   ipu_wet,\n                   ipu_pol_policy_no,\n                   ipu_pol_ren_endos_no,\n                   ipu_pol_batch_no,\n                   ipu_earth_quake_cover,\n                   ipu_earth_quake_prem,\n                   ipu_location,\n                   ipu_polin_code,\n                   ipu_sec_scl_code,\n                   ipu_ncd_status,\n                   ipu_related_ipu_code,\n                   ipu_prorata,\n                   ipu_gp,\n                   ipu_fap,\n                   ipu_prev_ipu_code,\n                   ipu_ncd_level,\n                   ipu_quz_code,\n                   ipu_quz_sht_desc,\n                   ipu_sht_desc,\n                   ipu_id,\n                   ipu_bind_code,\n                   ipu_excess_rate,\n                   ipu_excess_type,\n                   ipu_excess_rate_type,\n                   ipu_excess_min,\n                   ipu_excess_max,\n                   ipu_prereq_ipu_code,\n                   ipu_escalation_rate,\n                   ipu_comm_rate,\n                   ipu_prev_batch_no,\n                   ipu_cur_code,\n                   ipu_relr_code,\n                   ipu_relr_sht_desc,\n                   ipu_pol_est_max_loss,\n                   ipu_eff_wef,\n                   ipu_eff_wet,\n                   ipu_retro_cover,\n                   ipu_retro_wef,\n                   ipu_covt_code,\n                   ipu_covt_sht_desc,\n                   ipu_si_diff,\n                   ipu_terr_code,\n                   ipu_terr_desc,\n                   ipu_from_time,\n                   ipu_to_time,\n                   ipu_mar_cert_no,\n                   ipu_comp_retention,\n                   ipu_bp,\n                   ipu_fp,\n                   ipu_gross_comp_retention,\n                   ipu_prev_prem,\n                   ipu_com_retention_rate,\n                   ipu_prp_code,\n                   ipu_tot_endos_prem_dif,\n                   ipu_tot_gp,\n                   ipu_tot_value,\n                   ipu_ri_agnt_com_rate,\n                   ipu_cover_days,\n                   ipu_ri_agnt_comm_amt,\n                   ipu_tot_fap,\n                   ipu_max_exposure,\n                   ipu_uw_yr,\n                   ipu_tot_first_loss,\n                   ipu_accumulation_limit,\n                   ipu_reinsure_amt,\n                   ipu_compute_max_exposure,\n                   ipu_paid_premium,\n                   ipu_trans_count,\n                   ipu_paid_tl,\n                   ipu_inception_uwyr,\n                   ipu_endos_remove,\n                   ipu_eml_based_on,\n                   ipu_aggregate_limits,\n                   ipu_rc_sht_desc,\n                   ipu_rc_code,\n                   ipu_survey_date,\n                   ipu_item_details,\n                   ipu_override_ri_retention,\n                   ipu_conveyance_type,\n                   ipu_prorata_sect_prem,\n                   ipu_nonprorata_sect_prem,\n                   ipu_prev_prorata_sect_prem,\n                   ipu_prev_nonprorata_sect_prem,\n                   ipu_tot_prorata_sect_prem,\n                   ipu_tot_nonprorata_sect_prem,\n                   ipu_prev_tot_prorata_s_prem,\n                   ipu_prev_tot_nonprorata_s_prem,\n                   ipu_status,\n                   ipu_cover_suspended,\n                   ipu_suspend_wef,\n                   ipu_suspend_wet,\n                   ipu_install_period,\n                   ipu_pymt_install_pcts,\n                   ipu_rs_code,\n                   ipu_rescue_mem,\n                   ipu_rescue_charge,\n                   ipu_instal_prem,\n                   ipu_health_tax,\n                   ipu_road_safety_tax,\n                   ipu_certchg,\n                   ipu_motor_levy,\n                   ipu_client_vat_amt,\n                   ipu_cashback_appl,\n                   ipu_cashback_level,\n                   ipu_vehicle_model,\n                   ipu_vehicle_make,\n                   ipu_vehicle_model_code,\n                   ipu_vehicle_make_code,\n                   ipu_loc_town,\n                   ipu_prop_address,\n                   ipu_risk_note,\n                   ipu_other_com_charges,\n                   ipu_model_yr,\n                   ipu_cert_no,\n                   NVL (ipu_insured_driver, 'Y')     ipu_insured_driver,\n                   ipu_maintenance_period_type,\n                   ipu_maintenance_period,\n                   ipu_other_client_deductibles,\n                   ipu_coin_other_client_charges,\n                   ipu_survey_agnt_code,\n                   ipu_survey,\n                   ipu_marine_type,\n                   ipu_comm_endos_diff_amt,\n                   ipu_commission\n              FROM gin_insured_property_unds\n             WHERE ipu_code = v_old_ipu_code;\n\n        --AND session_id = v_session_id\n        --AND prp_code = v_prp;\n        CURSOR cur_limits (v_ipu VARCHAR2)\n        IS\n              SELECT *\n                FROM                             ---gin_policy_insured_limits,\n                     gin_web_quot_risk_limits\n               --            WHERE pil_ipu_code = v_ipu\n               WHERE qrl_qr_code = v_ipu\n            ORDER BY qrl_code, qrl_calc_group, qrl_row_num;\n\n        --         ORDER BY pil_code, pil_calc_group, pil_row_num;\n\n        CURSOR security_docs (vipu_code NUMBER)\n        IS\n            SELECT *\n              FROM gin_risk_security_documents\n             WHERE rsd_ipu_code = vipu_code;\n\n        CURSOR cur_clauses (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_policy_clauses\n             WHERE pocl_ipu_code = v_ipu;\n\n        CURSOR cur_rsk_perils (v_ipu VARCHAR2)\n        IS\n            SELECT *\n              FROM gin_pol_risk_section_perils\n             WHERE prspr_ipu_code = v_ipu;\n\n        CURSOR cur_perils (v_ipu IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_pol_sec_perils\n             WHERE gpsp_ipu_code = v_ipu;\n\n        CURSOR cur_endors_pol IS\n            SELECT *\n              FROM gin_policies\n             WHERE pol_batch_no = v_old_batch_no;\n\n        CURSOR risk_services (v_ipu NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_risk_services\n             WHERE prs_ipu_code = v_ipu;\n\n        CURSOR web_qr_rsk IS\n            SELECT *\n              FROM gin_web_quot_risks\n             WHERE qr_quot_code = v_quot_code;\n\n        --v_new_ipu_code NUMBER;\n        v_cnt                      NUMBER := 0;\n        v_ipu_status               VARCHAR2 (2);\n        v_ipu_wet                  DATE;\n        v_risk_uw_yr               NUMBER;\n        v_ipu_eff_wef              DATE;\n        v_ipu_wef                  DATE;\n        v_ipu_prev_prem            NUMBER;\n        v_dup_rec                  EXCEPTION;\n        v_ipu_prev_ri_amt          NUMBER;\n        v_pil_prem_amt             NUMBER;\n        v_pil_prev_limit           NUMBER;\n        v_compute                  VARCHAR2 (2);\n        v_pil_code                 NUMBER;\n        v_new_pol_no               VARCHAR2 (30);\n        v_new_endr_no              VARCHAR2 (30);\n        v_pol_wet                  DATE;\n        v_pol_wef                  DATE;\n        -- v_trans_eff_date DATE;\n        v_polin_code               NUMBER;\n        vipuwef                    DATE;\n        vipueffwef                 DATE;\n        vipuwet                    DATE;\n        vipueffwet                 DATE;\n        vprevipucode               NUMBER;\n        vprevprem                  NUMBER;\n        vipupaidprem               NUMBER;\n        vipupaidtl                 NUMBER;\n        viputranstype              VARCHAR2 (10);\n        v_pol_uw_year              NUMBER;\n        v_suspend                  VARCHAR2 (1) := 'N';\n        v_suspend_wef              DATE;\n        v_suspend_wet              DATE;\n        v_pol_cover_from           DATE;\n        v_pol_cover_to             DATE;\n        v_pol_tot_instlmt          NUMBER;\n        v_install_period           NUMBER;\n        v_cvt_install_type         gin_subclass_cover_types.sclcovt_install_type%TYPE;\n        v_cvt_max_installs         gin_subclass_cover_types.sclcovt_max_installs%TYPE;\n        v_cvt_pymt_install_pcts    gin_subclass_cover_types.sclcovt_pymt_install_pcts%TYPE;\n        v_cvt_install_periods      gin_subclass_cover_types.sclcovt_install_periods%TYPE;\n        v_install_pct              NUMBER;\n        v_suspend_days             NUMBER;\n        v_rsks_count               NUMBER;\n        v_pymnt_tot_instlmt        NUMBER;\n        v_pro_expiry_period        VARCHAR2 (3);\n        v_risk_pymt_install_pcts   VARCHAR2 (35);\n        v_cover_days               NUMBER;\n        v_max_susp_period          NUMBER;\n        v_new_pol_wet              DATE;\n        v_pol_instal_wet           DATE;\n        v_downgrade_on_sus_param   VARCHAR2 (1) := 'N';\n        -- v_covt_code                NUMBER;\n        --v_covt_sht_desc            VARCHAR2 (10);\n        v_covt_downgrade           VARCHAR2 (1) := 'N';\n        v_covt_downgrade_to        VARCHAR2 (10);\n        v_id_reg_no                VARCHAR2 (30);\n        v_clnt_pin_no              VARCHAR2 (30);\n        v_clnt_passport_no         VARCHAR2 (50);\n        v_agent_code               NUMBER;\n        v_agn_regulator_number     VARCHAR2 (50);\n        v_maturity_date            DATE;\n        v_agt                      NUMBER;\n        v_sht_desc                 VARCHAR2 (50);\n        v_cnt1                     NUMBER;\n        v_count                    NUMBER;\n        v_no_inst                  NUMBER;\n        v_instal_prem              NUMBER;\n        v_fp_prem                  NUMBER;\n        v_excpt_count              NUMBER;\n        act_type                   NUMBER;\n        v_factor                   NUMBER;\n        v_scl_code                 NUMBER;\n        v_qr_code                  NUMBER;\n        v_covt_code                NUMBER;\n        v_covt_sht_desc            VARCHAR2 (25);\n        v_bind_code                NUMBER;\n        v_prev_status              VARCHAR2 (5);\n        ipu_prev_status            VARCHAR2 (5);\n        v_pol_status               VARCHAR2 (5);\n        v_cert_autogen             VARCHAR2 (1);\n        v_certificate_period       VARCHAR2 (1);\n        v_pol_pymt_install_pcts    VARCHAR2 (50);\n        v_tot_pct                  NUMBER;\n        v_months                   NUMBER;\n        v_ex_valuation_param       VARCHAR2 (1);\n        v_valuationcount           NUMBER;\n        v_ismotorproduct           VARCHAR2 (1);\n    BEGIN\n        v_ipu_status := 'EN';\n\n        --      RAISE_ERROR('\n        --      v_action_type '||v_action_type||' v_old_batch_no '|| v_old_batch_no||' v_old_ipu_code '||v_old_ipu_code );\n        IF v_trans_type IN ('CN', 'CO')\n        THEN\n            RETURN;\n        END IF;\n\n        IF v_new_batch_no IS NULL\n        THEN\n            raise_error ('Error... Batch number is null...');\n        END IF;\n\n        IF v_old_ipu_code IS NULL\n        THEN\n            raise_error ('Error. No risk to endorse...');\n        END IF;\n\n        BEGIN\n            SELECT pol_policy_no,\n                   pol_ren_endos_no,\n                   pol_wef_dt,\n                   pol_wet_dt,\n                   pol_uw_year,\n                   pol_policy_cover_from,\n                   pol_policy_cover_to,\n                   pol_tot_instlmt,\n                   pro_expiry_period,\n                   pol_paid_to_date,\n                   pro_cert_period,\n                   pol_pymt_install_pcts\n              INTO v_new_pol_no,\n                   v_new_endr_no,\n                   v_pol_wef,\n                   v_pol_wet,\n                   v_pol_uw_year,\n                   v_pol_cover_from,\n                   v_pol_cover_to,\n                   v_pol_tot_instlmt,\n                   v_pro_expiry_period,\n                   v_pol_instal_wet,\n                   v_certificate_period,\n                   v_pol_pymt_install_pcts\n              FROM gin_policies, gin_products\n             WHERE pol_batch_no = v_new_batch_no AND pol_pro_code = pro_code;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_error ('Error fetching policy details...');\n        END;",
        "update_cert_contra_reason": "PROCEDURE update_cert_contra_reason (\n        v_accl_contra_pol_batch_no   IN aki_cert_cancellation_log.accl_contra_pol_batch_no%TYPE,\n        v_reason                     IN aki_cert_cancellation_log.accl_not_cancelled_reason%TYPE --,\n                                                                                                ----  v_err                           OUT VARCHAR2\n                                                                                                )\n    IS\n        v_cnt     NUMBER;\n        v_count   NUMBER := 0;\n\n        CURSOR active_certs IS\n            SELECT *\n              FROM gin_aki_policy_cert_dtls\n             WHERE     apcd_pol_policy_no IN\n                           (SELECT pol_policy_no\n                              FROM gin_policies\n                             WHERE pol_batch_no = v_accl_contra_pol_batch_no)\n                   AND ROWNUM = 1\n                   AND apcd_cert_cancelled != 'Y'\n                   AND apcd_wet >= TRUNC (SYSDATE)\n                   AND NVL (apcd_cert_allocated, 'N') = 'Y';\n    BEGIN\n        FOR contra_cert IN active_certs\n        LOOP\n            BEGIN\n                SELECT COUNT (*)\n                  INTO v_cnt\n                  FROM aki_cert_cancellation_log\n                 WHERE     accl_apcd_code = contra_cert.apcd_code\n                       AND accl_contra_pol_batch_no =\n                           v_accl_contra_pol_batch_no;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    NULL;      ----v_err := 'Getting cert cancellation count';\n            END;",
        "check_duplicate_quot_risks": "PROCEDURE check_duplicate_quot_risks (v_quot_code IN NUMBER)\n    IS\n        v_cnt                NUMBER;\n        v_allow_duplicates   VARCHAR2 (5);\n        v_msg                VARCHAR2 (2000);\n        v_count              NUMBER;\n\n        CURSOR dup_risk IS\n            SELECT qr_quot_code, qr_property_id, qr_scl_code\n              FROM gin_quot_risks\n             WHERE qr_quot_code = v_quot_code;\n\n        CURSOR dup_distinct_risk IS\n            SELECT DISTINCT qr_quot_code, qr_property_id, qr_scl_code\n              FROM gin_quot_risks\n             WHERE qr_quot_code = v_quot_code;\n    BEGIN\n        BEGIN\n            v_allow_duplicates :=\n                gin_parameters_pkg.get_param_varchar (\n                    'ALLOW_DUPLICATION_OF_RISKS');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_allow_duplicates := 'Y';\n        END;",
        "gin_quote_rsk_limits": "PROCEDURE gin_quote_rsk_limits (v_qr_code         IN NUMBER,\n                                    v_scl_code        IN NUMBER,\n                                    v_bind_code       IN NUMBER,\n                                    v_sect_code       IN NUMBER,\n                                    v_limit           IN NUMBER,\n                                    v_row             IN NUMBER,\n                                    v_add_edit        IN VARCHAR2,\n                                    v_rsk_sect_data   IN web_sect_tab)\n    IS\n        v_sect_sht_desc            VARCHAR2 (30);\n        v_sect_desc                VARCHAR2 (80);\n        v_sect_type                VARCHAR2 (30);\n        v_type_desc                VARCHAR2 (30);\n        v_prr_rate_type            VARCHAR2 (10);\n        v_prr_rate                 NUMBER;\n        v_terr_description         VARCHAR2 (30);\n        v_prr_prem_minimum_amt     NUMBER;\n        v_prr_multiplier_rate      NUMBER;\n        v_prr_division_factor      NUMBER;\n        v_prr_multplier_div_fact   NUMBER;\n        v_prr_rate_desc            VARCHAR2 (30);\n        v_cnt                      NUMBER;\n        v_cover_days               NUMBER;\n        v_prrd_max_rate            NUMBER;\n        v_prrd_min_rate            NUMBER;\n        v_age                      NUMBER;\n        v_cur_code                 NUMBER;\n        v_rsk_travel_sect_data     gin_travel_stp_pkg.rsk_sect_tab;\n        v_batch_no                 NUMBER;\n        v_count                    NUMBER := 0;\n        v_dec_section              VARCHAR2 (5);\n        v_calc_group               NUMBER := 1;\n        v_calc_row                 NUMBER := 1;\n\n        CURSOR pil_cur (vsectcode       IN NUMBER,\n                        vbindcode       IN NUMBER,\n                        vsclcode        IN NUMBER,\n                        vrange          IN NUMBER,\n                        vfreg           IN VARCHAR2,\n                        v_cashbck_lvl   IN NUMBER)\n        IS\n            SELECT sect_sht_desc,\n                   sect_desc,\n                   sect_type,\n                   type_desc,\n                   prr_rate_type,\n                   prr_rate,\n                   terr_description,\n                   prr_prem_minimum_amt,\n                   prr_multiplier_rate,\n                   prr_division_factor,\n                   prr_multplier_div_fact,\n                   prr_rate_desc,\n                   prr_max_rate,\n                   prr_min_rate\n              FROM (SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type IN ('FXD', 'RT')\n                           AND prr_type = 'N'\n                           AND NVL (prr_rate_freq_type, 'A') = vfreg\n                           AND NVL (vrange, 0) BETWEEN NVL (prr_range_from,\n                                                            0)\n                                                   AND NVL (prr_range_to, 0)\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type IN ('SRG', 'RCU')\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type,\n                                   'ES', 'EXTENSION SI',\n                                   'EL', 'EXTENSION LIMIT',\n                                   'SS', 'SECTION SI',\n                                   'SL', 'SECTION LIMIT',\n                                   'DS', 'DISCOUNT',\n                                   'LO', 'LOADING',\n                                   'EC', 'ESCALATION',\n                                   'RS', 'Rider Section')\n                               type_desc,\n                           prr_rate_type,\n                           0\n                               prr_rate,\n                           0\n                               rate,\n                           '0'\n                               terr_description,\n                           0\n                               prr_prem_minimum_amt,\n                           1\n                               prr_multiplier_rate,\n                           1\n                               prr_division_factor,\n                           1\n                               prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_type = 'N'\n                           AND prr_scl_code = vsclcode\n                           AND sect_type NOT IN ('ND', 'CB')\n                           AND prr_rate_type = 'ARG'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'ND', 'NCD')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND sect_type = 'ND'\n                    UNION\n                    SELECT DISTINCT\n                           sect_sht_desc,\n                           sect_code,\n                           sect_desc\n                               sect_desc,\n                           sect_type,\n                           DECODE (sect_type, 'CB', 'CASHBACK')\n                               type_desc,\n                           prr_rate_type,\n                           prr_rate,\n                           prr_rate\n                               rate,\n                           '0'\n                               terr_description,\n                           prr_prem_minimum_amt,\n                           prr_multiplier_rate,\n                           prr_division_factor,\n                           prr_multplier_div_fact,\n                           prr_rate_desc,\n                           prr_max_rate,\n                           prr_min_rate\n                      FROM gin_premium_rates, gin_sections\n                     WHERE     prr_sect_code = sect_code\n                           AND sect_code = vsectcode\n                           AND prr_bind_code = vbindcode\n                           AND prr_scl_code = vsclcode\n                           AND prr_type = 'N'\n                           AND NVL (prr_cashback_level, 0) = v_cashbck_lvl\n                           AND NVL (prr_cashback_appl, 'N') = 'Y'\n                           AND sect_type = 'CB');\n\n        v_freq                     VARCHAR2 (2);\n        v_range                    NUMBER;\n        v_alb_required             VARCHAR2 (2);\n        v_pol_status               VARCHAR2 (10);\n        v_cashback_lvl             NUMBER;\n        v_pil_code                 NUMBER;\n        v_pro_code                 NUMBER;\n        v_qp_code                  NUMBER;\n        v_quot_code                NUMBER;\n    BEGIN\n        BEGIN\n            SELECT DECODE (scl_alb_required,\n                           'Y', NVL (quot_freq_of_payment, 'A'),\n                           'A'),\n                   DECODE (\n                       scl_alb_required,\n                       'Y', gin_travel_stp_pkg.get_alb (TRUNC (SYSDATE),\n                                                        clnt_dob),\n                       DECODE (NVL (scl_use_cover_period_range, 'N'),\n                               'Y', (QR_WET - QR_WEF),\n                               0)),\n                   scl_alb_required,\n                   QUOT_STATUS,\n                   'N'\n                       cashback_lvl,\n                   QP_PRO_CODE,\n                   QP_CODE,\n                   QUOT_CODE\n              INTO v_freq,\n                   v_range,\n                   v_alb_required,\n                   v_pol_status,\n                   v_cashback_lvl,\n                   v_pro_code,\n                   v_qp_code,\n                   v_quot_code\n              FROM gin_quot_risks,\n                   gin_quotations,\n                   tqc_clients,\n                   gin_sub_classes,\n                   gin_quot_products\n             WHERE     qr_quot_code = quot_code\n                   AND qp_quot_code = quot_code\n                   AND qr_prp_code = clnt_code\n                   AND qp_code = qr_qp_code\n                   AND qr_code = v_qr_code\n                   AND qr_scl_code = scl_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_freq := 'A';\n            WHEN OTHERS\n            THEN\n                v_freq := 'A';\n        END;"
    },
    "functions": {
        "determine_admin_fee": "FUNCTION determine_admin_fee (\n        v_clnt_code    IN     NUMBER,\n        v_pol_pol_no   IN     VARCHAR2 DEFAULT NULL,\n        v_admin_disc      OUT NUMBER)\n        RETURN BOOLEAN\n    IS\n        v_admin_count   NUMBER;\n    BEGIN\n        IF v_clnt_code IS NULL\n        THEN\n            raise_error ('Client not provided....');\n        END IF;\n\n        --RAISE_ERROR(v_clnt_code);\n        BEGIN\n            SELECT COUNT (*)\n              INTO v_admin_count\n              FROM gin_adminstration_fee\n             WHERE     adf_clnt_code = v_clnt_code\n                   --AND ADF_POL_POLICY_NO = v_pol_pol_no\n                   AND NVL (adf_policy_applicable, 'N') = 'Y'\n                   AND NVL (adf_authorised, 'N') = 'Y'\n                   AND NVL (adf_paid, 'N') = 'Y'\n                   AND (adf_wet IS NULL OR TRUNC (SYSDATE) <= adf_wet);\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_admin_count := 0;\n        END;",
        "get_current_instal_period": "FUNCTION get_current_instal_period (v_date             IN     DATE,\n                                        v_pol_wef          IN     DATE,\n                                        v_pol_wet          IN     DATE,\n                                        v_pol_no_install   IN     NUMBER,\n                                        v_wef                 OUT DATE,\n                                        v_wet                 OUT DATE)\n        RETURN NUMBER\n    IS\n        v_lapsed_mnth   NUMBER;\n    BEGIN\n        IF v_date NOT BETWEEN v_pol_wef AND v_pol_wet\n        THEN\n            raise_error (\n                   'Date provided '\n                || v_date\n                || ' not between the policy cover period '\n                || v_pol_wef\n                || ' and '\n                || v_pol_wet);\n        END IF;\n\n        v_lapsed_mnth := CEIL (MONTHS_BETWEEN (v_date, v_pol_wef));\n\n        IF v_lapsed_mnth = 0\n        THEN\n            v_lapsed_mnth := 1;\n        END IF;\n\n        DBMS_OUTPUT.put_line (v_lapsed_mnth || '=' || v_pol_no_install);\n\n        IF v_lapsed_mnth >= NVL (v_pol_no_install, 1)\n        THEN\n            IF v_pol_no_install = 1\n            THEN\n                v_wef := v_pol_wef;\n                v_wet := v_pol_wet;\n            ELSE\n                v_wef := ADD_MONTHS (v_pol_wef, v_pol_no_install - 1) - 1;\n                v_wet := v_pol_wet;\n            END IF;\n\n            v_wef := GREATEST (v_wef, v_date);\n            RETURN (v_pol_no_install);\n        ELSE\n            IF v_pol_no_install = 1\n            THEN\n                v_wef := v_pol_wef;\n                v_wet := v_pol_wet;\n            ELSIF v_lapsed_mnth = 1\n            THEN\n                v_wef := v_pol_wef;\n                v_wet := ADD_MONTHS (v_pol_wef, v_lapsed_mnth) - 1;\n            ELSE\n                v_wef := ADD_MONTHS (v_pol_wef, v_lapsed_mnth - 1);\n                v_wet := ADD_MONTHS (v_pol_wef, v_lapsed_mnth) - 1;\n            END IF;\n\n            v_wef := GREATEST (v_wef, v_date);\n            RETURN (v_lapsed_mnth);\n        END IF;\n    END;",
        "merge_policies_text": "FUNCTION merge_policies_text (v_pol_batch_no   IN NUMBER,\n                                  v_raw_txt        IN VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_text   VARCHAR2 (4000);\n    BEGIN\n        v_text :=\n            tqc_memo_web_pkg.process_gis_pol_memo (v_pol_batch_no,\n                                                   NULL,\n                                                   NULL,\n                                                   v_raw_txt,\n                                                   'U');\n        RETURN (v_text);\n    END;",
        "merge_ren_policies_text": "FUNCTION merge_ren_policies_text (v_pol_batch_no   IN NUMBER,\n                                      v_raw_txt        IN VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_text   VARCHAR2 (4000);\n    BEGIN\n        v_text :=\n            tqc_memo_web_pkg.process_gis_pol_memo (v_pol_batch_no,\n                                                   NULL,\n                                                   NULL,\n                                                   v_raw_txt,\n                                                   'R');\n        RETURN (v_text);\n    END;",
        "merge_claims_text": "FUNCTION merge_claims_text (v_claim IN VARCHAR2, v_raw_txt IN VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_text   VARCHAR2 (4000);\n    BEGIN\n        --RAISE_ERROR('v_claim '||v_claim||'Raw Text '||v_raw_txt);\n        v_text :=\n            tqc_memo_web_pkg.process_gis_pol_memo (NULL,\n                                                   v_claim,\n                                                   NULL,\n                                                   v_raw_txt,\n                                                   'C');\n        RETURN (v_text);\n    END;",
        "get_instalment_pct": "FUNCTION get_instalment_pct (v_install_no      IN     NUMBER,\n                                 v_comp_installs   IN     VARCHAR2,\n                                 v_tot_instals        OUT NUMBER)\n        RETURN NUMBER\n    IS\n        v_str       VARCHAR2 (50);\n        v_val       NUMBER;\n        v_tot_val   NUMBER;\n        --v_tot_instals number;\n        vchr        VARCHAR2 (2);\n        v_ret       NUMBER;\n    BEGIN\n        IF v_comp_installs IS NULL\n        THEN\n            raise_error ('Installments percentages not defined..');\n        END IF;\n\n        IF NVL (v_install_no, 0) <= 0\n        THEN\n            raise_error (\n                'Installment number not provided to determine payment percentage ');\n        END IF;\n\n        v_str := v_comp_installs;\n\n        FOR i IN 1 .. LENGTH (v_comp_installs)\n        LOOP\n            vchr := SUBSTR (v_comp_installs, i, 1);\n\n            IF vchr = ':'\n            THEN\n                v_tot_instals := NVL (v_tot_instals, 0) + 1;\n            END IF;\n        END LOOP;\n\n        v_tot_instals := NVL (v_tot_instals, 0) + 1;\n\n        --    DBMS_OUTPUT.PUT_LINE(v_tot_instals);\n        IF v_tot_instals = 0\n        THEN\n            raise_error (\n                   '1The percentages specified in setups '\n                || v_comp_installs\n                || ' is malformed');\n        ELSIF v_tot_instals < v_install_no\n        THEN\n            raise_error (\n                   'The percentages specified in setups '\n                || v_comp_installs\n                || ' do not cater for '\n                || v_install_no\n                || ' installments');\n        END IF;\n\n        FOR i IN 1 .. v_tot_instals\n        LOOP\n            --     DBMS_OUTPUT.PUT_LINE(v_str||'='||I||'='||v_tot_instals);\n            IF    INSTR (v_str, ':') != 0\n               OR (INSTR (v_str, ':') = 0 AND i = v_tot_instals)\n            THEN\n                BEGIN\n                    IF INSTR (v_str, ':') != 0\n                    THEN\n                        v_val := SUBSTR (v_str, 1, INSTR (v_str, ':') - 1);\n                    ELSE\n                        v_val := SUBSTR (v_str, 1);\n                    END IF;\n                EXCEPTION\n                    WHEN OTHERS\n                    THEN\n                        raise_error (\n                               'Error processing percentages specified in setups '\n                            || v_comp_installs);\n                END;",
        "contrad_trans_type": "FUNCTION contrad_trans_type (v_batch_no IN NUMBER)\n        RETURN VARCHAR2\n    IS\n        v_pol_status   VARCHAR2 (10);\n    BEGIN\n        -- raise_error('nnn');\n        SELECT DECODE (prev.pol_policy_status,\n                       'EN', 'RC',\n                       prev.pol_policy_status)\n          INTO v_pol_status\n          FROM gin_policies co, gin_policies prev\n         WHERE     co.pol_prev_batch_no = prev.pol_batch_no\n               AND co.pol_batch_no = v_batch_no;\n\n        RETURN (v_pol_status);\n    END;",
        "check_policy_pending_bal": "FUNCTION check_policy_pending_bal (v_pol_batch_no NUMBER)\n        RETURN VARCHAR2\n    IS\n        v_error       VARCHAR2 (200);\n        v_clnt_code   NUMBER;\n        v_agn_code    NUMBER;\n        v_count       NUMBER;\n    BEGIN\n        v_error := '';\n\n        BEGIN\n            SELECT pol_prp_code, pol_agnt_agent_code\n              INTO v_clnt_code, v_agn_code\n              FROM gin_policies\n             WHERE pol_batch_no = v_pol_batch_no;\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_error :=\n                    'Error getting policy details...' || v_pol_batch_no;\n                RETURN v_error;\n        END;",
        "risk_check": "FUNCTION risk_check (v_batch_no        IN     NUMBER,\n                         v_prev_ipu_code   IN     NUMBER,\n                         v_new_ipu_code       OUT NUMBER)\n        RETURN VARCHAR2\n    IS\n        v_count   NUMBER;\n    BEGIN\n        BEGIN\n              SELECT COUNT (*), ipu_code\n                INTO v_count, v_new_ipu_code\n                FROM gin_insured_property_unds\n               WHERE     ipu_prev_ipu_code = v_prev_ipu_code\n                     AND ipu_pol_batch_no = v_batch_no\n            GROUP BY ipu_code;\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                RETURN 'N';\n            WHEN OTHERS\n            THEN\n                raise_error ('Error determining if the risk exist....');\n        END;",
        "check_risk_exists_backup": "FUNCTION check_risk_exists_backup (v_pol_batch_no       IN     NUMBER,\n                                       v_scl_code           IN     NUMBER,\n                                       v_property_id        IN     VARCHAR2,\n                                       v_allow_duplicates      OUT VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_cnt   NUMBER;\n        v_msg   VARCHAR2 (2000);\n        v_id    NUMBER;\n    BEGIN\n        raise_error ('INNNNNNNNNNNN222');\n\n        BEGIN\n            v_allow_duplicates :=\n                gin_parameters_pkg.get_param_varchar (\n                    'ALLOW_DUPLICATION_OF_RISKS');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_allow_duplicates := 'Y';\n        END;",
        "check_risk_exists": "FUNCTION check_risk_exists (v_pol_batch_no       IN     NUMBER,\n                                v_scl_code           IN     NUMBER,\n                                v_property_id        IN     VARCHAR2,\n                                v_wef                IN     DATE,\n                                v_wet                IN     DATE,\n                                v_allow_duplicates      OUT VARCHAR2,\n                                v_add_edit           IN     VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_cnt     NUMBER;\n        v_msg     VARCHAR2 (2000);\n        v_id      NUMBER;\n        v_count   NUMBER;\n    BEGIN\n        --      IF NVL (v_add_edit, 'N') = 'E'\n        --      THEN\n        --         RETURN NULL;\n        --      END IF;\n        BEGIN\n            v_allow_duplicates :=\n                gin_parameters_pkg.get_param_varchar (\n                    'ALLOW_DUPLICATION_OF_RISKS');\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                v_allow_duplicates := 'Y';\n        END;",
        "check_unique_riskid_format": "FUNCTION check_unique_riskid_format (v_rskid          IN VARCHAR2,\n                                         v_rskid_format   IN VARCHAR2)\n        RETURN BOOLEAN\n    IS\n        -- rskid VARCHAR2(15):= 'KAC 789';\n        val         VARCHAR2 (4000);\n        -- v_format VARCHAR2(200):='[K&& ###&][&& ### &&][&& ####]';\n        --v_rskid_format VARCHAR2(200):='[K&& ###&][&& ### &&][&& ####]';\n        vchr        VARCHAR2 (15);\n        vchr2       VARCHAR2 (15);\n        fmt         VARCHAR2 (5);\n        v_lenght    NUMBER;\n        v_start     NUMBER;\n        x           NUMBER;\n        v_conform   BOOLEAN;\n\n        TYPE v_fmts_tab IS TABLE OF VARCHAR2 (25)\n            INDEX BY BINARY_INTEGER;\n\n        v_fmts      v_fmts_tab;\n    BEGIN\n        -- RAISE_ERROR('v_rskid_format'||v_rskid_format);\n        FOR i IN 1 .. LENGTH (v_rskid_format)\n        LOOP\n            vchr := SUBSTR (v_rskid_format, i, 1);\n            v_lenght := NVL (v_lenght, 0) + 1;\n\n            IF vchr = '['\n            THEN\n                v_start := i + 1;\n                v_lenght := 0;\n            ELSIF vchr = ']'\n            THEN\n                x := NVL (x, 0) + 1;\n                vchr2 := SUBSTR (v_rskid_format, v_start, v_lenght - 1);\n\n                FOR i IN 1 .. LENGTH (vchr2)\n                LOOP\n                    fmt := SUBSTR (vchr2, i, 1);\n\n                    IF NOT (   (fmt IN ('#', '&', ' '))\n                            OR (ASCII (fmt) BETWEEN 65 AND 90)\n                            OR (ASCII (fmt) BETWEEN 48 AND 57))\n                    THEN\n                        DBMS_OUTPUT.put_line (fmt);\n                        DBMS_OUTPUT.put_line (ASCII (fmt));\n                        raise_error (\n                               'Format '\n                            || v_rskid_format\n                            || ' not defined correctly.');\n                    END IF;\n                END LOOP;\n\n                v_fmts (x) := vchr2;\n            END IF;\n        END LOOP;\n\n        v_conform := FALSE;\n\n        FOR i IN 1 .. v_fmts.COUNT\n        LOOP\n            IF     LENGTH (v_fmts (i)) > 0\n               AND LENGTH (v_rskid) = LENGTH (v_fmts (i))\n            THEN\n                v_conform := TRUE;\n\n                FOR y IN 1 .. LENGTH (v_rskid)\n                LOOP\n                    val := ASCII (SUBSTR (v_rskid, y, 1));\n                    fmt := SUBSTR (v_fmts (i), y, 1);\n\n                    IF    (fmt = '&' AND val NOT BETWEEN 65 AND 90)\n                       OR (fmt = '#' AND val NOT BETWEEN 48 AND 57)\n                       OR (fmt = '/' AND val NOT BETWEEN 48 AND 57)\n                    THEN\n                        v_conform := FALSE;\n                    ELSIF     (   (ASCII (fmt) BETWEEN 65 AND 90)\n                               OR (ASCII (fmt) BETWEEN 48 AND 57))\n                          AND ASCII (fmt) != val\n                    THEN\n                        v_conform := FALSE;\n                    END IF;\n                END LOOP;\n            END IF;\n\n            EXIT WHEN v_conform;\n        END LOOP;\n\n        IF NOT v_conform\n        THEN\n            RETURN v_conform;\n        --raise_error (   v_rskid\n        --            || ' Does not conform to ANY Formats provided '\n        --          || v_rskid_format\n        --        );\n        END IF;\n\n        RETURN v_conform;\n    END;",
        "create_uw_trans_func": "FUNCTION create_uw_trans_func (clientname                IN VARCHAR2,\n                                   clientpin                 IN VARCHAR2,\n                                   clienttype                IN VARCHAR2,\n                                   clienttitle               IN VARCHAR2,\n                                   policynumber              IN VARCHAR2,\n                                   policyendorsementnumber   IN VARCHAR2,\n                                   policyagentcode           IN VARCHAR2,\n                                   policycoverfrom           IN DATE,\n                                   policycoverto             IN DATE,\n                                   policyunderwritingyear    IN NUMBER,\n                                   policytransactiontype     IN VARCHAR2,\n                                   --  NB  - New business, EN  - Endorsements, RN  - Renewals\n                                   policypreparedby          IN VARCHAR2,\n                                   policyauthorizedby        IN VARCHAR2,\n                                   policybranchcode          IN VARCHAR2,\n                                   policydebitnotenumber     IN VARCHAR2,\n                                   policyproduct             IN VARCHAR2,\n                                   policystampduty           IN NUMBER,\n                                   policycurrency            IN VARCHAR2,\n                                   riskid                    IN VARCHAR2,\n                                   riskdesc                  IN VARCHAR2,\n                                   risksubclass              IN VARCHAR2,\n                                   riskcovertype             IN VARCHAR2,\n                                   risksuminsured            IN NUMBER,\n                                   riskbasicpremium          IN NUMBER,\n                                   --This is premium inclusive of commission but not inclusive of the taxes\n                                   riskcommissionamount      IN NUMBER,\n                                   risktraininglevy          IN NUMBER,\n                                   policyphcf                IN NUMBER,\n                                   premsection               IN NUMBER)\n        RETURN VARCHAR2\n    IS\n        vcount           NUMBER;\n        vreturn          VARCHAR2 (1);\n        vclntcode        NUMBER;\n        vprocnt          NUMBER;\n        r_no             NUMBER;\n        r_pol_no         NUMBER;\n        v_pol_rec        gin_policies_loading_tab := gin_policies_loading_tab ();\n        v_pol_dtls_rec   gin_load_policy_dtls_tbl\n                             := gin_load_policy_dtls_tbl ();\n        v_new_ipu_code   NUMBER;\n        v_pol_recd       web_pol_tab := web_pol_tab ();\n        v_poll_code      NUMBER;\n        v_batch_no       NUMBER;\n        v_user           VARCHAR2 (30) := 'VMUGO';\n        v_exceptions     VARCHAR2 (10);\n        v_policy_no      VARCHAR2 (30);\n        v_pol_wef        DATE;\n        v_pol_wet        DATE;\n        v_rn_id          NUMBER;\n        v_batchno        NUMBER;\n        v_trans_no       NUMBER;\n        v_itb_code       NUMBER;\n    BEGIN\n        /*This function create a policy  from client creation to authorization*/\n        SELECT    TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n               || gin_itb_code_seq.NEXTVAL\n          INTO v_itb_code\n          FROM DUAL;\n\n        IF policytransactiontype = 'NB'\n        THEN\n            SELECT gin_poll_code_seq.NEXTVAL INTO v_poll_code FROM DUAL;\n\n            INSERT INTO gin_policies_loading (poll_code,\n                                              poll_old_policy_no,\n                                              poll_old_branch,\n                                              poll_old_class,\n                                              poll_old_clnt_sht_desc,\n                                              poll_name_of_insured,\n                                              poll_old_agn_sht_desc,\n                                              poll_cover_from,\n                                              poll_cover_to,\n                                              poll_renewal_date,\n                                              poll_risk_id,\n                                              poll_cover_type,\n                                              poll_sum_insured,\n                                              poll_premium,\n                                              poll_stamp_duty,\n                                              poll_training_levy,\n                                              poll_phcf,\n                                              poll_new_policy_no,\n                                              poll_new_branch,\n                                              poll_new_class,\n                                              poll_new_clnt_sht_desc,\n                                              poll_new_agn_sht_desc,\n                                              poll_status,\n                                              poll_agn_code,\n                                              poll_clnt_code,\n                                              poll_brn_code,\n                                              poll_currency,\n                                              poll_cur_code,\n                                              poll_pro_code,\n                                              poll_ready,\n                                              poll_remarks,\n                                              poll_load,\n                                              poll_group,\n                                              poll_agn_sht_desc,\n                                              poll_brn_sht_desc,\n                                              poll_pro_sht_desc,\n                                              poll_cover_wef,\n                                              poll_cover_wet,\n                                              poll_wef,\n                                              poll_wet,\n                                              poll_ren_date,\n                                              poll_scl_code,\n                                              poll_covt_code,\n                                              poll_covt_sht_desc,\n                                              poll_scl_desc,\n                                              poll_coinsurance,\n                                              pol_bdiv_code,\n                                              poll_bind_code,\n                                              poll_binder_policy,\n                                              poll_date_issued,\n                                              poll_clnt_surname,\n                                              poll_clnt_othernames,\n                                              poll_receipt_no,\n                                              poll_dob,\n                                              poll_destination,\n                                              poll_agn_name,\n                                              poll_type,\n                                              poll_brn_name,\n                                              poll_passport_no,\n                                              poll_schengen,\n                                              poll_cert_no,\n                                              poll_id_no,\n                                              poll_pin_no,\n                                              poll_postal_addr,\n                                              poll_res_addr,\n                                              poll_postal_code,\n                                              poll_email_addr,\n                                              poll_phone_no,\n                                              poll_mobile_no)\n                 VALUES (v_poll_code,\n                         policynumber,\n                         policybranchcode,\n                         policyproduct,\n                         clientpin,\n                         clientname,\n                         policyagentcode,\n                         policycoverfrom,\n                         policycoverto,\n                         NULL,\n                         riskid,\n                         riskcovertype,\n                         risksuminsured,\n                         riskbasicpremium,\n                         policystampduty,\n                         risktraininglevy,\n                         policyphcf,\n                         NULL,\n                         NULL,\n                         risksubclass,\n                         NULL,\n                         policyagentcode,\n                         policytransactiontype,\n                         NULL,\n                         NULL,\n                         NULL,\n                         policycurrency,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         'N',\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         policycoverfrom,\n                         policycoverto,\n                         policycoverfrom,\n                         policycoverto,\n                         NULL,\n                         risksubclass,\n                         NULL,\n                         NULL,\n                         NULL,\n                         'N',\n                         NULL,\n                         NULL,\n                         'N',\n                         NULL,\n                         clientname,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         policyagentcode,\n                         'N',\n                         policybranchcode,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         clientpin,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL,\n                         NULL);\n\n            BEGIN\n                gin_loading_utilities.check_pol_data (v_poll_code,\n                                                      v_user,\n                                                      'Y',\n                                                      FALSE,\n                                                      TRUE);\n            END;",
        "get_prev_tran_type": "FUNCTION get_prev_tran_type (v_batchno        IN     NUMBER,\n                                 v_prevbatch_no      OUT VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_max_extensions   NUMBER := 1;\n        v_batch_no         NUMBER := 2010533566;\n        v_prev_batch_no    NUMBER;\n        v_maxed            VARCHAR2 (1) := 'N';\n        v_num              NUMBER;\n        v_trans_type       VARCHAR2 (5);\n        v_cover_days       NUMBER;\n\n        FUNCTION get_prev_tran_type (v_batch_no        IN     NUMBER,\n                                     v_prev_batch_no      OUT VARCHAR2)\n            RETURN VARCHAR2\n        IS\n            v_retval   VARCHAR2 (5);\n            v_btchno   NUMBER;\n        BEGIN\n            SELECT pol_policy_status, pol_prev_batch_no\n              INTO v_retval, v_btchno\n              FROM gin_policies\n             WHERE pol_batch_no = v_batch_no;\n\n            IF v_retval = 'CO'\n            THEN\n                SELECT pol_policy_status, pol_prev_batch_no\n                  INTO v_retval, v_prev_batch_no\n                  FROM gin_policies\n                 WHERE pol_batch_no = v_btchno;\n            ELSE\n                v_prev_batch_no := v_btchno;\n            END IF;\n\n            RETURN (v_retval);\n        EXCEPTION\n            WHEN NO_DATA_FOUND\n            THEN\n                v_retval := 'NONE';\n            WHEN OTHERS\n            THEN\n                raise_error ('Error getting previous transaction type..');\n        END;",
        "create_uw_transx": "FUNCTION create_uw_transx (clientname                IN VARCHAR2,\n                               clientpin                 IN VARCHAR2,\n                               clienttype                IN VARCHAR2,\n                               clienttitle               IN VARCHAR2,\n                               policynumber              IN VARCHAR2,\n                               policyendorsementnumber   IN VARCHAR2,\n                               policyagentcode           IN NUMBER, -- this was change to agn_code\n                               policycoverfrom           IN DATE,\n                               policycoverto             IN DATE,\n                               policyunderwritingyear    IN NUMBER,\n                               policytransactiontype     IN VARCHAR2,\n                               --  NB  - New business, EN  - Endorsements, RN  - Renewals\n                               policybranchcode          IN VARCHAR2,\n                               policydebitnotenumber     IN VARCHAR2, -- same as the endos number\n                               policyproduct             IN VARCHAR2,\n                               policystampduty           IN NUMBER,\n                               v_risk_rec                IN med_risk_tab,\n                               v_ped_code                IN NUMBER)\n        RETURN VARCHAR2\n    IS\n        vcount           NUMBER;\n        vreturn          VARCHAR2 (1);\n        vclntcode        NUMBER;\n        vprocnt          NUMBER;\n        r_no             NUMBER;\n        r_pol_no         NUMBER;\n        v_pol_rec        gin_policies_loading_tab := gin_policies_loading_tab ();\n        v_pol_dtls_rec   gin_load_policy_dtls_tbl\n                             := gin_load_policy_dtls_tbl ();\n        v_new_ipu_code   NUMBER;\n        v_pol_recd       web_pol_tab := web_pol_tab ();\n        v_poll_code      NUMBER;\n        v_batch_no       NUMBER;\n        v_user           VARCHAR2 (30)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_exceptions     VARCHAR2 (10);\n        v_policy_no      VARCHAR2 (30);\n        v_pol_wef        DATE;\n        v_pol_wet        DATE;\n        v_rn_id          NUMBER;\n        v_batchno        NUMBER;\n        v_trans_no       NUMBER;\n        v_covt_type      VARCHAR2 (30);\n\n        CURSOR taxes (vbatchno IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_taxes\n             WHERE ptx_pol_batch_no = vbatchno;\n\n        v_tl             NUMBER;\n        v_phfund         NUMBER;\n        v_scl_code       NUMBER;\n        v_covt_code      NUMBER;\n        v_pro_sht_desc   VARCHAR2 (10);\n        v_itb_code       NUMBER;\n    BEGIN\n        /*This function create a policy  from client creation to authorization*/\n        IF policytransactiontype = 'NB'\n        THEN\n            BEGIN\n                SELECT pro_sht_desc\n                  INTO v_pro_sht_desc\n                  FROM gin_products\n                 WHERE pro_ext_map_code = policyproduct;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Product mapping issue...');\n            END;",
        "create_uw_transxx": "FUNCTION create_uw_transxx (\n        clientname                IN VARCHAR2,\n        clientpin                 IN VARCHAR2,\n        clienttype                IN VARCHAR2,\n        clienttitle               IN VARCHAR2,\n        policynumber              IN VARCHAR2,\n        policyendorsementnumber   IN VARCHAR2,\n        policyagentcode           IN NUMBER,    -- this was change to agn_code\n        policycoverfrom           IN DATE,\n        policycoverto             IN DATE,\n        policyunderwritingyear    IN NUMBER,\n        policytransactiontype     IN VARCHAR2,\n        --  NB  - New business, EN  - Endorsements, RN  - Renewals\n        policybranchcode          IN VARCHAR2,\n        policydebitnotenumber     IN VARCHAR2,     -- same as the endos number\n        policyproduct             IN VARCHAR2,\n        policystampduty           IN NUMBER,\n        v_risk_rec                IN med_risk_tab,\n        v_ped_code                IN NUMBER,\n        v_post_trans              IN VARCHAR2 DEFAULT 'Y')\n        RETURN VARCHAR2\n    IS\n        vcount           NUMBER;\n        vreturn          VARCHAR2 (1);\n        vclntcode        NUMBER;\n        vprocnt          NUMBER;\n        r_no             NUMBER;\n        r_pol_no         NUMBER;\n        v_pol_rec        gin_policies_loading_tab := gin_policies_loading_tab ();\n        v_pol_dtls_rec   gin_load_policy_dtls_tbl\n                             := gin_load_policy_dtls_tbl ();\n        v_new_ipu_code   NUMBER;\n        v_pol_recd       web_pol_tab := web_pol_tab ();\n        v_poll_code      NUMBER;\n        v_batch_no       NUMBER;\n        v_user           VARCHAR2 (30)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_exceptions     VARCHAR2 (10);\n        v_policy_no      VARCHAR2 (30);\n        v_pol_wef        DATE;\n        v_pol_wet        DATE;\n        v_rn_id          NUMBER;\n        v_batchno        NUMBER;\n        v_trans_no       NUMBER;\n        v_covt_type      VARCHAR2 (30);\n        v_itb_code       NUMBER;\n\n        CURSOR taxes (vbatchno IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_taxes\n             WHERE ptx_pol_batch_no = vbatchno;\n\n        v_tl             NUMBER;\n        v_phfund         NUMBER;\n        v_scl_code       NUMBER;\n        v_covt_code      NUMBER;\n        v_pro_sht_desc   VARCHAR2 (10);\n    BEGIN\n        /*This function create a policy  from client creation to authorization*/\n        IF policytransactiontype = 'NB'\n        THEN\n            BEGIN\n                SELECT pro_sht_desc\n                  INTO v_pro_sht_desc\n                  FROM gin_products\n                 WHERE pro_ext_map_code = policyproduct;\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Product mapping issue...');\n            END;",
        "create_uw_trans": "FUNCTION create_uw_trans (\n        clientname                IN VARCHAR2,\n        clientcode                IN VARCHAR2,\n        clienttype                IN VARCHAR2,\n        clienttitle               IN VARCHAR2,\n        clientpin                 IN VARCHAR2,\n        postaladdrs               IN VARCHAR2,\n        postaltown                IN VARCHAR2,\n        postalcode                IN VARCHAR2,\n        telephoneno               IN VARCHAR2,\n        mobilenumber              IN VARCHAR2,\n        policybranchcode          IN VARCHAR2,\n        policyagentcode           IN NUMBER,    -- this was change to agn_code\n        country                   IN VARCHAR2,\n        policynumber              IN VARCHAR2,\n        policyendorsementnumber   IN VARCHAR2,\n        policydebitnotenumber     IN VARCHAR2,     -- same as the endos number\n        policytransactiontype     IN VARCHAR2,\n        --  NB  - New business, EN  - Endorsements, RN  - Renewals\n        policyproduct             IN VARCHAR2,\n        policycoverfrom           IN DATE,\n        policycoverto             IN DATE,\n        policyunderwritingyear    IN NUMBER,\n        policystampduty           IN NUMBER,\n        v_ped_code                IN NUMBER,\n        v_post_trans              IN VARCHAR2 DEFAULT 'Y')\n        RETURN VARCHAR2\n    IS\n        vcount                NUMBER;\n        vreturn               VARCHAR2 (1);\n        vclntcode             NUMBER;\n        vprocnt               NUMBER;\n        r_no                  NUMBER;\n        r_pol_no              NUMBER;\n        v_pol_rec             gin_policies_loading_tab := gin_policies_loading_tab ();\n        v_pol_dtls_rec        gin_load_policy_dtls_tbl\n                                  := gin_load_policy_dtls_tbl ();\n        v_new_ipu_code        NUMBER;\n        v_pol_recd            web_pol_tab := web_pol_tab ();\n        v_poll_code           NUMBER;\n        v_batch_no            NUMBER;\n        v_user                VARCHAR2 (30)\n            := pkg_global_vars.get_pvarchar2 ('PKG_GLOBAL_VARS.PVG_USERNAME');\n        v_exceptions          VARCHAR2 (10);\n        v_policy_no           VARCHAR2 (30);\n        v_pol_wef             DATE;\n        v_pol_wet             DATE;\n        v_rn_id               NUMBER;\n        v_batchno             NUMBER;\n        v_trans_no            NUMBER;\n        v_covt_type           VARCHAR2 (30);\n        v_uw_yr               NUMBER;\n        v_ipu_code            NUMBER;\n        v_si                  NUMBER;\n        v_tot_prem            NUMBER;\n        v_pol_policy_status   VARCHAR2 (30);\n        v_clnt_sht_desc       VARCHAR2 (30);\n        v_pro_code            NUMBER;\n        v_agn_status          VARCHAR2 (30);\n        v_user1               VARCHAR2 (30);\n        v_agn_sht_desc        VARCHAR2 (30);\n        v_itb_code            NUMBER;\n        v_err_msg             VARCHAR2 (200);\n\n        CURSOR taxes (vbatchno IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_policy_taxes\n             WHERE ptx_pol_batch_no = vbatchno;\n\n        v_tl                  NUMBER;\n        v_phfund              NUMBER;\n        v_scl_code            NUMBER;\n        v_covt_code           NUMBER;\n        v_pro_sht_desc        VARCHAR2 (10);\n        v_risk_ri_rec         web_risk_tab := web_risk_tab ();\n        v_auth                VARCHAR2 (10);\n        v_clnt_name           VARCHAR2 (300);\n\n        -- v_clnt_sht_desc  VARCHAR2 (30);\n        CURSOR drpol (v_policy_no IN VARCHAR2)\n        IS\n            SELECT pol_batch_no\n              FROM gin_policies\n             WHERE     pol_policy_no = v_policy_no\n                   AND NVL (pol_authosrised, 'N') != 'A';\n\n        CURSOR rsk IS\n            SELECT *\n              FROM gin_policy_electronic_data\n             WHERE ped_code = v_ped_code;\n\n        CURSOR risk (vbatch IN NUMBER)\n        IS\n            SELECT *\n              FROM gin_insured_property_unds\n             WHERE ipu_pol_batch_no = vbatch;\n    BEGIN\n        /*This function create a policy  from client creation to authorization*/\n        v_user1 := fms_gen_pkg.get_username ();\n\n        SELECT    TO_NUMBER (TO_CHAR (SYSDATE, 'RRRR'))\n               || gin_itb_code_seq.NEXTVAL\n          INTO v_itb_code\n          FROM DUAL;\n\n        IF policyagentcode != 0\n        THEN\n            BEGIN\n                SELECT agn_status\n                  INTO v_agn_status\n                  FROM tqc_agencies\n                 WHERE agn_code = TRIM (policyagentcode);\n            EXCEPTION\n                WHEN OTHERS\n                THEN\n                    raise_error ('Error determining the account status....');\n            END;",
        "get_policy_facre": "FUNCTION get_policy_facre (v_batch_no IN NUMBER)\n        RETURN NUMBER\n    IS\n        v_count   NUMBER;\n    BEGIN\n        BEGIN\n            SELECT COUNT (1)\n              INTO v_count\n              FROM gin_policies\n             WHERE pol_policy_type = 'F' AND pol_batch_no = v_batch_no;\n\n            RETURN UPPER (v_count);\n        EXCEPTION\n            WHEN OTHERS\n            THEN\n                raise_application_error (\n                    -20001,\n                    'This policy is not a Facre business....');\n        END;",
        "get_installment_period": "FUNCTION get_installment_period (\n        v_installment_def   IN VARCHAR2,\n        v_no_of_endos       IN NUMBER,\n        v_value_type        IN VARCHAR2 DEFAULT 'C')\n        RETURN NUMBER\n    IS\n        v_installment_perct   NUMBER;\n    BEGIN\n        ---raise_error('v_installment_def='||v_installment_def||'v_no_of_endos='||v_no_of_endos||'v_installment_perct='||v_installment_perct);\n        IF v_value_type = 'C'\n        THEN\n            SELECT COLUMN_VALUE\n              INTO v_installment_perct\n              FROM (SELECT ROWNUM COUNT, x.*\n                      FROM TABLE (convertstringtoarray (v_installment_def)) x)\n                   a\n             WHERE a.COUNT = v_no_of_endos;\n        ELSIF v_value_type = 'E'\n        THEN\n            SELECT SUM (COLUMN_VALUE)\n              INTO v_installment_perct\n              FROM TABLE (convertstringtoarray (v_installment_def))\n             WHERE ROWNUM <= v_no_of_endos;\n        END IF;\n\n        RETURN v_installment_perct;\n    END;",
        "merge_quote_text": "FUNCTION merge_quote_text (v_quote_code IN NUMBER, v_raw_txt IN VARCHAR2)\n        RETURN VARCHAR2\n    IS\n        v_text   VARCHAR2 (4000);\n    BEGIN\n        v_text :=\n            tqc_memo_web_pkg.process_gis_pol_memo (v_quote_code,\n                                                   NULL,\n                                                   NULL,\n                                                   v_raw_txt,\n                                                   'Q');\n        RETURN (v_text);\n    END;"
    },
    "cursors": {},
    "types": {},
    "variables": {}
}